import{j as ae}from"./jsx-runtime-DRTy3Uxn.js";import{g as Qt,r as R,R as Ic}from"./index-BBkUAzwr.js";import{e as Kd,T as Zd,u as rg,c as ig,d as og,i as ag,E as sg,B as lg,f as ug,g as cg,V as _e,Q as fg,L as dg,h as lt,j as Oe,P as hg,k as Ba,D as bt,O as Qd,l as Jd,a as pg,m as mg,n as nu,o as eh,F as gg,p as yg,q as vg,M as ar,S as bg,r as _g,s as wg,t as Ls,v as na,w as er,x as ru,U as xg,y as Eg,R as Tg,z as Sg,A as Ag,C as Pr,G as kg,H as Kt,I as Og,J as yl,K as Dg,N as th,W as iu,X as Cg,Y as Mg,Z as vl,_ as Pg,$ as nh,a0 as ou,a1 as Rg,a2 as Ig,a3 as Lg,a4 as Ug,a5 as Vg,a6 as bl,a7 as Fg,a8 as _l,a9 as rh,aa as Gg,ab as zg,ac as jg}from"./index-27578f8f.esm-CAmGDcI7.js";import{_ as bn}from"./extends-CCbyfPlC.js";import{a as Ng}from"./client-CzthVdz-.js";function wl(t,e,n){var r,i,o,a,s;e==null&&(e=100);function l(){var c=Date.now()-a;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,n||(s=t.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(l,e)),c&&(s=t.apply(o,i),o=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}wl.debounce=wl;var qg=wl;const Lc=Qt(qg);function Bg(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=R.useRef(!1);R.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,p]=R.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:_,width:w,height:E,bottom:S,right:x,x:A,y:H}=l.current.element.getBoundingClientRect(),V={left:b,top:_,width:w,height:E,bottom:S,right:x,x:A,y:H};l.current.element instanceof HTMLElement&&i&&(V.height=l.current.element.offsetHeight,V.width=l.current.element.offsetWidth),Object.freeze(V),f.current&&!Yg(l.current.lastBounds,V)&&s(l.current.lastBounds=V)};return[v,c?Lc(v,c):v,u?Lc(v,u):v]},[s,i,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})))}const m=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=ih(v),y())};return Wg(p,!!n),$g(h),R.useEffect(()=>{g(),y()},[n,p,h]),R.useEffect(()=>g,[]),[m,a,d]}function $g(t){R.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Wg(t,e){R.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function ih(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...ih(t.parentElement)]}const Hg=["x","y","top","bottom","left","right","width","height"],Yg=(t,e)=>Hg.every(n=>t[n]===e[n]);var Xg=Object.defineProperty,Kg=Object.defineProperties,Zg=Object.getOwnPropertyDescriptors,Uc=Object.getOwnPropertySymbols,Qg=Object.prototype.hasOwnProperty,Jg=Object.prototype.propertyIsEnumerable,Vc=(t,e,n)=>e in t?Xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fc=(t,e)=>{for(var n in e||(e={}))Qg.call(e,n)&&Vc(t,n,e[n]);if(Uc)for(var n of Uc(e))Jg.call(e,n)&&Vc(t,n,e[n]);return t},ey=(t,e)=>Kg(t,Zg(e));function oh(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=oh(r,e,n);if(i)return i;r=e?null:r.sibling}}function ah(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const au=ah(R.createContext(null));class sh extends R.Component{render(){return R.createElement(au.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Gc,ReactCurrentDispatcher:zc}=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ty(){const t=R.useContext(au);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const r of[Gc==null?void 0:Gc.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=oh(r,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function ny(){var t,e;const n=ty(),[r]=R.useState(()=>new Map);r.clear();let i=n;for(;i;){const o=(t=i.type)==null?void 0:t._context;o&&o!==au&&!r.has(o)&&r.set(o,(e=zc==null?void 0:zc.current)==null?void 0:e.readContext(ah(o))),i=i.return}return r}function ry(){const t=ny();return R.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>R.createElement(e,null,R.createElement(n.Provider,ey(Fc({},r),{value:t.get(n)}))),e=>R.createElement(sh,Fc({},e))),[t])}const Us={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function iy(t){const{handlePointer:e}=cg(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Us).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=t.getState();o.disconnect==null||o.disconnect(),i(a=>({events:{...a.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([a,s])=>{const[l,u]=Us[a];n.addEventListener(l,s,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[s]=Us[o];r.connected.removeEventListener(s,a)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}const oy=R.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:o,events:a=iy,eventSource:s,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:p,dpr:g,performance:y,raycaster:m,camera:v,onPointerMissed:b,onCreated:_,...w},E){R.useMemo(()=>Kd(Zd),[]);const S=ry(),[x,A]=Bg({scroll:!0,debounce:{scroll:50,resize:0},...r}),H=R.useRef(null),V=R.useRef(null);R.useImperativeHandle(E,()=>H.current);const O=rg(b),[G,q]=R.useState(!1),[Y,I]=R.useState(!1);if(G)throw G;if(Y)throw Y;const B=R.useRef(null);ig(()=>{const z=H.current;A.width>0&&A.height>0&&z&&(B.current||(B.current=og(z)),B.current.configure({gl:o,events:a,shadows:u,linear:c,flat:f,legacy:d,orthographic:h,frameloop:p,dpr:g,performance:y,raycaster:m,camera:v,size:A,onPointerMissed:(...j)=>O.current==null?void 0:O.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(s?ag(s)?s.current:s:V.current),l&&j.setEvents({compute:(U,k)=>{const M=U[l+"X"],T=U[l+"Y"];k.pointer.set(M/k.size.width*2-1,-(T/k.size.height)*2+1),k.raycaster.setFromCamera(k.pointer,k.camera)}}),_==null||_(j)}}),B.current.render(R.createElement(S,null,R.createElement(sg,{set:I},R.createElement(R.Suspense,{fallback:R.createElement(lg,{set:q})},e)))))}),R.useEffect(()=>{const z=H.current;if(z)return()=>ug(z)},[]);const F=s?"none":"auto";return R.createElement("div",bn({ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...i}},w),R.createElement("div",{ref:x,style:{width:"100%",height:"100%"}},R.createElement("canvas",{ref:H,style:{display:"block"}},n)))}),ay=R.forwardRef(function(e,n){return R.createElement(sh,null,R.createElement(oy,bn({},e,{ref:n})))});function sy(t){const e=+this._x.call(null,t);return lh(this.cover(e),e,t)}function lh(t,e,n){if(isNaN(e))return t;var r,i=t._root,o={data:n},a=t._x0,s=t._x1,l,u,c,f,d;if(!i)return t._root=o,t;for(;i.length;)if((c=e>=(l=(a+s)/2))?a=l:s=l,r=i,!(i=i[f=+c]))return r[f]=o,t;if(u=+t._x.call(null,i.data),e===u)return o.next=i,r?r[f]=o:t._root=o,t;do r=r?r[f]=new Array(2):t._root=new Array(2),(c=e>=(l=(a+s)/2))?a=l:s=l;while((f=+c)==(d=+(u>=l)));return r[d]=i,r[f]=o,t}function ly(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let r=1/0,i=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,t[o]))||(n[o]=a,a<r&&(r=a),a>i&&(i=a));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<e;++o)lh(this,n[o],t[o]);return this}function uy(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{for(var r=n-e||1,i=this._root,o,a;e>t||t>=n;)switch(a=+(t<e),o=new Array(2),o[a]=i,i=o,r*=2,a){case 0:n=e+r;break;case 1:e=n-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=n,this}function cy(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function fy(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Mn(t,e,n){this.node=t,this.x0=e,this.x1=n}function dy(t,e){var n,r=this._x0,i,o,a=this._x1,s=[],l=this._root,u,c;for(l&&s.push(new Mn(l,r,a)),e==null?e=1/0:(r=t-e,a=t+e);u=s.pop();)if(!(!(l=u.node)||(i=u.x0)>a||(o=u.x1)<r))if(l.length){var f=(i+o)/2;s.push(new Mn(l[1],f,o),new Mn(l[0],i,f)),(c=+(t>=f))&&(u=s[s.length-1],s[s.length-1]=s[s.length-1-c],s[s.length-1-c]=u)}else{var d=Math.abs(t-+this._x.call(null,l.data));d<e&&(e=d,r=t-d,a=t+d,n=l.data)}return n}function hy(t){if(isNaN(l=+this._x.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._x1,l,u,c,f,d;if(!n)return this;if(n.length)for(;;){if((c=l>=(u=(a+s)/2))?a=u:s=u,e=n,!(n=n[f=+c]))return this;if(!n.length)break;e[f+1&1]&&(r=e,d=f)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[f]=o:delete e[f],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(r?r[d]=n:this._root=n),this):(this._root=o,this)}function py(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function my(){return this._root}function gy(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function yy(t){var e=[],n,r=this._root,i,o,a;for(r&&e.push(new Mn(r,this._x0,this._x1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.x1)&&r.length){var s=(o+a)/2;(i=r[1])&&e.push(new Mn(i,s,a)),(i=r[0])&&e.push(new Mn(i,o,s))}return this}function vy(t){var e=[],n=[],r;for(this._root&&e.push(new Mn(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.x1,l=(a+s)/2;(o=i[0])&&e.push(new Mn(o,a,l)),(o=i[1])&&e.push(new Mn(o,l,s))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.x1);return this}function by(t){return t[0]}function _y(t){return arguments.length?(this._x=t,this):this._x}function su(t,e){var n=new lu(e??by,NaN,NaN);return t==null?n:n.addAll(t)}function lu(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function jc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Pt=su.prototype=lu.prototype;Pt.copy=function(){var t=new lu(this._x,this._x0,this._x1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=jc(e),t;for(n=[{source:e,target:t._root=new Array(2)}];e=n.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=jc(r));return t};Pt.add=sy;Pt.addAll=ly;Pt.cover=uy;Pt.data=cy;Pt.extent=fy;Pt.find=dy;Pt.remove=hy;Pt.removeAll=py;Pt.root=my;Pt.size=gy;Pt.visit=yy;Pt.visitAfter=vy;Pt.x=_y;function wy(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return uh(this.cover(e,n),e,n,t)}function uh(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,d,h,p,g,y,m,v;if(!o)return t._root=a,t;for(;o.length;)if((g=e>=(f=(s+u)/2))?s=f:u=f,(y=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[m=y<<1|g]))return i[m]=a,t;if(h=+t._x.call(null,o.data),p=+t._y.call(null,o.data),e===h&&n===p)return a.next=o,i?i[m]=a:t._root=a,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(g=e>=(f=(s+u)/2))?s=f:u=f,(y=n>=(d=(l+c)/2))?l=d:c=d;while((m=y<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[m]=a,t}function xy(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)uh(this,a[n],s[n],t[n]);return this}function Ey(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,l,u;n>t||t>=i||r>e||e>=o;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Ty(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Sy(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Ay(t,e,n){var r,i=this._x0,o=this._y0,a,s,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Tt(h,i,o,c,f)),n==null?n=1/0:(i=t-n,o=e-n,c=t+n,f=e+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(a=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var y=(a+l)/2,m=(s+u)/2;d.push(new Tt(h[3],y,m,l,u),new Tt(h[2],a,m,y,u),new Tt(h[1],y,s,l,m),new Tt(h[0],a,s,y,m)),(g=(e>=m)<<1|t>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=t-+this._x.call(null,h.data),b=e-+this._y.call(null,h.data),_=v*v+b*b;if(_<n){var w=Math.sqrt(n=_);i=t-w,o=e-w,c=t+w,f=e+w,r=h.data}}return r}function ky(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,y,m;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(a+l)/2))?a=d:l=d,(g=f>=(h=(s+u)/2))?s=h:u=h,e=n,!(n=n[y=g<<1|p]))return this;if(!n.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(r=e,m=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[y]=o:delete e[y],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function Oy(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Dy(){return this._root}function Cy(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function My(t){var e=[],n,r=this._root,i,o,a,s,l;for(r&&e.push(new Tt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&r.length){var u=(o+s)/2,c=(a+l)/2;(i=r[3])&&e.push(new Tt(i,u,c,s,l)),(i=r[2])&&e.push(new Tt(i,o,c,u,l)),(i=r[1])&&e.push(new Tt(i,u,a,s,c)),(i=r[0])&&e.push(new Tt(i,o,a,u,c))}return this}function Py(t){var e=[],n=[],r;for(this._root&&e.push(new Tt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.x1,u=r.y1,c=(a+l)/2,f=(s+u)/2;(o=i[0])&&e.push(new Tt(o,a,s,c,f)),(o=i[1])&&e.push(new Tt(o,c,s,l,f)),(o=i[2])&&e.push(new Tt(o,a,f,c,u)),(o=i[3])&&e.push(new Tt(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Ry(t){return t[0]}function Iy(t){return arguments.length?(this._x=t,this):this._x}function Ly(t){return t[1]}function Uy(t){return arguments.length?(this._y=t,this):this._y}function uu(t,e,n){var r=new cu(e??Ry,n??Ly,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function cu(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Nc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var St=uu.prototype=cu.prototype;St.copy=function(){var t=new cu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Nc(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Nc(r));return t};St.add=wy;St.addAll=xy;St.cover=Ey;St.data=Ty;St.extent=Sy;St.find=Ay;St.remove=ky;St.removeAll=Oy;St.root=Dy;St.size=Cy;St.visit=My;St.visitAfter=Py;St.x=Iy;St.y=Uy;function Vy(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return ch(this.cover(e,n,r),e,n,r,t)}function ch(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,a=t._root,s={data:i},l=t._x0,u=t._y0,c=t._z0,f=t._x1,d=t._y1,h=t._z1,p,g,y,m,v,b,_,w,E,S,x;if(!a)return t._root=s,t;for(;a.length;)if((_=e>=(p=(l+f)/2))?l=p:f=p,(w=n>=(g=(u+d)/2))?u=g:d=g,(E=r>=(y=(c+h)/2))?c=y:h=y,o=a,!(a=a[S=E<<2|w<<1|_]))return o[S]=s,t;if(m=+t._x.call(null,a.data),v=+t._y.call(null,a.data),b=+t._z.call(null,a.data),e===m&&n===v&&r===b)return s.next=a,o?o[S]=s:t._root=s,t;do o=o?o[S]=new Array(8):t._root=new Array(8),(_=e>=(p=(l+f)/2))?l=p:f=p,(w=n>=(g=(u+d)/2))?u=g:d=g,(E=r>=(y=(c+h)/2))?c=y:h=y;while((S=E<<2|w<<1|_)===(x=(b>=y)<<2|(v>=g)<<1|m>=p));return o[x]=a,o[S]=s,t}function Fy(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let o=1/0,a=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0;for(let f=0,d,h,p,g;f<e;++f)isNaN(h=+this._x.call(null,d=t[f]))||isNaN(p=+this._y.call(null,d))||isNaN(g=+this._z.call(null,d))||(n[f]=h,r[f]=p,i[f]=g,h<o&&(o=h),h>l&&(l=h),p<a&&(a=p),p>u&&(u=p),g<s&&(s=g),g>c&&(c=g));if(o>l||a>u||s>c)return this;this.cover(o,a,s).cover(l,u,c);for(let f=0;f<e;++f)ch(this,n[f],r[f],i[f],t[f]);return this}function Gy(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,l=this._z1;if(isNaN(r))a=(r=Math.floor(t))+1,s=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1;else{for(var u=a-r||1,c=this._root,f,d;r>t||t>=a||i>e||e>=s||o>n||n>=l;)switch(d=(n<o)<<2|(e<i)<<1|t<r,f=new Array(8),f[d]=c,c=f,u*=2,d){case 0:a=r+u,s=i+u,l=o+u;break;case 1:r=a-u,s=i+u,l=o+u;break;case 2:a=r+u,i=s-u,l=o+u;break;case 3:r=a-u,i=s-u,l=o+u;break;case 4:a=r+u,s=i+u,o=l-u;break;case 5:r=a-u,s=i+u,o=l-u;break;case 6:a=r+u,i=s-u,o=l-u;break;case 7:r=a-u,i=s-u,o=l-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this}function zy(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function jy(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Be(t,e,n,r,i,o,a){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}function Ny(t,e,n,r){var i,o=this._x0,a=this._y0,s=this._z0,l,u,c,f,d,h,p=this._x1,g=this._y1,y=this._z1,m=[],v=this._root,b,_;for(v&&m.push(new Be(v,o,a,s,p,g,y)),r==null?r=1/0:(o=t-r,a=e-r,s=n-r,p=t+r,g=e+r,y=n+r,r*=r);b=m.pop();)if(!(!(v=b.node)||(l=b.x0)>p||(u=b.y0)>g||(c=b.z0)>y||(f=b.x1)<o||(d=b.y1)<a||(h=b.z1)<s))if(v.length){var w=(l+f)/2,E=(u+d)/2,S=(c+h)/2;m.push(new Be(v[7],w,E,S,f,d,h),new Be(v[6],l,E,S,w,d,h),new Be(v[5],w,u,S,f,E,h),new Be(v[4],l,u,S,w,E,h),new Be(v[3],w,E,c,f,d,S),new Be(v[2],l,E,c,w,d,S),new Be(v[1],w,u,c,f,E,S),new Be(v[0],l,u,c,w,E,S)),(_=(n>=S)<<2|(e>=E)<<1|t>=w)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-_],m[m.length-1-_]=b)}else{var x=t-+this._x.call(null,v.data),A=e-+this._y.call(null,v.data),H=n-+this._z.call(null,v.data),V=x*x+A*A+H*H;if(V<r){var O=Math.sqrt(r=V);o=t-O,a=e-O,s=n-O,p=t+O,g=e+O,y=n+O,i=v.data}}return i}function qy(t){if(isNaN(d=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t))||isNaN(p=+this._z.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,l=this._z0,u=this._x1,c=this._y1,f=this._z1,d,h,p,g,y,m,v,b,_,w,E;if(!n)return this;if(n.length)for(;;){if((v=d>=(g=(a+u)/2))?a=g:u=g,(b=h>=(y=(s+c)/2))?s=y:c=y,(_=p>=(m=(l+f)/2))?l=m:f=m,e=n,!(n=n[w=_<<2|b<<1|v]))return this;if(!n.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(r=e,E=w)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[w]=o:delete e[w],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=o,this)}function By(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function $y(){return this._root}function Wy(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Hy(t){var e=[],n,r=this._root,i,o,a,s,l,u,c;for(r&&e.push(new Be(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.z0,l=n.x1,u=n.y1,c=n.z1)&&r.length){var f=(o+l)/2,d=(a+u)/2,h=(s+c)/2;(i=r[7])&&e.push(new Be(i,f,d,h,l,u,c)),(i=r[6])&&e.push(new Be(i,o,d,h,f,u,c)),(i=r[5])&&e.push(new Be(i,f,a,h,l,d,c)),(i=r[4])&&e.push(new Be(i,o,a,h,f,d,c)),(i=r[3])&&e.push(new Be(i,f,d,s,l,u,h)),(i=r[2])&&e.push(new Be(i,o,d,s,f,u,h)),(i=r[1])&&e.push(new Be(i,f,a,s,l,d,h)),(i=r[0])&&e.push(new Be(i,o,a,s,f,d,h))}return this}function Yy(t){var e=[],n=[],r;for(this._root&&e.push(new Be(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.z0,u=r.x1,c=r.y1,f=r.z1,d=(a+u)/2,h=(s+c)/2,p=(l+f)/2;(o=i[0])&&e.push(new Be(o,a,s,l,d,h,p)),(o=i[1])&&e.push(new Be(o,d,s,l,u,h,p)),(o=i[2])&&e.push(new Be(o,a,h,l,d,c,p)),(o=i[3])&&e.push(new Be(o,d,h,l,u,c,p)),(o=i[4])&&e.push(new Be(o,a,s,p,d,h,f)),(o=i[5])&&e.push(new Be(o,d,s,p,u,h,f)),(o=i[6])&&e.push(new Be(o,a,h,p,d,c,f)),(o=i[7])&&e.push(new Be(o,d,h,p,u,c,f))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function Xy(t){return t[0]}function Ky(t){return arguments.length?(this._x=t,this):this._x}function Zy(t){return t[1]}function Qy(t){return arguments.length?(this._y=t,this):this._y}function Jy(t){return t[2]}function ev(t){return arguments.length?(this._z=t,this):this._z}function fu(t,e,n,r){var i=new du(e??Xy,n??Zy,r??Jy,NaN,NaN,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function du(t,e,n,r,i,o,a,s,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this._root=void 0}function qc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var _t=fu.prototype=du.prototype;_t.copy=function(){var t=new du(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=qc(e),t;for(n=[{source:e,target:t._root=new Array(8)}];e=n.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=qc(r));return t};_t.add=Vy;_t.addAll=Fy;_t.cover=Gy;_t.data=zy;_t.extent=jy;_t.find=Ny;_t.remove=qy;_t.removeAll=By;_t.root=$y;_t.size=Wy;_t.visit=Hy;_t.visitAfter=Yy;_t.x=Ky;_t.y=Qy;_t.z=ev;function Qe(t){return function(){return t}}function Bt(t){return(t()-.5)*1e-6}function Vs(t){return t.x+t.vx}function Bc(t){return t.y+t.vy}function tv(t){return t.z+t.vz}function fh(t){var e,n,r,i,o=1,a=1;typeof t!="function"&&(t=Qe(t==null?1:+t));function s(){for(var c,f=e.length,d,h,p,g,y,m,v,b=0;b<a;++b)for(d=(n===1?su(e,Vs):n===2?uu(e,Vs,Bc):n===3?fu(e,Vs,Bc,tv):null).visitAfter(l),c=0;c<f;++c)h=e[c],m=r[h.index],v=m*m,p=h.x+h.vx,n>1&&(g=h.y+h.vy),n>2&&(y=h.z+h.vz),d.visit(_);function _(w,E,S,x,A,H,V){var O=[E,S,x,A,H,V],G=O[0],q=O[1],Y=O[2],I=O[n],B=O[n+1],F=O[n+2],z=w.data,j=w.r,U=m+j;if(z){if(z.index>h.index){var k=p-z.x-z.vx,M=n>1?g-z.y-z.vy:0,T=n>2?y-z.z-z.vz:0,P=k*k+M*M+T*T;P<U*U&&(k===0&&(k=Bt(i),P+=k*k),n>1&&M===0&&(M=Bt(i),P+=M*M),n>2&&T===0&&(T=Bt(i),P+=T*T),P=(U-(P=Math.sqrt(P)))/P*o,h.vx+=(k*=P)*(U=(j*=j)/(v+j)),n>1&&(h.vy+=(M*=P)*U),n>2&&(h.vz+=(T*=P)*U),z.vx-=k*(U=1-U),n>1&&(z.vy-=M*U),n>2&&(z.vz-=T*U))}return}return G>p+U||I<p-U||n>1&&(q>g+U||B<g-U)||n>2&&(Y>y+U||F<y-U)}}function l(c){if(c.data)return c.r=r[c.data.index];for(var f=c.r=0;f<Math.pow(2,n);++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(e){var c,f=e.length,d;for(r=new Array(f),c=0;c<f;++c)d=e[c],r[d.index]=+t(d,c,e)}}return s.initialize=function(c,...f){e=c,i=f.find(d=>typeof d=="function")||Math.random,n=f.find(d=>[1,2,3].includes(d))||2,u()},s.iterations=function(c){return arguments.length?(a=+c,s):a},s.strength=function(c){return arguments.length?(o=+c,s):o},s.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Qe(+c),u(),s):t},s}function nv(t){return t.index}function $c(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function dh(t){var e=nv,n=d,r,i=Qe(30),o,a,s,l,u,c,f=1;t==null&&(t=[]);function d(m){return 1/Math.min(l[m.source.index],l[m.target.index])}function h(m){for(var v=0,b=t.length;v<f;++v)for(var _=0,w,E,S,x=0,A=0,H=0,V,O;_<b;++_)w=t[_],E=w.source,S=w.target,x=S.x+S.vx-E.x-E.vx||Bt(c),s>1&&(A=S.y+S.vy-E.y-E.vy||Bt(c)),s>2&&(H=S.z+S.vz-E.z-E.vz||Bt(c)),V=Math.sqrt(x*x+A*A+H*H),V=(V-o[_])/V*m*r[_],x*=V,A*=V,H*=V,S.vx-=x*(O=u[_]),s>1&&(S.vy-=A*O),s>2&&(S.vz-=H*O),E.vx+=x*(O=1-O),s>1&&(E.vy+=A*O),s>2&&(E.vz+=H*O)}function p(){if(a){var m,v=a.length,b=t.length,_=new Map(a.map((E,S)=>[e(E,S,a),E])),w;for(m=0,l=new Array(v);m<b;++m)w=t[m],w.index=m,typeof w.source!="object"&&(w.source=$c(_,w.source)),typeof w.target!="object"&&(w.target=$c(_,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(m=0,u=new Array(b);m<b;++m)w=t[m],u[m]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);r=new Array(b),g(),o=new Array(b),y()}}function g(){if(a)for(var m=0,v=t.length;m<v;++m)r[m]=+n(t[m],m,t)}function y(){if(a)for(var m=0,v=t.length;m<v;++m)o[m]=+i(t[m],m,t)}return h.initialize=function(m,...v){a=m,c=v.find(b=>typeof b=="function")||Math.random,s=v.find(b=>[1,2,3].includes(b))||2,p()},h.links=function(m){return arguments.length?(t=m,p(),h):t},h.id=function(m){return arguments.length?(e=m,h):e},h.iterations=function(m){return arguments.length?(f=+m,h):f},h.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Qe(+m),g(),h):n},h.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Qe(+m),y(),h):i},h}var rv={value:()=>{}};function hh(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ra(n)}function ra(t){this._=t}function iv(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ra.prototype=hh.prototype={constructor:ra,on:function(t,e){var n=this._,r=iv(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=ov(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Wc(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Wc(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ra(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function ov(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Wc(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=rv,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Vr=0,Ui=0,ui=0,ph=1e3,ca,Vi,fa=0,dr=0,$a=0,Hi=typeof performance=="object"&&performance.now?performance:Date,mh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gh(){return dr||(mh(av),dr=Hi.now()+$a)}function av(){dr=0}function xl(){this._call=this._time=this._next=null}xl.prototype=yh.prototype={constructor:xl,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?gh():+n)+(e==null?0:+e),!this._next&&Vi!==this&&(Vi?Vi._next=this:ca=this,Vi=this),this._call=t,this._time=n,El()},stop:function(){this._call&&(this._call=null,this._time=1/0,El())}};function yh(t,e,n){var r=new xl;return r.restart(t,e,n),r}function sv(){gh(),++Vr;for(var t=ca,e;t;)(e=dr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vr}function Hc(){dr=(fa=Hi.now())+$a,Vr=Ui=0;try{sv()}finally{Vr=0,uv(),dr=0}}function lv(){var t=Hi.now(),e=t-fa;e>ph&&($a-=e,fa=t)}function uv(){for(var t,e=ca,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ca=n);Vi=t,El(r)}function El(t){if(!Vr){Ui&&(Ui=clearTimeout(Ui));var e=t-dr;e>24?(t<1/0&&(Ui=setTimeout(Hc,t-Hi.now()-$a)),ui&&(ui=clearInterval(ui))):(ui||(fa=Hi.now(),ui=setInterval(lv,ph)),Vr=1,mh(Hc))}}const cv=1664525,fv=1013904223,Yc=4294967296;function dv(){let t=1;return()=>(t=(cv*t+fv)%Yc)/Yc}var Xc=3;function Fs(t){return t.x}function Kc(t){return t.y}function hv(t){return t.z}var pv=10,mv=Math.PI*(3-Math.sqrt(5)),gv=Math.PI*20/(9+Math.sqrt(221));function vh(t,e){e=e||2;var n=Math.min(Xc,Math.max(1,Math.round(e))),r,i=1,o=.001,a=1-Math.pow(o,1/300),s=0,l=.6,u=new Map,c=yh(h),f=hh("tick","end"),d=dv();t==null&&(t=[]);function h(){p(),f.call("tick",r),i<o&&(c.stop(),f.call("end",r))}function p(m){var v,b=t.length,_;m===void 0&&(m=1);for(var w=0;w<m;++w)for(i+=(s-i)*a,u.forEach(function(E){E(i)}),v=0;v<b;++v)_=t[v],_.fx==null?_.x+=_.vx*=l:(_.x=_.fx,_.vx=0),n>1&&(_.fy==null?_.y+=_.vy*=l:(_.y=_.fy,_.vy=0)),n>2&&(_.fz==null?_.z+=_.vz*=l:(_.z=_.fz,_.vz=0));return r}function g(){for(var m=0,v=t.length,b;m<v;++m){if(b=t[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),b.fz!=null&&(b.z=b.fz),isNaN(b.x)||n>1&&isNaN(b.y)||n>2&&isNaN(b.z)){var _=pv*(n>2?Math.cbrt(.5+m):n>1?Math.sqrt(.5+m):m),w=m*mv,E=m*gv;n===1?b.x=_:n===2?(b.x=_*Math.cos(w),b.y=_*Math.sin(w)):(b.x=_*Math.sin(w)*Math.cos(E),b.y=_*Math.cos(w),b.z=_*Math.sin(w)*Math.sin(E))}(isNaN(b.vx)||n>1&&isNaN(b.vy)||n>2&&isNaN(b.vz))&&(b.vx=0,n>1&&(b.vy=0),n>2&&(b.vz=0))}}function y(m){return m.initialize&&m.initialize(t,d,n),m}return g(),r={tick:p,restart:function(){return c.restart(h),r},stop:function(){return c.stop(),r},numDimensions:function(m){return arguments.length?(n=Math.min(Xc,Math.max(1,Math.round(m))),u.forEach(y),r):n},nodes:function(m){return arguments.length?(t=m,g(),u.forEach(y),r):t},alpha:function(m){return arguments.length?(i=+m,r):i},alphaMin:function(m){return arguments.length?(o=+m,r):o},alphaDecay:function(m){return arguments.length?(a=+m,r):+a},alphaTarget:function(m){return arguments.length?(s=+m,r):s},velocityDecay:function(m){return arguments.length?(l=1-m,r):1-l},randomSource:function(m){return arguments.length?(d=m,u.forEach(y),r):d},force:function(m,v){return arguments.length>1?(v==null?u.delete(m):u.set(m,y(v)),r):u.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),v=m.shift()||0,b=(n>1?m.shift():null)||0,_=(n>2?m.shift():null)||0,w=m.shift()||1/0,E=0,S=t.length,x,A,H,V,O,G;for(w*=w,E=0;E<S;++E)O=t[E],x=v-O.x,A=b-(O.y||0),H=_-(O.z||0),V=x*x+A*A+H*H,V<w&&(G=O,w=V);return G},on:function(m,v){return arguments.length>1?(f.on(m,v),r):f.on(m)}}}function bh(){var t,e,n,r,i,o=Qe(-30),a,s=1,l=1/0,u=.81;function c(p){var g,y=t.length,m=(e===1?su(t,Fs):e===2?uu(t,Fs,Kc):e===3?fu(t,Fs,Kc,hv):null).visitAfter(d);for(i=p,g=0;g<y;++g)n=t[g],m.visit(h)}function f(){if(t){var p,g=t.length,y;for(a=new Array(g),p=0;p<g;++p)y=t[p],a[y.index]=+o(y,p,t)}}function d(p){var g=0,y,m,v=0,b,_,w,E,S=p.length;if(S){for(b=_=w=E=0;E<S;++E)(y=p[E])&&(m=Math.abs(y.value))&&(g+=y.value,v+=m,b+=m*(y.x||0),_+=m*(y.y||0),w+=m*(y.z||0));g*=Math.sqrt(4/S),p.x=b/v,e>1&&(p.y=_/v),e>2&&(p.z=w/v)}else{y=p,y.x=y.data.x,e>1&&(y.y=y.data.y),e>2&&(y.z=y.data.z);do g+=a[y.data.index];while(y=y.next)}p.value=g}function h(p,g,y,m,v){if(!p.value)return!0;var b=[y,m,v][e-1],_=p.x-n.x,w=e>1?p.y-n.y:0,E=e>2?p.z-n.z:0,S=b-g,x=_*_+w*w+E*E;if(S*S/u<x)return x<l&&(_===0&&(_=Bt(r),x+=_*_),e>1&&w===0&&(w=Bt(r),x+=w*w),e>2&&E===0&&(E=Bt(r),x+=E*E),x<s&&(x=Math.sqrt(s*x)),n.vx+=_*p.value*i/x,e>1&&(n.vy+=w*p.value*i/x),e>2&&(n.vz+=E*p.value*i/x)),!0;if(p.length||x>=l)return;(p.data!==n||p.next)&&(_===0&&(_=Bt(r),x+=_*_),e>1&&w===0&&(w=Bt(r),x+=w*w),e>2&&E===0&&(E=Bt(r),x+=E*E),x<s&&(x=Math.sqrt(s*x)));do p.data!==n&&(S=a[p.data.index]*i/x,n.vx+=_*S,e>1&&(n.vy+=w*S),e>2&&(n.vz+=E*S));while(p=p.next)}return c.initialize=function(p,...g){t=p,r=g.find(y=>typeof y=="function")||Math.random,e=g.find(y=>[1,2,3].includes(y))||2,f()},c.strength=function(p){return arguments.length?(o=typeof p=="function"?p:Qe(+p),f(),c):o},c.distanceMin=function(p){return arguments.length?(s=p*p,c):Math.sqrt(s)},c.distanceMax=function(p){return arguments.length?(l=p*p,c):Math.sqrt(l)},c.theta=function(p){return arguments.length?(u=p*p,c):Math.sqrt(u)},c}function yv(t,e,n,r){var i,o,a=Qe(.1),s,l;typeof t!="function"&&(t=Qe(+t)),e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function u(f){for(var d=0,h=i.length;d<h;++d){var p=i[d],g=p.x-e||1e-6,y=(p.y||0)-n||1e-6,m=(p.z||0)-r||1e-6,v=Math.sqrt(g*g+y*y+m*m),b=(l[d]-v)*s[d]*f/v;p.vx+=g*b,o>1&&(p.vy+=y*b),o>2&&(p.vz+=m*b)}}function c(){if(i){var f,d=i.length;for(s=new Array(d),l=new Array(d),f=0;f<d;++f)l[f]=+t(i[f],f,i),s[f]=isNaN(l[f])?0:+a(i[f],f,i)}}return u.initialize=function(f,...d){i=f,o=d.find(h=>[1,2,3].includes(h))||2,c()},u.strength=function(f){return arguments.length?(a=typeof f=="function"?f:Qe(+f),c(),u):a},u.radius=function(f){return arguments.length?(t=typeof f=="function"?f:Qe(+f),c(),u):t},u.x=function(f){return arguments.length?(e=+f,u):e},u.y=function(f){return arguments.length?(n=+f,u):n},u.z=function(f){return arguments.length?(r=+f,u):r},u}function Tl(t){var e=Qe(.1),n,r,i;typeof t!="function"&&(t=Qe(t==null?0:+t));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Qe(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:Qe(+s),a(),o):t},o}function Sl(t){var e=Qe(.1),n,r,i;typeof t!="function"&&(t=Qe(t==null?0:+t));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Qe(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:Qe(+s),a(),o):t},o}function vv(t){var e=Qe(.1),n,r,i;typeof t!="function"&&(t=Qe(t==null?0:+t));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vz+=(i[l]-c.z)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Qe(+s),a(),o):e},o.z=function(s){return arguments.length?(t=typeof s=="function"?s:Qe(+s),a(),o):t},o}function _h(t,e=[]){const n=e.length;for(const r of t){const i=e.indexOf(r);if(i>-1){const o=[...e.slice(i),r].map(a=>a.data.id);throw new Error(`Invalid Graph: Circular node path detected: ${o.join(" -> ")}.`)}n>r.depth&&(r.depth=n,_h(r.out,[...e,r]))}}function wh(t,e){let n=!1;const r=t.reduce((a,s)=>({...a,[s.id]:{data:s,out:[],depth:-1,ins:[]}}),{});try{for(const a of e){const s=a.source,l=a.target;if(!r.hasOwnProperty(s))throw new Error(`Missing source Node ${s}`);if(!r.hasOwnProperty(l))throw new Error(`Missing target Node ${l}`);const u=r[s],c=r[l];c.ins.push(u),u.out.push(c)}_h(Object.values(r))}catch{n=!0}const i=Object.keys(r).map(a=>r[a].depth),o=Math.max(...i);return{invalid:n,depths:r,maxDepth:o||1}}const Zc=["radialin","radialout"];function bv({nodes:t,edges:e,mode:n="lr",nodeLevelRatio:r=2}){const{depths:i,maxDepth:o,invalid:a}=wh(t,e);if(a)return null;const s=Zc.includes(n)?1:5,l=t.length/o*r*s;if(n){const u=(h,p)=>g=>h?(i[g.id].depth-o/2)*l*(p?-1:1):void 0,c=u(["lr","rl"].includes(n),n==="rl"),f=u(["td","bu"].includes(n),n==="td"),d=u(["zin","zout"].includes(n),n==="zout");t.forEach(h=>{h.fx=c(h),h.fy=f(h),h.fz=d(h)})}return Zc.includes(n)?yv(u=>{const c=i[u.id];return(n==="radialin"?o-c.depth:c.depth)*l}).strength(1):null}function _v(t){return new Promise((e,n)=>{let r;function i(){r?e(r):(r=t.step(),i())}i()})}function so(t){const e=[],n=[];return t.forEachNode((r,i)=>{e.push({...i,id:r,radius:i.size||1})}),t.forEachEdge((r,i)=>{n.push({...i,id:r})}),{nodes:e,edges:n}}function wv(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function xv(){return this.eachAfter(wv)}function Ev(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Tv(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Sv(t,e){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Av(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function kv(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Ov(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Dv(t){for(var e=this,n=Cv(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Cv(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Mv(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Pv(){return Array.from(this)}function Rv(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Iv(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Lv(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Wa(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Fv)):e===void 0&&(e=Vv);for(var n=new Fr(t),r,i=[n],o,a,s,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new Fr(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(xh)}function Uv(){return Wa(this).eachBefore(Gv)}function Vv(t){return t.children}function Fv(t){return Array.isArray(t)?t[1]:null}function Gv(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function xh(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fr(t){this.data=t,this.depth=this.height=0,this.parent=null}Fr.prototype=Wa.prototype={constructor:Fr,count:xv,each:Ev,eachAfter:Sv,eachBefore:Tv,find:Av,sum:kv,sort:Ov,path:Dv,ancestors:Mv,descendants:Pv,leaves:Rv,links:Iv,copy:Uv,[Symbol.iterator]:Lv};function Gs(t){return t==null?null:Eh(t)}function Eh(t){if(typeof t!="function")throw new Error;return t}function ci(){return 0}function fi(t){return function(){return t}}function zv(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function jv(t,e,n,r,i){for(var o=t.children,a,s=-1,l=o.length,u=t.value&&(r-e)/t.value;++s<l;)a=o[s],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}var Nv={depth:-1},Qc={},zs={};function qv(t){return t.id}function Bv(t){return t.parentId}function $v(){var t=qv,e=Bv,n;function r(i){var o=Array.from(i),a=t,s=e,l,u,c,f,d,h,p,g,y=new Map;if(n!=null){const m=o.map((_,w)=>Wv(n(_,w,i))),v=m.map(Jc),b=new Set(m).add("");for(const _ of v)b.has(_)||(b.add(_),m.push(_),v.push(Jc(_)),o.push(zs));a=(_,w)=>m[w],s=(_,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new Fr(u),(p=a(u,c,i))!=null&&(p+="")&&(g=h.id=p,y.set(g,y.has(g)?Qc:h)),(p=s(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=o[c],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===Qc)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===zs&&f.children.length===1;)f=f.children[0],--l;for(let m=o.length-1;m>=0&&(h=o[m],h.data===zs);--m)h.data=null}if(f.parent=Nv,f.eachBefore(function(m){m.depth=m.parent.depth+1,--l}).eachBefore(xh),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=Gs(i),r):t},r.parentId=function(i){return arguments.length?(e=Gs(i),r):e},r.path=function(i){return arguments.length?(n=Gs(i),r):n},r}function Wv(t){t=`${t}`;let e=t.length;return Al(t,e-1)&&!Al(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Jc(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Al(t,e););return t.slice(0,e)}function Al(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function Hv(t,e){return t.parent===e.parent?1:2}function js(t){var e=t.children;return e?e[0]:t.t}function Ns(t){var e=t.children;return e?e[e.length-1]:t.t}function Yv(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Xv(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Kv(t,e,n){return t.a.parent===e.parent?t.a:n}function ia(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}ia.prototype=Object.create(Fr.prototype);function Zv(t){for(var e=new ia(t,0),n,r=[e],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new ia(o[a],a)),i.parent=n;return(e.parent=new ia(null,0)).children=[e],e}function Qv(){var t=Hv,e=1,n=1,r=null;function i(u){var c=Zv(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:t(f,d)/2,g=p-f.x,y=e/(d.x+p+g),m=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*y,v.y=v.depth*m})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){Xv(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+t(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+t(u._,d._));u.parent.A=s(u,d,u.parent.A||f[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],y=d.m,m=h.m,v=p.m,b=g.m,_;p=Ns(p),d=js(d),p&&d;)g=js(g),h=Ns(h),h.a=u,_=p.z+v-d.z-y+t(p._,d._),_>0&&(Yv(Kv(p,u,f),u,_),y+=_,m+=_),v+=p.m,y+=d.m,b+=g.m,m+=h.m;p&&!Ns(h)&&(h.t=p,h.m+=v-m),d&&!js(g)&&(g.t=d,g.m+=y-b,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function Jv(t,e,n,r,i){for(var o=t.children,a,s=-1,l=o.length,u=t.value&&(i-n)/t.value;++s<l;)a=o[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var e0=(1+Math.sqrt(5))/2;function t0(t,e,n,r,i,o){for(var a=[],s=e.children,l,u,c=0,f=0,d=s.length,h,p,g=e.value,y,m,v,b,_,w,E;c<d;){h=i-n,p=o-r;do y=s[f++].value;while(!y&&f<d);for(m=v=y,w=Math.max(p/h,h/p)/(g*t),E=y*y*w,_=Math.max(v/E,E/m);f<d;++f){if(y+=u=s[f].value,u<m&&(m=u),u>v&&(v=u),E=y*y*w,b=Math.max(v/E,E/m),b>_){y-=u;break}_=b}a.push(l={value:y,dice:h<p,children:s.slice(c,f)}),l.dice?jv(l,n,r,i,g?r+=p*y/g:o):Jv(l,n,r,g?n+=h*y/g:i,o),g-=y,c=f}return a}const n0=function t(e){function n(r,i,o,a,s){t0(e,r,i,o,a,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(e0);function r0(){var t=n0,e=!1,n=1,r=1,i=[0],o=ci,a=ci,s=ci,l=ci,u=ci;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(zv),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,y=d.x1-h,m=d.y1-h;y<p&&(p=y=(p+y)/2),m<g&&(g=m=(g+m)/2),d.x0=p,d.y0=g,d.x1=y,d.y1=m,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,g+=a(d)-h,y-=s(d)-h,m-=l(d)-h,y<p&&(p=y=(p+y)/2),m<g&&(g=m=(g+m)/2),t(d,p,g,y,m))}return c.round=function(d){return arguments.length?(e=!!d,c):e},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(t=Eh(d),c):t},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:fi(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:fi(+d),c):a},c.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:fi(+d),c):s},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:fi(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:fi(+d),c):u},c}function i0(){const t=I=>()=>I;let n=I=>I.index,r=[],i=[],o,a=[100,100],s=t(1),l=t(-1),u=t(100),c=t(.1),f={},d=.1,h=.001,p=[],g=[0,0],y,m=I=>I.cluster,v="treemap",b=!0,_=.1;function w(I){if(!b)return w;v==="force"&&(y.tick(),O());for(let B=0,F=r.length,z,j=I*_;B<F;++B)z=r[B],z.vx+=(f[m(z)].x-z.x)*j,z.vy+=(f[m(z)].y-z.y)*j}function E(){r&&(v==="treemap"?G():Y())}w.initialize=function(I){r=I,E()};function S(I){let B=m(I.source),F=m(I.target);return B<=F?B+"~"+F:F+"~"+B}function x(I){let B=new Map,F={};return I.forEach(function(z){B.has(m(z))||B.set(m(z),{count:0,sumforceNodeSize:0})}),I.forEach(function(z){F=B.get(m(z)),F.count=F.count+1,F.sumforceNodeSize=F.sumforceNodeSize+Math.PI*(s(z)*s(z))*1.3,B.set(m(z),F)}),B}function A(I){let B=new Map,F=[];return I.forEach(function(z){let j=S(z),U;B.has(j)?U=B.get(j):U=0,U+=1,B.set(j,U)}),B.forEach(function(z,j){let U,k;U=j.split("~")[0],k=j.split("~")[1],U!==void 0&&k!==void 0&&F.push({source:U,target:k,count:z})}),F}function H(){let I=[],B=[],F=new Map,z,j,U,k,M;k=x(r),M=A(i);for(z of k.keys())U=k.get(z),I.push({id:z,size:U.count,r:Math.sqrt(U.sumforceNodeSize/Math.PI)}),F.set(z,j);return M.forEach(function(T){let P=F.get(T.source),$=F.get(T.target);P!==void 0&&$!==void 0&&B.push({source:P,target:$,count:T.count})}),{nodes:I,links:B}}function V(){let I=[],B,F,z;z=x(w.nodes());for(B of z.keys())F=z.get(B),I.push({id:B,size:F.count});return{id:"clustersTree",children:I}}function O(){return f.none={x:0,y:0},p.forEach(function(I){v==="treemap"?f[I.data.id]={x:I.x0+(I.x1-I.x0)/2-g[0],y:I.y0+(I.y1-I.y0)/2-g[1]}:f[I.id]={x:I.x-g[0],y:I.y-g[1]}}),f}function G(){let I=r0().size(w.size());o=Wa(V()).sum(B=>B.radius).sort(function(B,F){return F.height-B.height||F.value-B.value}),p=I(o).leaves(),O()}function q(){let I=0;r.length!==0&&i.forEach(function(B){let F,z;if(r){if(F=B.source,z=B.target,typeof B.source!="object"&&(F=r.find(j=>j.id===B.source)),typeof B.target!="object"&&(z=r.find(j=>j.id===B.target)),F===void 0||z===void 0)throw Error("Error setting links, couldnt find nodes for a link (see it on the console)");B.source=F,B.target=z,B.index=I++}})}function Y(){let I;!r||!r.length||(q(),I=H(),y=vh(I.nodes).force("x",Tl(a[0]/2).strength(.1)).force("y",Sl(a[1]/2).strength(.1)).force("collide",fh(B=>B.r).iterations(4)).force("charge",bh().strength(l)).force("links",dh(I.nodes.length?I.links:[]).distance(u).strength(c)),p=y.nodes(),O())}return w.template=function(I){return arguments.length?(v=I,E(),w):v},w.groupBy=function(I){return arguments.length?typeof I=="string"?(m=function(B){return B[I]},w):(m=I,w):m},w.enableGrouping=function(I){return arguments.length?(b=I,w):b},w.strength=function(I){return arguments.length?(_=I,w):_},w.getLinkStrength=function(I){return b?m(I.source)===m(I.target)?typeof d=="function"?d(I):d:typeof h=="function"?h(I):h:typeof d=="function"?d(I):d},w.id=function(I){return arguments.length?(n=I,w):n},w.size=function(I){return arguments.length?(a=I,w):a},w.linkStrengthInterCluster=function(I){return arguments.length?(h=I,w):h},w.linkStrengthIntraCluster=function(I){return arguments.length?(d=I,w):d},w.nodes=function(I){return arguments.length?(r=I,w):r},w.links=function(I){return arguments.length?(I===null?i=[]:i=I,E(),w):i},w.template=function(I){return arguments.length?(v=I,E(),w):v},w.forceNodeSize=function(I){return arguments.length?(s=typeof I=="function"?I:t(+I),E(),w):s},w.nodeSize=w.forceNodeSize,w.forceCharge=function(I){return arguments.length?(l=typeof I=="function"?I:t(+I),E(),w):l},w.forceLinkDistance=function(I){return arguments.length?(u=typeof I=="function"?I:t(+I),E(),w):u},w.forceLinkStrength=function(I){return arguments.length?(c=typeof I=="function"?I:t(+I),E(),w):c},w.offset=function(I){return arguments.length?(g=typeof I=="function"?I:t(+I),w):g},w.getFocis=O,w}function zn({graph:t,nodeLevelRatio:e=2,mode:n=null,dimensions:r=2,nodeStrength:i=-250,linkDistance:o=50,clusterStrength:a=.5,linkStrengthInterCluster:s=.01,linkStrengthIntraCluster:l=.5,forceLinkDistance:u=100,forceLinkStrength:c=.1,clusterType:f="force",forceCharge:d=-700,getNodePosition:h,drags:p,clusterAttribute:g,forceLayout:y}){const{nodes:m,edges:v}=so(t),_=r===2&&v.length>25?i*2:i;let w,E;y==="forceDirected2d"?(w=Tl(),E=Sl()):(w=Tl(600).strength(.05),E=Sl(600).strength(.05));const S=vh().force("link",dh()).force("charge",bh().strength(_)).force("x",w).force("y",E).force("z",vv()).force("collide",fh(V=>V.radius+10)).force("dagRadial",bv({nodes:m,edges:v,mode:n,nodeLevelRatio:e})).stop();let x;if(g){let V=d;if(m!=null&&m.length){const O=Math.ceil(m.length/200);V=d*O}x=i0().strength(a).template(f).groupBy(O=>O.data[g]).links(v).size([100,100]).linkStrengthInterCluster(s).linkStrengthIntraCluster(l).forceLinkDistance(u).forceLinkStrength(c).forceCharge(V).forceNodeSize(O=>O.radius)}let A=S.numDimensions(r).nodes(m);if(x&&(A=A.force("group",x)),o){let V=A.force("link");V&&(V.id(O=>O.id).links(v).distance(o),x&&(V=V.strength((x==null?void 0:x.getLinkStrength)??.1)))}const H=new Map(m.map(V=>[V.id,V]));return{step(){for(;S.alpha()>.01;)S.tick();return!0},getNodePosition(V){var O,G;if(h){const q=h(V,{graph:t,drags:p,nodes:m,edges:v});if(q)return q}return(O=p==null?void 0:p[V])!=null&&O.position?(G=p==null?void 0:p[V])==null?void 0:G.position:H.get(V)}}}function o0(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function Th(t,e){t=t||{};var n={};for(var r in e){var i=t[r],o=e[r];if(!o0(o)){n[r]=Th(i,o);continue}i===void 0?n[r]=o:n[r]=i}return n}var hu=Th,Kn=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},a0=hu,s0=Kn,l0={dimensions:["x","y"],center:.5,scale:1};function Sh(t,e,n){if(!s0(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");n=a0(n,l0);var r=n.dimensions;if(!Array.isArray(r)||r.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=n.center,o=n.scale,a=Math.PI*2,s=(i-.5)*o,l=e.order,u=r[0],c=r[1];function f(p,g){return g[u]=o*Math.cos(p*a/l)+s,g[c]=o*Math.sin(p*a/l)+s,g}var d=0;if(!t){var h={};return e.forEachNode(function(p){h[p]=f(d++,{})}),h}e.updateEachNodeAttributes(function(p,g){return f(d++,g),g},{attributes:r})}var Ah=Sh.bind(null,!1);Ah.assign=Sh.bind(null,!0);var u0=Ah;const c0=Qt(u0);function f0({graph:t,radius:e,drags:n,getNodePosition:r}){const i=c0(t,{scale:e}),{nodes:o,edges:a}=so(t);return{step(){return!0},getNodePosition(s){var l,u;if(r){const c=r(s,{graph:t,drags:n,nodes:o,edges:a});if(c)return c}return(l=n==null?void 0:n[s])!=null&&l.position?(u=n==null?void 0:n[s])==null?void 0:u.position:i==null?void 0:i[s]}}}const d0={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function ef({graph:t,drags:e,mode:n="td",nodeSeparation:r=1,nodeSize:i=[50,50],getNodePosition:o}){const{nodes:a,edges:s}=so(t),{depths:l}=wh(a,s),u=Object.keys(l).map(g=>l[g]),c=$v().id(g=>g.data.id).parentId(g=>{var y,m,v;return(v=(m=(y=g.ins)==null?void 0:y[0])==null?void 0:m.data)==null?void 0:v.id})(u),d=Qv().separation(()=>r).nodeSize(i)(Wa(c)).descendants(),h=d0[n],p=new Map(a.map(g=>{const{x:y,y:m}=d.find(v=>v.data.id===g.id);return[g.id,{...g,[h.x]:y*h.factor,[h.y]:m*h.factor,z:0}]}));return{step(){return!0},getNodePosition(g){var y,m;if(o){const v=o(g,{graph:t,drags:e,nodes:a,edges:s});if(v)return v}return(y=e==null?void 0:e[g])!=null&&y.position?(m=e==null?void 0:e[g])==null?void 0:m.position:p.get(g)}}}var di=0,hi=1,Uo=2,pi=3;function h0(t,e){return t+""+e}function tf(){return .01*(.5-Math.random())}var p0=function(e,n){var r=e.margin,i=e.ratio,o=e.expansion,a=e.gridSize,s=e.speed,l,u,c,f,d,h,p=!0,g=n.length,y=g/pi|0,m=new Float32Array(y),v=new Float32Array(y),b=1/0,_=1/0,w=-1/0,E=-1/0;for(l=0;l<g;l+=pi)c=n[l+di],f=n[l+hi],h=n[l+Uo]*i+r,b=Math.min(b,c-h),w=Math.max(w,c+h),_=Math.min(_,f-h),E=Math.max(E,f+h);var S=w-b,x=E-_,A=(b+w)/2,H=(_+E)/2;b=A-o*S/2,w=A+o*S/2,_=H-o*x/2,E=H+o*x/2;var V=new Array(a*a),O=V.length,G;for(G=0;G<O;G++)V[G]=[];var q,Y,I,B,F,z,j,U,k,M;for(l=0;l<g;l+=pi)for(c=n[l+di],f=n[l+hi],h=n[l+Uo]*i+r,q=c-h,Y=c+h,I=f-h,B=f+h,F=Math.floor(a*(q-b)/(w-b)),z=Math.floor(a*(Y-b)/(w-b)),j=Math.floor(a*(I-_)/(E-_)),U=Math.floor(a*(B-_)/(E-_)),k=F;k<=z;k++)for(M=j;M<=U;M++)V[k*a+M].push(l);var T,P=new Set,$,C,W,te,Q,X,N,ie,ne,Z,L,D,K;for(G=0;G<O;G++)for(T=V[G],l=0,d=T.length;l<d;l++)for($=T[l],W=n[$+di],Q=n[$+hi],N=n[$+Uo],u=l+1;u<d;u++)C=T[u],ne=h0($,C),!(O>1&&P.has(ne))&&(O>1&&P.add(ne),te=n[C+di],X=n[C+hi],ie=n[C+Uo],Z=te-W,L=X-Q,D=Math.sqrt(Z*Z+L*L),K=D<N*i+r+(ie*i+r),K&&(p=!1,C=C/pi|0,D>0?(m[C]+=Z/D*(1+N),v[C]+=L/D*(1+N)):(m[C]+=S*tf(),v[C]+=x*tf())));for(l=0,u=0;l<g;l+=pi,u++)n[l+di]+=m[u]*.1*s,n[l+hi]+=v[u]*.1*s;return{converged:p}},$r={},da=3;$r.validateSettings=function(t){return"gridSize"in t&&typeof t.gridSize!="number"||t.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in t&&typeof t.margin!="number"||t.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in t&&typeof t.expansion!="number"||t.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in t&&typeof t.ratio!="number"||t.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in t&&typeof t.speed!="number"||t.speed<=0?{message:"the `speed` setting should be a positive number."}:null};$r.graphToByteArray=function(t,e){var n=t.order,r=new Float32Array(n*da),i=0;return t.forEachNode(function(o,a){typeof e=="function"&&(a=e(o,a)),r[i]=a.x,r[i+1]=a.y,r[i+2]=a.size||1,i+=da}),r};$r.assignLayoutChanges=function(t,e,n){var r=0;t.forEachNode(function(i){var o={x:e[r],y:e[r+1]};typeof n=="function"&&(o=n(i,o)),t.mergeNodeAttributes(i,o),r+=da})};$r.collectLayoutChanges=function(t,e,n){var r={},i=0;return t.forEachNode(function(o){var a={x:e[i],y:e[i+1]};typeof n=="function"&&(a=n(o,a)),r[o]=a,i+=da}),r};$r.createWorker=function(e){var n=window.URL||window.webkitURL,r=e.toString(),i=n.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(i);return n.revokeObjectURL(i),o};var m0={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3},g0=Kn,y0=p0,Vo=$r,v0=m0,b0=500;function kh(t,e,n){if(!g0(e))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");typeof n=="number"?n={maxIterations:n}:n=n||{};var r=n.maxIterations||b0;if(typeof r!="number"||r<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var i=Object.assign({},v0,n.settings),o=Vo.validateSettings(i);if(o)throw new Error("graphology-layout-noverlap: "+o.message);var a=Vo.graphToByteArray(e,n.inputReducer),s=!1,l;for(l=0;l<r&&!s;l++)s=y0(i,a).converged;if(t){Vo.assignLayoutChanges(e,a,n.outputReducer);return}return Vo.collectLayoutChanges(e,a,n.outputReducer)}var Oh=kh.bind(null,!1);Oh.assign=kh.bind(null,!0);var _0=Oh;const w0=Qt(_0);function x0({graph:t,margin:e,drags:n,getNodePosition:r,ratio:i,gridSize:o,maxIterations:a}){const{nodes:s,edges:l}=so(t),u=w0(t,{maxIterations:a,inputReducer:(c,f)=>({...f,x:f.x||0,y:f.y||0}),settings:{ratio:i,margin:e,gridSize:o}});return{step(){return!0},getNodePosition(c){var f,d;if(r){const h=r(c,{graph:t,drags:n,nodes:s,edges:l});if(h)return h}return(f=n==null?void 0:n[c])!=null&&f.position?(d=n==null?void 0:n[c])==null?void 0:d.position:u==null?void 0:u[c]}}}var Wr={};function E0(t){return typeof t!="number"||isNaN(t)?1:t}function T0(t,e){var n={},r=function(a){return typeof a>"u"?e:a};typeof e=="function"&&(r=e);var i=function(a){return r(a[t])},o=function(){return r(void 0)};return typeof t=="string"?(n.fromAttributes=i,n.fromGraph=function(a,s){return i(a.getNodeAttributes(s))},n.fromEntry=function(a,s){return i(s)}):typeof t=="function"?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},n.fromGraph=function(a,s){return r(t(s,a.getNodeAttributes(s)))},n.fromEntry=function(a,s){return r(t(a,s))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o),n}function Dh(t,e){var n={},r=function(a){return typeof a>"u"?e:a};typeof e=="function"&&(r=e);var i=function(a){return r(a[t])},o=function(){return r(void 0)};return typeof t=="string"?(n.fromAttributes=i,n.fromGraph=function(a,s){return i(a.getEdgeAttributes(s))},n.fromEntry=function(a,s){return i(s)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):typeof t=="function"?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(a,s){var l=a.extremities(s);return r(t(s,a.getEdgeAttributes(s),l[0],l[1],a.getNodeAttributes(l[0]),a.getNodeAttributes(l[1]),a.isUndirected(s)))},n.fromEntry=function(a,s,l,u,c,f,d){return r(t(a,s,l,u,c,f,d))},n.fromPartialEntry=function(a,s,l,u){return r(t(a,s,l,u))},n.fromMinimalEntry=function(a,s){return r(t(a,s))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o,n.fromMinimalEntry=o),n}Wr.createNodeValueGetter=T0;Wr.createEdgeValueGetter=Dh;Wr.createEdgeWeightGetter=function(t){return Dh(t,E0)};var st=0,Xe=1,Re=2,Ie=3,Sn=4,An=5,Ue=6,nf=7,Fo=8,rf=9,S0=0,A0=1,k0=2,dt=0,zt=1,Et=2,tr=3,jn=4,nt=5,Ot=6,dn=7,hn=8,of=3,rn=10,O0=3,vt=9,qs=10,D0=function(e,n,r){var i,o,a,s,l,u,c,f,d,h,p=n.length,g=r.length,y=e.adjustSizes,m=e.barnesHutTheta*e.barnesHutTheta,v,b,_,w,E,S,x,A=[];for(a=0;a<p;a+=rn)n[a+Sn]=n[a+Re],n[a+An]=n[a+Ie],n[a+Re]=0,n[a+Ie]=0;if(e.outboundAttractionDistribution){for(v=0,a=0;a<p;a+=rn)v+=n[a+Ue];v/=p/rn}if(e.barnesHutOptimize){var H=1/0,V=-1/0,O=1/0,G=-1/0,q,Y,I;for(a=0;a<p;a+=rn)H=Math.min(H,n[a+st]),V=Math.max(V,n[a+st]),O=Math.min(O,n[a+Xe]),G=Math.max(G,n[a+Xe]);var B=V-H,F=G-O;for(B>F?(O-=(B-F)/2,G=O+B):(H-=(F-B)/2,V=H+F),A[0+dt]=-1,A[0+zt]=(H+V)/2,A[0+Et]=(O+G)/2,A[0+tr]=Math.max(V-H,G-O),A[0+jn]=-1,A[0+nt]=-1,A[0+Ot]=0,A[0+dn]=0,A[0+hn]=0,i=1,a=0;a<p;a+=rn)for(o=0,I=of;;)if(A[o+nt]>=0){n[a+st]<A[o+zt]?n[a+Xe]<A[o+Et]?q=A[o+nt]:q=A[o+nt]+vt:n[a+Xe]<A[o+Et]?q=A[o+nt]+vt*2:q=A[o+nt]+vt*3,A[o+dn]=(A[o+dn]*A[o+Ot]+n[a+st]*n[a+Ue])/(A[o+Ot]+n[a+Ue]),A[o+hn]=(A[o+hn]*A[o+Ot]+n[a+Xe]*n[a+Ue])/(A[o+Ot]+n[a+Ue]),A[o+Ot]+=n[a+Ue],o=q;continue}else if(A[o+dt]<0){A[o+dt]=a;break}else{if(A[o+nt]=i*vt,f=A[o+tr]/2,d=A[o+nt],A[d+dt]=-1,A[d+zt]=A[o+zt]-f,A[d+Et]=A[o+Et]-f,A[d+tr]=f,A[d+jn]=d+vt,A[d+nt]=-1,A[d+Ot]=0,A[d+dn]=0,A[d+hn]=0,d+=vt,A[d+dt]=-1,A[d+zt]=A[o+zt]-f,A[d+Et]=A[o+Et]+f,A[d+tr]=f,A[d+jn]=d+vt,A[d+nt]=-1,A[d+Ot]=0,A[d+dn]=0,A[d+hn]=0,d+=vt,A[d+dt]=-1,A[d+zt]=A[o+zt]+f,A[d+Et]=A[o+Et]-f,A[d+tr]=f,A[d+jn]=d+vt,A[d+nt]=-1,A[d+Ot]=0,A[d+dn]=0,A[d+hn]=0,d+=vt,A[d+dt]=-1,A[d+zt]=A[o+zt]+f,A[d+Et]=A[o+Et]+f,A[d+tr]=f,A[d+jn]=A[o+jn],A[d+nt]=-1,A[d+Ot]=0,A[d+dn]=0,A[d+hn]=0,i+=4,n[A[o+dt]+st]<A[o+zt]?n[A[o+dt]+Xe]<A[o+Et]?q=A[o+nt]:q=A[o+nt]+vt:n[A[o+dt]+Xe]<A[o+Et]?q=A[o+nt]+vt*2:q=A[o+nt]+vt*3,A[o+Ot]=n[A[o+dt]+Ue],A[o+dn]=n[A[o+dt]+st],A[o+hn]=n[A[o+dt]+Xe],A[q+dt]=A[o+dt],A[o+dt]=-1,n[a+st]<A[o+zt]?n[a+Xe]<A[o+Et]?Y=A[o+nt]:Y=A[o+nt]+vt:n[a+Xe]<A[o+Et]?Y=A[o+nt]+vt*2:Y=A[o+nt]+vt*3,q===Y)if(I--){o=q;continue}else{I=of;break}A[Y+dt]=a;break}}if(e.barnesHutOptimize)for(b=e.scalingRatio,a=0;a<p;a+=rn)for(o=0;;)if(A[o+nt]>=0)if(S=Math.pow(n[a+st]-A[o+dn],2)+Math.pow(n[a+Xe]-A[o+hn],2),h=A[o+tr],4*h*h/S<m){if(_=n[a+st]-A[o+dn],w=n[a+Xe]-A[o+hn],y===!0?S>0?(x=b*n[a+Ue]*A[o+Ot]/S,n[a+Re]+=_*x,n[a+Ie]+=w*x):S<0&&(x=-b*n[a+Ue]*A[o+Ot]/Math.sqrt(S),n[a+Re]+=_*x,n[a+Ie]+=w*x):S>0&&(x=b*n[a+Ue]*A[o+Ot]/S,n[a+Re]+=_*x,n[a+Ie]+=w*x),o=A[o+jn],o<0)break;continue}else{o=A[o+nt];continue}else{if(u=A[o+dt],u>=0&&u!==a&&(_=n[a+st]-n[u+st],w=n[a+Xe]-n[u+Xe],S=_*_+w*w,y===!0?S>0?(x=b*n[a+Ue]*n[u+Ue]/S,n[a+Re]+=_*x,n[a+Ie]+=w*x):S<0&&(x=-b*n[a+Ue]*n[u+Ue]/Math.sqrt(S),n[a+Re]+=_*x,n[a+Ie]+=w*x):S>0&&(x=b*n[a+Ue]*n[u+Ue]/S,n[a+Re]+=_*x,n[a+Ie]+=w*x)),o=A[o+jn],o<0)break;continue}else for(b=e.scalingRatio,s=0;s<p;s+=rn)for(l=0;l<s;l+=rn)_=n[s+st]-n[l+st],w=n[s+Xe]-n[l+Xe],y===!0?(S=Math.sqrt(_*_+w*w)-n[s+Fo]-n[l+Fo],S>0?(x=b*n[s+Ue]*n[l+Ue]/S/S,n[s+Re]+=_*x,n[s+Ie]+=w*x,n[l+Re]-=_*x,n[l+Ie]-=w*x):S<0&&(x=100*b*n[s+Ue]*n[l+Ue],n[s+Re]+=_*x,n[s+Ie]+=w*x,n[l+Re]-=_*x,n[l+Ie]-=w*x)):(S=Math.sqrt(_*_+w*w),S>0&&(x=b*n[s+Ue]*n[l+Ue]/S/S,n[s+Re]+=_*x,n[s+Ie]+=w*x,n[l+Re]-=_*x,n[l+Ie]-=w*x));for(d=e.gravity/e.scalingRatio,b=e.scalingRatio,a=0;a<p;a+=rn)x=0,_=n[a+st],w=n[a+Xe],S=Math.sqrt(Math.pow(_,2)+Math.pow(w,2)),e.strongGravityMode?S>0&&(x=b*n[a+Ue]*d):S>0&&(x=b*n[a+Ue]*d/S),n[a+Re]-=_*x,n[a+Ie]-=w*x;for(b=1*(e.outboundAttractionDistribution?v:1),c=0;c<g;c+=O0)s=r[c+S0],l=r[c+A0],f=r[c+k0],E=Math.pow(f,e.edgeWeightInfluence),_=n[s+st]-n[l+st],w=n[s+Xe]-n[l+Xe],y===!0?(S=Math.sqrt(_*_+w*w)-n[s+Fo]-n[l+Fo],e.linLogMode?e.outboundAttractionDistribution?S>0&&(x=-b*E*Math.log(1+S)/S/n[s+Ue]):S>0&&(x=-b*E*Math.log(1+S)/S):e.outboundAttractionDistribution?S>0&&(x=-b*E/n[s+Ue]):S>0&&(x=-b*E)):(S=Math.sqrt(Math.pow(_,2)+Math.pow(w,2)),e.linLogMode?e.outboundAttractionDistribution?S>0&&(x=-b*E*Math.log(1+S)/S/n[s+Ue]):S>0&&(x=-b*E*Math.log(1+S)/S):e.outboundAttractionDistribution?(S=1,x=-b*E/n[s+Ue]):(S=1,x=-b*E)),S>0&&(n[s+Re]+=_*x,n[s+Ie]+=w*x,n[l+Re]-=_*x,n[l+Ie]-=w*x);var z,j,U,k,M,T;if(y===!0)for(a=0;a<p;a+=rn)n[a+rf]!==1&&(z=Math.sqrt(Math.pow(n[a+Re],2)+Math.pow(n[a+Ie],2)),z>qs&&(n[a+Re]=n[a+Re]*qs/z,n[a+Ie]=n[a+Ie]*qs/z),j=n[a+Ue]*Math.sqrt((n[a+Sn]-n[a+Re])*(n[a+Sn]-n[a+Re])+(n[a+An]-n[a+Ie])*(n[a+An]-n[a+Ie])),U=Math.sqrt((n[a+Sn]+n[a+Re])*(n[a+Sn]+n[a+Re])+(n[a+An]+n[a+Ie])*(n[a+An]+n[a+Ie]))/2,k=.1*Math.log(1+U)/(1+Math.sqrt(j)),M=n[a+st]+n[a+Re]*(k/e.slowDown),n[a+st]=M,T=n[a+Xe]+n[a+Ie]*(k/e.slowDown),n[a+Xe]=T);else for(a=0;a<p;a+=rn)n[a+rf]!==1&&(j=n[a+Ue]*Math.sqrt((n[a+Sn]-n[a+Re])*(n[a+Sn]-n[a+Re])+(n[a+An]-n[a+Ie])*(n[a+An]-n[a+Ie])),U=Math.sqrt((n[a+Sn]+n[a+Re])*(n[a+Sn]+n[a+Re])+(n[a+An]+n[a+Ie])*(n[a+An]+n[a+Ie]))/2,k=n[a+nf]*Math.log(1+U)/(1+Math.sqrt(j)),n[a+nf]=Math.min(1,Math.sqrt(k*(Math.pow(n[a+Re],2)+Math.pow(n[a+Ie],2))/(1+Math.sqrt(j)))),M=n[a+st]+n[a+Re]*(k/e.slowDown),n[a+st]=M,T=n[a+Xe]+n[a+Ie]*(k/e.slowDown),n[a+Xe]=T);return{}},Zn={},Yi=10,af=3;Zn.assign=function(t){t=t||{};var e=Array.prototype.slice.call(arguments).slice(1),n,r,i;for(n=0,i=e.length;n<i;n++)if(e[n])for(r in e[n])t[r]=e[n][r];return t};Zn.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null};Zn.graphToByteArrays=function(t,e){var n=t.order,r=t.size,i={},o,a=new Float32Array(n*Yi),s=new Float32Array(r*af);return o=0,t.forEachNode(function(l,u){i[l]=o,a[o]=u.x,a[o+1]=u.y,a[o+2]=0,a[o+3]=0,a[o+4]=0,a[o+5]=0,a[o+6]=1,a[o+7]=1,a[o+8]=u.size||1,a[o+9]=u.fixed?1:0,o+=Yi}),o=0,t.forEachEdge(function(l,u,c,f,d,h,p){var g=i[c],y=i[f],m=e(l,u,c,f,d,h,p);a[g+6]+=m,a[y+6]+=m,s[o]=g,s[o+1]=y,s[o+2]=m,o+=af}),{nodes:a,edges:s}};Zn.assignLayoutChanges=function(t,e,n){var r=0;t.updateEachNodeAttributes(function(i,o){return o.x=e[r],o.y=e[r+1],r+=Yi,n?n(i,o):o})};Zn.readGraphPositions=function(t,e){var n=0;t.forEachNode(function(r,i){e[n]=i.x,e[n+1]=i.y,n+=Yi})};Zn.collectLayoutChanges=function(t,e,n){for(var r=t.nodes(),i={},o=0,a=0,s=e.length;o<s;o+=Yi){if(n){var l=Object.assign({},t.getNodeAttributes(r[a]));l.x=e[o],l.y=e[o+1],l=n(r[a],l),i[r[a]]={x:l.x,y:l.y}}else i[r[a]]={x:e[o],y:e[o+1]};a++}return i};Zn.createWorker=function(e){var n=window.URL||window.webkitURL,r=e.toString(),i=n.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(i);return n.revokeObjectURL(i),o};var C0={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5},M0=Kn,P0=Wr.createEdgeWeightGetter,R0=D0,mi=Zn,I0=C0;function Ch(t,e,n){if(!M0(e))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof n=="number"&&(n={iterations:n});var r=n.iterations;if(typeof r!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(r<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var i=P0("getEdgeWeight"in n?n.getEdgeWeight:"weight").fromEntry,o=typeof n.outputReducer=="function"?n.outputReducer:null,a=mi.assign({},I0,n.settings),s=mi.validateSettings(a);if(s)throw new Error("graphology-layout-forceatlas2: "+s.message);var l=mi.graphToByteArrays(e,i),u;for(u=0;u<r;u++)R0(a,l.nodes,l.edges);if(t){mi.assignLayoutChanges(e,l.nodes,o);return}return mi.collectLayoutChanges(e,l.nodes)}function L0(t){var e=typeof t=="number"?t:t.order;return{barnesHutOptimize:e>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(e)}}var pu=Ch.bind(null,!1);pu.assign=Ch.bind(null,!0);pu.inferSettings=L0;var U0=pu;const V0=Qt(U0);var F0=hu,G0=Kn,z0={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function Mh(t,e,n){if(!G0(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");n=F0(n,z0);var r=n.dimensions;if(!Array.isArray(r)||r.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=r.length,o=n.center,a=n.rng,s=n.scale,l=(o-.5)*s;function u(f){for(var d=0;d<i;d++)f[r[d]]=a()*s+l;return f}if(!t){var c={};return e.forEachNode(function(f){c[f]=u({})}),c}e.updateEachNodeAttributes(function(f,d){return u(d),d},{attributes:r})}var Ph=Mh.bind(null,!1);Ph.assign=Mh.bind(null,!0);var j0=Ph;const N0=Qt(j0);function q0({graph:t,drags:e,iterations:n,...r}){N0.assign(t);const i=V0(t,{iterations:n,settings:r});return{step(){return!0},getNodePosition(o){var a;return((a=e==null?void 0:e[o])==null?void 0:a.position)||(i==null?void 0:i[o])}}}function B0({graph:t,drags:e,getNodePosition:n}){const{nodes:r,edges:i}=so(t);return{step(){return!0},getNodePosition(o){return n(o,{graph:t,drags:e,nodes:r,edges:i})}}}const $0=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function W0({type:t,...e}){if($0.includes(t)){const{nodeStrength:n,linkDistance:r,nodeLevelRatio:i}=e;if(t==="forceDirected2d")return zn({...e,dimensions:2,nodeLevelRatio:i||2,nodeStrength:n||-250,linkDistance:r,forceLayout:t});if(t==="treeTd2d")return zn({...e,mode:"td",dimensions:2,nodeLevelRatio:i||5,nodeStrength:n||-250,linkDistance:r||50,forceLayout:t});if(t==="treeLr2d")return zn({...e,mode:"lr",dimensions:2,nodeLevelRatio:i||5,nodeStrength:n||-250,linkDistance:r||50,forceLayout:t});if(t==="radialOut2d")return zn({...e,mode:"radialout",dimensions:2,nodeLevelRatio:i||5,nodeStrength:n||-500,linkDistance:r||100,forceLayout:t});if(t==="treeTd3d")return zn({...e,mode:"td",dimensions:3,nodeLevelRatio:i||2,nodeStrength:n||-500,linkDistance:r||50});if(t==="treeLr3d")return zn({...e,mode:"lr",dimensions:3,nodeLevelRatio:i||2,nodeStrength:n||-500,linkDistance:r||50,forceLayout:t});if(t==="radialOut3d")return zn({...e,mode:"radialout",dimensions:3,nodeLevelRatio:i||2,nodeStrength:n||-500,linkDistance:r||100,forceLayout:t});if(t==="forceDirected3d")return zn({...e,dimensions:3,nodeLevelRatio:i||2,nodeStrength:n||-250,linkDistance:r,forceLayout:t})}else if(t==="circular2d"){const{radius:n}=e;return f0({...e,radius:n||300})}else{if(t==="hierarchicalTd")return ef({...e,mode:"td"});if(t==="hierarchicalLr")return ef({...e,mode:"lr"});if(t==="nooverlap"){const{graph:n,maxIterations:r,ratio:i,margin:o,gridSize:a,...s}=e;return x0({type:"nooverlap",graph:n,margin:o||10,maxIterations:r||50,ratio:i||10,gridSize:a||20,...s})}else if(t==="forceatlas2"){const{graph:n,iterations:r,gravity:i,scalingRatio:o,...a}=e;return q0({type:"forceatlas2",graph:n,...a,scalingRatio:o||100,gravity:i||10,iterations:r||50})}else if(t==="custom")return B0({type:"custom",...e})}throw new Error(`Layout ${t} not found.`)}const H0=20;function Rh({nodeCount:t,nodePosition:e,labelType:n,camera:r}){return(i,o)=>{var a;return r&&e&&((a=r==null?void 0:r.position)==null?void 0:a.z)/(r==null?void 0:r.zoom)-(e==null?void 0:e.z)>6e3?!1:n==="all"||n==="nodes"&&i==="node"||n==="edges"&&i==="edge"?!0:n==="auto"&&i==="node"?t<=H0?!0:o>7:!1}}function Ih(t,e){switch(e){case"above":return t;case"below":return-t;case"inline":case"natural":default:return 0}}var mu={},gu={};(function(t){var e=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,a=Math.pow(2,31)-1;t.getPointerArray=function(l){var u=l-1;if(u<=e)return Uint8Array;if(u<=n)return Uint16Array;if(u<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(l){var u=l-1;return u<=i?Int8Array:u<=o?Int16Array:u<=a?Int32Array:Float64Array},t.getNumberType=function(l){return l===(l|0)?Math.sign(l)===-1?l<=127&&l>=-128?Int8Array:l<=32767&&l>=-32768?Int16Array:Int32Array:l<=255?Uint8Array:l<=65535?Uint16Array:Uint32Array:Float64Array};var s={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(l,u){var c=null,f=0,d,h,p,g,y;for(g=0,y=l.length;g<y;g++)p=u?u(l[g]):l[g],h=t.getNumberType(p),d=s[h.name],d>f&&(f=d,c=h);return c},t.isTypedArray=function(l){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(l)},t.concat=function(){var l=0,u,c,f;for(u=0,f=arguments.length;u<f;u++)l+=arguments[u].length;var d=new arguments[0].constructor(l);for(u=0,c=0;u<f;u++)d.set(arguments[u],c),c+=arguments[u].length;return d},t.indices=function(l){for(var u=t.getPointerArray(l),c=new u(l),f=0;f<l;f++)c[f]=f;return c}})(gu);var ha=gu,Y0=Wr.createEdgeWeightGetter;function Lh(t,e){return t==="outbound"||t==="inbound"?e.directedSize+e.undirectedSize*2:t==="in"||t==="out"||t==="directed"?e.directedSize:e.undirectedSize*2}function In(t,e){e=e||"outbound";var n=t[e+"Neighbors"].bind(t),r=Lh(e,t),i=ha.getPointerArray(r),o=ha.getPointerArray(t.order);this.graph=t,this.neighborhood=new o(r),this.starts=new i(t.order+1),this.nodes=t.nodes();var a={},s,l,u,c,f,d,h=0;for(s=0,l=t.order;s<l;s++)a[this.nodes[s]]=s;for(s=0,l=t.order;s<l;s++)for(f=this.nodes[s],d=n(f),this.starts[s]=h,u=0,c=d.length;u<c;u++)this.neighborhood[h++]=a[d[u]];this.starts[s]=r}In.prototype.bounds=function(t){return[this.starts[t],this.starts[t+1]]};In.prototype.project=function(){var t=this,e={};return t.nodes.forEach(function(n,r){e[n]=Array.from(t.neighborhood.slice(t.starts[r],t.starts[r+1])).map(function(i){return t.nodes[i]})}),e};In.prototype.collect=function(t){var e,n,r={};for(e=0,n=t.length;e<n;e++)r[this.nodes[e]]=t[e];return r};In.prototype.assign=function(t,e){var n=0;this.graph.updateEachNodeAttributes(function(r,i){return i[t]=e[n++],i},{attributes:[t]})};mu.NeighborhoodIndex=In;function lo(t,e,n){n=n||"outbound";var r=t[n+"Edges"].bind(t),i=Lh(n,t),o=ha.getPointerArray(i),a=ha.getPointerArray(t.order),s=Y0(e).fromMinimalEntry;this.graph=t,this.neighborhood=new a(i),this.weights=new Float64Array(i),this.outDegrees=new Float64Array(t.order),this.starts=new o(t.order+1),this.nodes=t.nodes();var l={},u,c,f,d,h,p,g,y,m,v=0;for(u=0,c=t.order;u<c;u++)l[this.nodes[u]]=u;for(u=0,c=t.order;u<c;u++)for(h=this.nodes[u],g=r(h),this.starts[u]=v,f=0,d=g.length;f<d;f++)y=g[f],p=t.opposite(h,y),m=s(y,t.getEdgeAttributes(y)),this.neighborhood[v]=l[p],this.weights[v++]=m,this.outDegrees[u]+=m;this.starts[u]=i}lo.prototype.bounds=In.prototype.bounds;lo.prototype.project=In.prototype.project;lo.prototype.collect=In.prototype.collect;lo.prototype.assign=In.prototype.assign;mu.WeightedNeighborhoodIndex=lo;var X0=Kn,K0=hu,Z0=mu.WeightedNeighborhoodIndex,Q0={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function Uh(t,e,n){if(!X0(e))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");n=K0(n,Q0);var r=n.alpha,i=n.maxIterations,o=n.tolerance,a=n.nodePagerankAttribute,s=e.order,l=1/s,u=new Z0(e,n.getEdgeWeight),c,f,d,h,p=new Float64Array(e.order),g=new Float64Array(u.weights.length),y=[];for(c=0;c<s;c++)for(p[c]=l,d=u.starts[c+1],h=u.outDegrees[c],h===0&&y.push(c),f=u.starts[c];f<d;f++)g[f]=u.weights[f]/h;for(var m=0,v=0,b,_,w,E=!1;m<i;){for(w=p,p=new Float64Array(e.order),b=0,c=0,d=y.length;c<d;c++)b+=w[y[c]];for(b*=r,c=0;c<s;c++){for(d=u.starts[c+1],f=u.starts[c];f<d;f++)_=u.neighborhood[f],p[_]+=r*w[c]*g[f];p[c]+=b*l+(1-r)*l}for(v=0,c=0;c<s;c++)v+=Math.abs(p[c]-w[c]);if(v<s*o){E=!0;break}m++}if(!E)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(t){u.assign(a,p);return}return u.collect(p)}var Vh=Uh.bind(null,!1);Vh.assign=Uh.bind(null,!0);var J0=Vh;const eb=Qt(J0);function tb({graph:t}){const e=eb(t);return{ranks:e,getSizeForNode:n=>e[n]*80}}var nb=Kn;function Hr(t,e,n,r){var i=e+"Centrality";if(!nb(n))throw new Error("graphology-centrality/"+i+": the given graph is not a valid graphology instance.");if(e!=="degree"&&n.type==="undirected")throw new Error("graphology-centrality/"+i+": cannot compute "+e+" centrality on an undirected graph.");r=r||{};var o=r.nodeCentralityAttribute||i,a=n.order-1,s=n[e].bind(n);if(t){n.updateEachNodeAttributes(function(u,c){return c[o]=s(u)/a,c},{attributes:[o]});return}var l={};return n.forEachNode(function(u){l[u]=s(u)/a}),l}var Fh=Hr.bind(null,!1,"degree"),rb=Hr.bind(null,!1,"inDegree"),ib=Hr.bind(null,!1,"outDegree");Fh.assign=Hr.bind(null,!0,"degree");rb.assign=Hr.bind(null,!0,"inDegree");ib.assign=Hr.bind(null,!0,"outDegree");var ob=Fh;function ab({graph:t}){const e=ob(t);return{ranks:e,getSizeForNode:n=>e[n]*20}}function sb({graph:t,attribute:e,defaultSize:n}){const r=new Map;return e?t.forEachNode((i,o)=>{var s;const a=(s=o.data)==null?void 0:s[e];isNaN(a)&&console.warn(`Attribute ${a} is not a number for node ${o.id}`),r.set(i,a||0)}):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:i=>!e||!r?n:r.get(i)}}function oa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lb(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Gh(t){let e,n,r;t.length!==2?(e=oa,n=(s,l)=>oa(t(s),l),r=(s,l)=>t(s)-l):(e=t===oa||t===lb?t:ub,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function ub(){return 0}function cb(t){return t===null?NaN:+t}const fb=Gh(oa),db=fb.right;Gh(cb).center;const hb=Math.sqrt(50),pb=Math.sqrt(10),mb=Math.sqrt(2);function pa(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=hb?10:o>=pb?5:o>=mb?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?pa(t,e,n*2):[s,l,u]}function gb(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?pa(e,t,n):pa(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function kl(t,e,n){return e=+e,t=+t,n=+n,pa(t,e,n)[2]}function yb(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?kl(e,t,n):kl(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function vb(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function yu(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zh(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function uo(){}var Xi=.7,ma=1/Xi,Rr="\\s*([+-]?\\d+)\\s*",Ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bb=/^#([0-9a-f]{3,8})$/,_b=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),wb=new RegExp(`^rgb\\(${_n},${_n},${_n}\\)$`),xb=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${Ki}\\)$`),Eb=new RegExp(`^rgba\\(${_n},${_n},${_n},${Ki}\\)$`),Tb=new RegExp(`^hsl\\(${Ki},${_n},${_n}\\)$`),Sb=new RegExp(`^hsla\\(${Ki},${_n},${_n},${Ki}\\)$`),sf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yu(uo,Zi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:lf,formatHex:lf,formatHex8:Ab,formatHsl:kb,formatRgb:uf,toString:uf});function lf(){return this.rgb().formatHex()}function Ab(){return this.rgb().formatHex8()}function kb(){return jh(this).formatHsl()}function uf(){return this.rgb().formatRgb()}function Zi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bb.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cf(e):n===3?new Mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Go(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Go(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_b.exec(t))?new Mt(e[1],e[2],e[3],1):(e=wb.exec(t))?new Mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xb.exec(t))?Go(e[1],e[2],e[3],e[4]):(e=Eb.exec(t))?Go(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tb.exec(t))?hf(e[1],e[2]/100,e[3]/100,1):(e=Sb.exec(t))?hf(e[1],e[2]/100,e[3]/100,e[4]):sf.hasOwnProperty(t)?cf(sf[t]):t==="transparent"?new Mt(NaN,NaN,NaN,0):null}function cf(t){return new Mt(t>>16&255,t>>8&255,t&255,1)}function Go(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mt(t,e,n,r)}function Ob(t){return t instanceof uo||(t=Zi(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function Ol(t,e,n,r){return arguments.length===1?Ob(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yu(Mt,Ol,zh(uo,{brighter(t){return t=t==null?ma:Math.pow(ma,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xi:Math.pow(Xi,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(ur(this.r),ur(this.g),ur(this.b),ga(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ff,formatHex:ff,formatHex8:Db,formatRgb:df,toString:df}));function ff(){return`#${lr(this.r)}${lr(this.g)}${lr(this.b)}`}function Db(){return`#${lr(this.r)}${lr(this.g)}${lr(this.b)}${lr((isNaN(this.opacity)?1:this.opacity)*255)}`}function df(){const t=ga(this.opacity);return`${t===1?"rgb(":"rgba("}${ur(this.r)}, ${ur(this.g)}, ${ur(this.b)}${t===1?")":`, ${t})`}`}function ga(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ur(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lr(t){return t=ur(t),(t<16?"0":"")+t.toString(16)}function hf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new un(t,e,n,r)}function jh(t){if(t instanceof un)return new un(t.h,t.s,t.l,t.opacity);if(t instanceof uo||(t=Zi(t)),!t)return new un;if(t instanceof un)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new un(a,s,l,t.opacity)}function Cb(t,e,n,r){return arguments.length===1?jh(t):new un(t,e,n,r??1)}function un(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yu(un,Cb,zh(uo,{brighter(t){return t=t==null?ma:Math.pow(ma,t),new un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xi:Math.pow(Xi,t),new un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mt(Bs(t>=240?t-240:t+120,i,r),Bs(t,i,r),Bs(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new un(pf(this.h),zo(this.s),zo(this.l),ga(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ga(this.opacity);return`${t===1?"hsl(":"hsla("}${pf(this.h)}, ${zo(this.s)*100}%, ${zo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function pf(t){return t=(t||0)%360,t<0?t+360:t}function zo(t){return Math.max(0,Math.min(1,t||0))}function Bs(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vu=t=>()=>t;function Mb(t,e){return function(n){return t+n*e}}function Pb(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rb(t){return(t=+t)==1?Nh:function(e,n){return n-e?Pb(e,n,t):vu(isNaN(e)?n:e)}}function Nh(t,e){var n=e-t;return n?Mb(t,n):vu(isNaN(t)?e:t)}const mf=function t(e){var n=Rb(e);function r(i,o){var a=n((i=Ol(i)).r,(o=Ol(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=Nh(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Ib(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Lb(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ub(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=bu(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Vb(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ya(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Fb(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=bu(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Dl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(Dl.source,"g");function Gb(t){return function(){return t}}function zb(t){return function(e){return t(e)+""}}function jb(t,e){var n=Dl.lastIndex=$s.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Dl.exec(t))&&(i=$s.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ya(r,i)})),n=$s.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?zb(l[0].x):Gb(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function bu(t,e){var n=typeof e,r;return e==null||n==="boolean"?vu(e):(n==="number"?ya:n==="string"?(r=Zi(e))?(e=r,mf):jb:e instanceof Zi?mf:e instanceof Date?Vb:Lb(e)?Ib:Array.isArray(e)?Ub:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Fb:ya)(t,e)}function Nb(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function qb(t){return function(){return t}}function Bb(t){return+t}var gf=[0,1];function Dr(t){return t}function Cl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:qb(isNaN(e)?NaN:.5)}function $b(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Wb(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Cl(i,r),o=n(a,o)):(r=Cl(r,i),o=n(o,a)),function(s){return o(r(s))}}function Hb(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Cl(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=db(t,s,1,r)-1;return o[l](i[l](s))}}function Yb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xb(){var t=gf,e=gf,n=bu,r,i,o,a=Dr,s,l,u;function c(){var d=Math.min(t.length,e.length);return a!==Dr&&(a=$b(t[0],t[d-1])),s=d>2?Hb:Wb,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=s(t.map(r),e,n)))(r(a(d)))}return f.invert=function(d){return a(i((u||(u=s(e,t.map(r),ya)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,Bb),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Nb,c()},f.clamp=function(d){return arguments.length?(a=d?!0:Dr,c()):a!==Dr},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function Kb(){return Xb()(Dr,Dr)}function Zb(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function va(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Gr(t){return t=va(Math.abs(t)),t?t[1]:NaN}function Qb(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Jb(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var e1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ba(t){if(!(e=e1.exec(t)))throw new Error("invalid format: "+t);var e;return new _u({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ba.prototype=_u.prototype;function _u(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}_u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t1(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var qh;function n1(t,e){var n=va(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(qh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+va(t,Math.max(0,e+o-1))[0]}function yf(t,e){var n=va(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const vf={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zb,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yf(t*100,e),r:yf,s:n1,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function bf(t){return t}var _f=Array.prototype.map,wf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function r1(t){var e=t.grouping===void 0||t.thousands===void 0?bf:Qb(_f.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?bf:Jb(_f.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=ba(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,y=f.zero,m=f.width,v=f.comma,b=f.precision,_=f.trim,w=f.type;w==="n"?(v=!0,w="g"):vf[w]||(b===void 0&&(b=12),_=!0,w="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?a:"",x=vf[w],A=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function H(V){var O=E,G=S,q,Y,I;if(w==="c")G=x(V)+G,V="";else{V=+V;var B=V<0||1/V<0;if(V=isNaN(V)?l:x(Math.abs(V),b),_&&(V=t1(V)),B&&+V==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:s:p==="-"||p==="("?"":p)+O,G=(w==="s"?wf[8+qh/3]:"")+G+(B&&p==="("?")":""),A){for(q=-1,Y=V.length;++q<Y;)if(I=V.charCodeAt(q),48>I||I>57){G=(I===46?i+V.slice(q+1):V.slice(q))+G,V=V.slice(0,q);break}}}v&&!y&&(V=e(V,1/0));var F=O.length+V.length+G.length,z=F<m?new Array(m-F+1).join(d):"";switch(v&&y&&(V=e(z+V,z.length?m-G.length:1/0),z=""),h){case"<":V=O+V+G+z;break;case"=":V=O+z+V+G;break;case"^":V=z.slice(0,F=z.length>>1)+O+V+G+z.slice(F);break;default:V=z+O+V+G;break}return o(V)}return H.toString=function(){return f+""},H}function c(f,d){var h=u((f=ba(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Gr(d)/3)))*3,g=Math.pow(10,-p),y=wf[8+p/3];return function(m){return h(g*m)+y}}return{format:u,formatPrefix:c}}var jo,Bh,$h;i1({thousands:",",grouping:[3],currency:["$",""]});function i1(t){return jo=r1(t),Bh=jo.format,$h=jo.formatPrefix,jo}function o1(t){return Math.max(0,-Gr(Math.abs(t)))}function a1(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gr(e)/3)))*3-Gr(Math.abs(t)))}function s1(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Gr(e)-Gr(t))+1}function l1(t,e,n,r){var i=yb(t,e,n),o;switch(r=ba(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=a1(i,a))&&(r.precision=o),$h(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=s1(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=o1(i))&&(r.precision=o-(r.type==="%")*2);break}}return Bh(r)}function u1(t){var e=t.domain;return t.ticks=function(n){var r=e();return gb(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return l1(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=kl(a,s,n),u===l)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Wh(){var t=Kb();return t.copy=function(){return Yb(t,Wh())},vb.apply(t,arguments),u1(t)}const Ws={pagerank:tb,centrality:ab,attribute:sb,none:({defaultSize:t})=>({getSizeForNode:e=>t})};function c1({type:t,...e}){var u;const n=(u=Ws[t])==null?void 0:u.call(Ws,e);if(!n&&t!=="default")throw new Error(`Unknown sizing strategy: ${t}`);const{graph:r,minSize:i,maxSize:o}=e,a=new Map;let s,l;if(r.forEachNode((c,f)=>{let d;t==="default"?d=f.size||e.defaultSize:d=n.getSizeForNode(c),(s===void 0||d<s)&&(s=d),(l===void 0||d>l)&&(l=d),a.set(c,d)}),t!=="none"){const c=Wh().domain([s,l]).rangeRound([i,o]);for(const[f,d]of a)a.set(f,c(d))}return a}function f1(t,e,n){t.clear();for(const r of e)try{t.addNode(r.id,r)}catch({message:i}){console.error(`[Graph] ${i}`)}for(const r of n)try{t.addEdge(r.source,r.target,r)}catch({message:i}){console.error(`[Graph] ${i}`)}return t}function d1({graph:t,layout:e,sizingType:n,labelType:r,sizingAttribute:i,defaultNodeSize:o,minNodeSize:a,maxNodeSize:s}){const l=[],u=[],c=new Map,f=c1({graph:t,type:n,attribute:i,minSize:a,maxSize:s,defaultSize:o}),d=t.nodes().length,h=Rh({nodeCount:d,labelType:r});return t.forEachNode((p,g)=>{const y=e.getNodePosition(p),{data:m,fill:v,icon:b,label:_,size:w,...E}=g,S=f.get(g.id),x=h("node",S),H=(t.inboundNeighbors(g.id)||[]).map(O=>t.getNodeAttributes(O)),V={...g,size:S,labelVisible:x,label:_,icon:b,fill:v,parents:H,data:{...E,...m??{}},position:{...y,x:y.x||0,y:y.y||0,z:y.z||1}};c.set(g.id,V),l.push(V)}),t.forEachEdge((p,g)=>{const y=c.get(g.source),m=c.get(g.target);if(y&&m){const{data:v,id:b,label:_,size:w,...E}=g,S=h("edge",w);u.push({...g,id:b,label:_,labelVisible:S,size:w,data:{...E,id:b,...v||{}}})}}),{nodes:l,edges:u}}var h1={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"};const xf=t=>{let e;const n=new Set,r=(l,u)=>{const c=typeof l=="function"?l(e):l;if(!Object.is(c,e)){const f=e;e=u??typeof c!="object"?c:Object.assign({},e,c),n.forEach(d=>d(e,f))}},i=()=>e,s={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(h1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,s),s},p1=t=>t?xf(t):xf;var Hh={exports:{}},Yh={},Xh={exports:{}},Kh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr=R;function m1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g1=typeof Object.is=="function"?Object.is:m1,y1=zr.useState,v1=zr.useEffect,b1=zr.useLayoutEffect,_1=zr.useDebugValue;function w1(t,e){var n=e(),r=y1({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return b1(function(){i.value=n,i.getSnapshot=e,Hs(i)&&o({inst:i})},[t,n,e]),v1(function(){return Hs(i)&&o({inst:i}),t(function(){Hs(i)&&o({inst:i})})},[t]),_1(n),n}function Hs(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!g1(t,n)}catch{return!0}}function x1(t,e){return e()}var E1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x1:w1;Kh.useSyncExternalStore=zr.useSyncExternalStore!==void 0?zr.useSyncExternalStore:E1;Xh.exports=Kh;var T1=Xh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=R,S1=T1;function A1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var k1=typeof Object.is=="function"?Object.is:A1,O1=S1.useSyncExternalStore,D1=Ha.useRef,C1=Ha.useEffect,M1=Ha.useMemo,P1=Ha.useDebugValue;Yh.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=D1(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=M1(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&a.hasValue){var p=a.value;if(i(p,h))return f=p}return f=h}if(p=f,k1(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,i]);var s=O1(t,o[0],o[1]);return C1(function(){a.hasValue=!0,a.value=s},[s]),P1(s),s};Hh.exports=Yh;var R1=Hh.exports;const I1=Qt(R1);var L1={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"};const{useSyncExternalStoreWithSelector:U1}=I1;function Zh(t,e=t.getState,n){const r=U1(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return R.useDebugValue(r),r}const Ef=t=>{(L1?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?p1(t):t,n=(r,i)=>Zh(e,r,i);return Object.assign(n,e),n},V1=t=>t?Ef(t):Ef;var F1={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"};function G1(){(F1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `context` will be removed in a future version. Instead use `import { createStore, useStore } from 'zustand'`. See: https://github.com/pmndrs/zustand/discussions/1180.");const t=R.createContext(void 0);return{Provider:({createStore:i,children:o})=>{const a=R.useRef();return a.current||(a.current=i()),R.createElement(t.Provider,{value:a.current},o)},useStore:(i,o)=>{const a=R.useContext(t);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Zh(a,i,o)},useStoreApi:()=>{const i=R.useContext(t);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return R.useMemo(()=>({...i}),[i])}}}const Ut={mass:10,tension:1e3,friction:300,precision:.1};function Qh(t,e,n){const r=e.getLength(),i=t==="end"?r:r/2,o=t==="end"?n/2:0,a=(i-o)/r,s=e.getPointAt(a),l=e.getTangentAt(a);return[s,l]}function Jh(t){return[t+6,2+t/1.5]}const Ys=.7;function ep(t,e,n=0){const r=new _e(t.x,t.y||0,t.z||0),i=new _e(e.x,e.y||0,e.z||0),o=new _e().addVectors(r,i).divideScalar(2);return o.setLength(o.length()+n)}function z1(t,e,n=-1){const r=t.clone(),i=e.clone(),o=new _e().subVectors(i,r),a=o.length(),s=o.clone().normalize(),l=new _e().subVectors(i,r).divideScalar(2),u=Math.abs(s.x)%1,c=new _e(-s.y,s.x-u*s.z,u*s.y).normalize(),f=new _e().add(r).add(l).add(c.multiplyScalar(a/4).multiplyScalar(n));return[t,f,e]}function Qi(t,e,n,r,i,o){const a=Tf(t,n,e),s=Tf(n,t,r);return i?new fg(...z1(a,s,o)):new dg(a,s)}function Ji(t){return new _e(t.position.x,t.position.y,t.position.z||0)}function Tf(t,e,n){const r=t.distanceTo(e);return t.clone().add(e.clone().sub(t).multiplyScalar(n/r))}function Sf(t,e){return{...t,position:{...t.position,x:t.position.x+e.x,y:t.position.y+e.y,z:t.position.z+e.z}}}function j1({edge:t,edges:e,curved:n}){let r=n,i;const o=e.filter(a=>a.target===t.target&&a.source===t.source).map(a=>a.id);if(o.length>1){r=!0;const a=o.indexOf(t.id);o.length===2?i=a===0?Ys:-Ys:i=(a-Math.floor(o.length/2))*Ys}return{curved:r,curveOffset:i}}function wu(t){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let s of t)e=Math.min(e,s.position.x),n=Math.max(n,s.position.x),r=Math.min(r,s.position.y),i=Math.max(i,s.position.y),o=Math.min(o,s.position.z),a=Math.max(a,s.position.z);return{height:i-r,width:n-e,minX:e,maxX:n,minY:r,maxY:i,minZ:o,maxZ:a,x:(n+e)/2,y:(i+r)/2,z:(a+o)/2}}function N1(t,e){return e?t.reduce((n,r)=>{const i=r.data[e];return i&&n.set(i,[...n.get(i)||[],r]),n},new Map):new Map}function q1({nodes:t,clusterAttribute:e}){const n=new Map;if(e){const r=N1(t,e);for(const[i,o]of r){const a=wu(o);n.set(i,{label:i,nodes:o,position:a})}}return n}const xu=({sensitivity:t=7,interval:e=50,timeout:n=0,disabled:r,onPointerOver:i,onPointerOut:o})=>{const a=R.useRef(!1),s=R.useRef(null),l=R.useRef(0),u=R.useRef({x:null,y:null,px:null,py:null}),c=R.useCallback(y=>{u.current.x=y.clientX,u.current.y=y.clientY},[]),f=R.useCallback(y=>{s.current=clearTimeout(s.current);const{px:m,x:v,py:b,y:_}=u.current;Math.abs(m-v)+Math.abs(b-_)<t?(l.current=1,i(y)):(u.current.px=v,u.current.py=_,s.current=setTimeout(()=>f(y),e))},[e,i,t]),d=R.useCallback(()=>{clearTimeout(s.current),typeof window<"u"&&document.removeEventListener("mousemove",c,!1)},[c]),h=R.useCallback(y=>{r||(a.current=!0,d(),l.current!==1&&(u.current.px=y.pointer.x,u.current.py=y.pointer.y,typeof window<"u"&&document.addEventListener("mousemove",c,!1),s.current=setTimeout(()=>f(y),n)))},[d,f,r,c,n]),p=R.useCallback(y=>{s.current=clearTimeout(s.current),l.current=0,o(y)},[o]),g=R.useCallback(y=>{a.current=!1,d(),l.current===1&&(s.current=setTimeout(()=>p(y),n))},[d,p,n]);return{pointerOver:h,pointerOut:g}};function _a(t,e){return t.map(function(n,r){return n+e[r]})}function Ya(t,e){return t.map(function(n,r){return n-e[r]})}function eo(t){return Math.hypot.apply(Math,t)}function tp(t,e){e===void 0&&(e=t);var n=eo(e),r=n===0?0:1/n,i=e.map(function(a){return r*a}),o=eo(t);return{distance:o,direction:i}}function np(t,e,n){var r=eo(e),i=r===0?0:1/r,o=n===0?0:1/n,a=o*r,s=e.map(function(c){return o*c}),l=e.map(function(c){return i*c}),u=eo(t);return{velocities:s,velocity:a,distance:u,direction:l}}function wa(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function B1(t,e,n){return Math.max(e,Math.min(t,n))}function $1(t,e){return Math.pow(t,e*5)}function Af(t,e,n){return e===0||Math.abs(e)===1/0?$1(t,n):t*e*n/(e+n*t)}function kf(t,e,n,r){return r===void 0&&(r=.15),r===0?B1(t,e,n):t<e?-Af(e-t,n-e,r)+e:t>n?+Af(t-n,n-e,r)+n:t}function Of(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W1(t,e,n){return e&&Of(t.prototype,e),n&&Of(t,n),t}function De(){return De=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},De.apply(this,arguments)}function gr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function H1(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Le(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y1(t,e){if(t){if(typeof t=="string")return Df(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Df(t,e)}}function Df(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xa(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=Y1(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function rp(){}function ip(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?rp:e.length===1?e[0]:function(){for(var r,i=Xa(e),o;!(o=i()).done;){var a=o.value;r=a.apply(this,arguments)||r}return r}}function Bn(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Cf(t,e){return Object.assign({},e,t||{})}function xa(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}else return t}function co(t,e){t===void 0&&(t={});for(var n={},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,t[a],a,t);break;case"object":n[a]=co(t[a],s);break;case"boolean":s&&(n[a]=t[a]);break}}return n}function X1(){try{return"constructor"in GestureEvent}catch{return!1}}function op(){return typeof window<"u"&&"ontouchstart"in window}function K1(){return typeof window<"u"&&"onpointerdown"in window}function ap(t){return"pointerId"in t?null:t.type==="touchend"?t.changedTouches:t.targetTouches}function Eu(t){return Array.from(ap(t)).map(function(e){return e.identifier})}function $t(t){var e="buttons"in t?t.buttons:0,n=t.shiftKey,r=t.altKey,i=t.metaKey,o=t.ctrlKey;return{buttons:e,shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}}var fo=function(e){return e};function Cr(t,e){e===void 0&&(e=fo);var n=ap(t),r=n?n[0]:t,i=r.clientX,o=r.clientY;return e([i,o])}function Mf(t,e,n){n===void 0&&(n=fo);var r=Array.from(t.touches).filter(function(p){return e.includes(p.identifier)}),i=r[0],o=r[1];if(!i||!o)throw Error("The event doesn't have two pointers matching the pointerIds");var a=o.clientX-i.clientX,s=o.clientY-i.clientY,l=(o.clientX+i.clientX)/2,u=(o.clientY+i.clientY)/2,c=Math.hypot(a,s),f=-(Math.atan2(a,s)*180)/Math.PI,d=n([c,f]),h=n([l,u]);return{values:d,origin:h}}function Z1(t,e){e===void 0&&(e=fo);var n=t.currentTarget,r=n.scrollX,i=n.scrollY,o=n.scrollLeft,a=n.scrollTop;return e([r||o||0,i||a||0])}var Pf=40,Rf=800;function sp(t,e){e===void 0&&(e=fo);var n=t.deltaX,r=t.deltaY,i=t.deltaMode;return i===1?(n*=Pf,r*=Pf):i===2&&(n*=Rf,r*=Rf),e([n,r])}function If(t,e){return e===void 0&&(e=fo),e([t.scale,t.rotation])}var Q1=180,J1=.15,e_=.5,t_=50,n_=250,lp={threshold:function(e){return e===void 0&&(e=0),Bn(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Bn(J1);case!1:return Bn(0);default:return Bn(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Bn(e)},transform:!0},Tu=De({},lp,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(f){return Tu.bounds(e(f))};var n=e,r=n.left,i=r===void 0?-1/0:r,o=n.right,a=o===void 0?1/0:o,s=n.top,l=s===void 0?-1/0:s,u=n.bottom,c=u===void 0?1/0:u;return[[i,a],[l,c]]}}),r_=typeof window<"u"&&window.document&&window.document.createElement,i_={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return t===void 0&&(t=r_?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,r=n.passive,i=r===void 0?!0:r,o=n.capture,a=o===void 0?!1:o;return{passive:i,capture:a}},transform:!0},o_=De({},lp,{bounds:function(e,n,r){var i=r.distanceBounds,o=i===void 0?{}:i,a=r.angleBounds,s=a===void 0?{}:a,l=function(f){var d=Cf(xa(o,f),{min:-1/0,max:1/0});return[d.min,d.max]},u=function(f){var d=Cf(xa(s,f),{min:-1/0,max:1/0});return[d.min,d.max]};return typeof o!="function"&&typeof s!="function"?[l(),u()]:function(c){return[l(c),u(c)]}}}),a_=De({},Tu,{useTouch:function(e){e===void 0&&(e=!1);var n=op(),r=K1();return!!(e&&n||n&&!r)},experimental_preventWindowScrollY:function(e){return e===void 0&&(e=!1),e},threshold:function(e,n,r){var i=r.filterTaps,o=i===void 0?!1:i,a=r.lockDirection,s=a===void 0?!1:a,l=r.axis,u=l===void 0?void 0:l,c=Bn(e,o?3:s||u?1:0);return this.filterTaps=o,c},swipeVelocity:function(e){return e===void 0&&(e=e_),Bn(e)},swipeDistance:function(e){return e===void 0&&(e=t_),Bn(e)},swipeDuration:function(e){return e===void 0&&(e=n_),e},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return Q1;case!1:return 0;default:return e}}});function s_(t){return t===void 0&&(t={}),co(t,i_)}function Xs(t){return t===void 0&&(t={}),co(t,Tu)}function l_(t){return t===void 0&&(t={}),co(t,o_)}function u_(t){return t===void 0&&(t={}),co(t,a_)}function c_(t,e){t===void 0&&(t={}),e===void 0&&(e=new Set);var n=t,r=n.drag,i=n.wheel,o=n.move,a=n.scroll,s=n.pinch,l=n.hover,u=n.eventOptions,c=n.window,f=n.transform,d=n.domTarget,h=n.enabled,p=s_({domTarget:d,eventOptions:u,transform:f,window:c,enabled:h});return e.has("onDrag")&&(p.drag=u_(r)),e.has("onWheel")&&(p.wheel=Xs(i)),e.has("onScroll")&&(p.scroll=Xs(a)),e.has("onMove")&&(p.move=Xs(o)),e.has("onPinch")&&(p.pinch=l_(s)),e.has("onHover")&&(p.hover=De({enabled:!0},l)),p}function gi(t){return De({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:rp,canceled:!1,memo:void 0,args:void 0},t)}function up(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},e=gi({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),n=gi({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),r=gi({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=gi({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=gi({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:r,move:i,scroll:o}}var Wt=new Map,f_=function(e){return e},cp=function(){function t(n,r){var i=this;r===void 0&&(r=[]),this.controller=n,this.args=r,this.debounced=!0,this.setTimeout=function(o,a){var s;a===void 0&&(a=140),clearTimeout(i.controller.timeouts[i.stateKey]);for(var l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];i.controller.timeouts[i.stateKey]=(s=window).setTimeout.apply(s,[o,a].concat(u))},this.clearTimeout=function(){clearTimeout(i.controller.timeouts[i.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),i.state._blocked)return i.debounced||(i.state._active=!1,i.clean()),null;if(!o&&!i.state.intentional&&!i.config.triggerAllEvents)return null;if(i.state.intentional){var a=i.state.active,s=i.state._active;i.state.active=s,i.state.first=s&&!a,i.state.last=a&&!s,i.controller.state.shared[i.ingKey]=s}var l=i.controller.pointerIds.size||i.controller.touchIds.size,u=i.controller.state.shared.buttons>0||l>0,c=De({},i.controller.state.shared,i.state,i.mapStateValues(i.state),{locked:!!document.pointerLockElement,touches:l,down:u}),f=i.handler(c);return i.state.memo=f!==void 0?f:i.state.memo,c},this.controller=n,this.args=r}var e=t.prototype;return e.updateSharedState=function(r){Object.assign(this.controller.state.shared,r)},e.updateGestureState=function(r){Object.assign(this.state,r)},e.checkIntentionality=function(r,i){return{_intentional:r,_blocked:!1}},e.getMovement=function(r){var i=this.config.rubberband,o=this.state,a=o._bounds,s=o._initial,l=o._active,u=o._intentional,c=o.lastOffset,f=o.movement,d=o._threshold,h=this.getInternalMovement(r,this.state),p=u[0]===!1?Lf(h[0],d[0]):u[0],g=u[1]===!1?Lf(h[1],d[1]):u[1],y=this.checkIntentionality([p,g],h);if(y._blocked)return De({},y,{_movement:h,delta:[0,0]});var m=y._intentional,v=h,b=[m[0]!==!1?h[0]-m[0]:0,m[1]!==!1?h[1]-m[1]:0],_=_a(b,c),w=l?i:[0,0];return b=Uf(a,_a(b,s),w),De({},y,{intentional:m[0]!==!1||m[1]!==!1,_initial:s,_movement:v,movement:b,values:r,offset:Uf(a,_,w),delta:Ya(b,f)})},e.clean=function(){this.clearTimeout()},W1(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||f_}}]),t}();function Lf(t,e){return Math.abs(t)>=e?wa(t)*e:!1}function Uf(t,e,n){var r=e[0],i=e[1],o=n[0],a=n[1],s=t[0],l=s[0],u=s[1],c=t[1],f=c[0],d=c[1];return[kf(r,l,u,o),kf(i,f,d,a)]}function ut(t,e,n){var r=t.state,i=e.timeStamp,o=e.type,a=r.values,s=n?0:i-r.startTime;return{_lastEventType:o,event:e,timeStamp:i,elapsedTime:s,previous:a}}function cr(t,e,n,r){var i=t.state,o=t.config,a=t.stateKey,s=t.args,l=t.transform,u=i.offset,c=n.timeStamp,f=o.initial,d=o.bounds,h=o.threshold,p=Ya(l(h),l([0,0])).map(Math.abs),g=De({},up()[a],{_active:!0,args:s,values:e,initial:r??e,_threshold:p,offset:u,lastOffset:u,startTime:c});return De({},g,{_initial:xa(f,g),_bounds:xa(d,g)})}var d_=function(e){var n=this;this.classes=e,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=op(),this.supportsGestureEvents=X1(),this.bind=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];for(var a={},s=Xa(n.classes),l;!(l=s()).done;){var u=l.value;new u(n,i).addBindings(a)}var c=function(h){Ze(a,h,function(p){return n.nativeRefs[h](De({},n.state.shared,{event:p,args:i}))})};for(var f in n.nativeRefs)c(f);return n.config.domTarget?g_(n,a):y_(n,a)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var r=pp(n.config),i=n.config.eventOptions;r&&ho(r,hp(n.domListeners),i),Object.values(n.timeouts).forEach(clearTimeout),h_(n)},this.classes=e,this.state=up(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function fp(t,e){"pointerId"in e?t.pointerIds.add(e.pointerId):t.touchIds=new Set(Eu(e))}function dp(t,e){"pointerId"in e?t.pointerIds.delete(e.pointerId):Eu(e).forEach(function(n){return t.touchIds.delete(n)})}function h_(t){var e=t.config,n=e.window,r=e.eventOptions,i=t.windowListeners;if(n){for(var o in i){var a=i[o];ho(n,a,r)}t.windowListeners={}}}function p_(t,e,n){var r=t.config,i=t.windowListeners;n===void 0&&(n=r.eventOptions),r.window&&(ho(r.window,i[e],n),delete i[e])}function m_(t,e,n,r){var i=t.config,o=t.windowListeners;n===void 0&&(n=[]),r===void 0&&(r=i.eventOptions),i.window&&(ho(i.window,o[e],r),mp(i.window,o[e]=n,r))}function g_(t,e){var n=t.config,r=t.domListeners,i=pp(n);if(!i)throw new Error("domTarget must be defined");var o=n.eventOptions;ho(i,hp(r),o);for(var a=0,s=Object.entries(e);a<s.length;a++){var l=s[a],u=l[0],c=l[1],f=u.slice(2).toLowerCase();r.push([f,ip.apply(void 0,c)])}mp(i,r,o)}function y_(t,e){for(var n=t.config,r={},i=n.eventOptions.capture?"Capture":"",o=0,a=Object.entries(e);o<a.length;o++){var s=a[o],l=s[0],u=s[1],c=Array.isArray(u)?u:[u],f=l+i;r[f]=ip.apply(void 0,c)}return r}function hp(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function pp(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function Ze(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function mp(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=Xa(e),i;!(i=r()).done;){var o=i.value,a=o[0],s=o[1];t.addEventListener(a,s,n)}}function ho(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=Xa(e),i;!(i=r()).done;){var o=i.value,a=o[0],s=o[1];t.removeEventListener(a,s,n)}}function v_(t,e,n){n===void 0&&(n={});var r=__(t),i=Ic.useMemo(function(){return new d_(r)},[]);return i.config=e,i.handlers=t,i.nativeRefs=n,Ic.useEffect(i.effect,[]),i.config.domTarget?b_:i.bind}function b_(){}function __(t){var e=new Set;return t.drag&&e.add(Wt.get("drag")),t.wheel&&e.add(Wt.get("wheel")),t.scroll&&e.add(Wt.get("scroll")),t.move&&e.add(Wt.get("move")),t.pinch&&e.add(Wt.get("pinch")),t.hover&&e.add(Wt.get("hover")),e}var Ka=function(t){gr(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(i,o){return Ya(i,o.initial)},n.checkIntentionality=function(i,o){if(i[0]===!1&&i[1]===!1)return{_intentional:i,axis:this.state.axis};var a=o.map(Math.abs),s=a[0],l=a[1],u=this.state.axis||(s>l?"x":s<l?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:i,_blocked:!1,axis:u}:u?this.config.axis&&u!==this.config.axis?{_intentional:i,_blocked:!0,axis:u}:(i[u==="x"?1:0]=!1,{_intentional:i,_blocked:!1,axis:u}):{_intentional:[!1,!1],_blocked:!1,axis:u}},n.getKinematics=function(i,o){var a=this.getMovement(i);if(!a._blocked){var s=o.timeStamp-this.state.timeStamp;Object.assign(a,np(a.movement,a.delta,s))}return a},n.mapStateValues=function(i){return{xy:i.values,vxvy:i.velocities}},e}(cp),w_=3;function Vf(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}var x_=function(t){gr(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="dragging",r.stateKey="drag",r.setPointerCapture=function(i){if(!(r.config.useTouch||document.pointerLockElement)){var o=i.target,a=i.pointerId;o&&"setPointerCapture"in o&&o.setPointerCapture(a),r.updateGestureState({_dragTarget:o,_dragPointerId:a})}},r.releasePointerCapture=function(){if(!(r.config.useTouch||document.pointerLockElement)){var i=r.state,o=i._dragTarget,a=i._dragPointerId;if(a&&o&&"releasePointerCapture"in o&&(!("hasPointerCapture"in o)||o.hasPointerCapture(a)))try{o.releasePointerCapture(a)}catch{}}},r.preventScroll=function(i){r.state._dragPreventScroll&&i.cancelable&&i.preventDefault()},r.getEventId=function(i){return r.config.useTouch?i.changedTouches[0].identifier:i.pointerId},r.isValidEvent=function(i){return r.state._pointerId===r.getEventId(i)},r.shouldPreventWindowScrollY=r.config.experimental_preventWindowScrollY&&r.controller.supportsTouchEvents,r.setUpWindowScrollDetection=function(i){Vf(i),m_(r.controller,r.stateKey,[["touchmove",r.preventScroll],["touchend",r.clean.bind(Le(r))],["touchcancel",r.clean.bind(Le(r))]],{passive:!1}),r.setTimeout(r.startDrag.bind(Le(r)),250,i)},r.setUpDelayedDragTrigger=function(i){r.state._dragDelayed=!0,Vf(i),r.setTimeout(r.startDrag.bind(Le(r)),r.config.delay,i)},r.setStartState=function(i){var o=Cr(i,r.transform);r.updateSharedState($t(i)),r.updateGestureState(De({},cr(Le(r),o,i),ut(Le(r),i,!0),{_pointerId:r.getEventId(i)})),r.updateGestureState(r.getMovement(o))},r.onDragStart=function(i){fp(r.controller,i),!(!r.enabled||r.state._active)&&(r.setStartState(i),r.setPointerCapture(i),r.shouldPreventWindowScrollY?r.setUpWindowScrollDetection(i):r.config.delay>0?r.setUpDelayedDragTrigger(i):r.startDrag(i,!0))},r.onDragChange=function(i){if(!(r.state.canceled||!r.state._active||!r.isValidEvent(i)||r.state._lastEventType===i.type&&i.timeStamp===r.state.timeStamp)){var o;if(document.pointerLockElement){var a=i.movementX,s=i.movementY;o=_a(r.transform([a,s]),r.state.values)}else o=Cr(i,r.transform);var l=r.getKinematics(o,i);if(!r.state._dragStarted){if(r.state._dragDelayed){r.startDrag(i);return}if(r.shouldPreventWindowScrollY)if(!r.state._dragPreventScroll&&l.axis)if(l.axis==="x")r.startDrag(i);else{r.state._active=!1;return}else return;else return}var u=$t(i);r.updateSharedState(u);var c=ut(Le(r),i),f=eo(l._movement),d=r.state._dragIsTap;d&&f>=w_&&(d=!1),r.updateGestureState(De({},c,l,{_dragIsTap:d})),r.fireGestureHandler()}},r.onDragEnd=function(i){if(dp(r.controller,i),!!r.isValidEvent(i)&&(r.clean(),!!r.state._active)){r.state._active=!1;var o=r.state._dragIsTap,a=r.state.velocities,s=a[0],l=a[1],u=r.state.movement,c=u[0],f=u[1],d=r.state._intentional,h=d[0],p=d[1],g=r.config.swipeVelocity,y=g[0],m=g[1],v=r.config.swipeDistance,b=v[0],_=v[1],w=r.config.swipeDuration,E=De({},ut(Le(r),i),r.getMovement(r.state.values)),S=[0,0];E.elapsedTime<w&&(h!==!1&&Math.abs(s)>y&&Math.abs(c)>b&&(S[0]=wa(s)),p!==!1&&Math.abs(l)>m&&Math.abs(f)>_&&(S[1]=wa(l))),r.updateSharedState({buttons:0}),r.updateGestureState(De({},E,{tap:o,swipe:S})),r.fireGestureHandler(r.config.filterTaps&&o===!0)}},r.clean=function(){t.prototype.clean.call(Le(r)),r.state._dragStarted=!1,r.releasePointerCapture(),p_(r.controller,r.stateKey)},r.onCancel=function(){r.state.canceled||(r.updateGestureState({canceled:!0,_active:!1}),r.updateSharedState({buttons:0}),setTimeout(function(){return r.fireGestureHandler()},0))},r.onClick=function(i){r.state._dragIsTap||i.stopPropagation()},r}var n=e.prototype;return n.startDrag=function(i,o){o===void 0&&(o=!1),!(!this.state._active||this.state._dragStarted)&&(o||this.setStartState(i),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},n.addBindings=function(i){if(this.config.useTouch?(Ze(i,"onTouchStart",this.onDragStart),Ze(i,"onTouchMove",this.onDragChange),Ze(i,"onTouchEnd",this.onDragEnd),Ze(i,"onTouchCancel",this.onDragEnd)):(Ze(i,"onPointerDown",this.onDragStart),Ze(i,"onPointerMove",this.onDragChange),Ze(i,"onPointerUp",this.onDragEnd),Ze(i,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";Ze(i,o,this.onClick)}},e}(Ka),E_=function(t){gr(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(i,o){var a=o.values[1],s=i[0],l=i[1],u=l===void 0?a:l,c=u-a,f=o.turns;return Math.abs(c)>270&&(f+=wa(c)),Ya([s,u-360*f],o.initial)},n.getKinematics=function(i,o){var a=this.getMovement(i),s=(i[1]-a._movement[1]-this.state.initial[1])/360,l=o.timeStamp-this.state.timeStamp,u=np(a.movement,a.delta,l),c=H1(u,["distance","velocity"]);return De({turns:s},a,c)},n.mapStateValues=function(i){return{da:i.values,vdva:i.velocities}},e}(cp),T_=7,S_=260,A_=function(t){gr(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="pinching",r.stateKey="pinch",r.onPinchStart=function(i){fp(r.controller,i);var o=r.controller.touchIds;if(r.enabled&&!(r.state._active&&r.state._pointerIds.every(function(c){return o.has(c)}))&&!(o.size<2)){var a=Array.from(o).slice(0,2),s=Mf(i,a,r.transform),l=s.values,u=s.origin;r.updateSharedState($t(i)),r.updateGestureState(De({},cr(Le(r),l,i),ut(Le(r),i,!0),{_pointerIds:a,cancel:r.onCancel,origin:u})),r.updateGestureState(r.getMovement(l)),r.fireGestureHandler()}},r.onPinchChange=function(i){var o=r.state,a=o.canceled,s=o._active;if(!(a||!s||i.timeStamp===r.state.timeStamp)){var l=$t(i);r.updateSharedState(l);try{var u=Mf(i,r.state._pointerIds,r.transform),c=u.values,f=u.origin,d=r.getKinematics(c,i);r.updateGestureState(De({},ut(Le(r),i),d,{origin:f})),r.fireGestureHandler()}catch{r.onPinchEnd(i)}}},r.onPinchEnd=function(i){dp(r.controller,i);var o=Eu(i);r.state._pointerIds.every(function(a){return!o.includes(a)})||(r.clean(),r.state._active&&(r.updateGestureState(De({},ut(Le(r),i),r.getMovement(r.state.values),{_active:!1})),r.fireGestureHandler()))},r.onCancel=function(){r.state.canceled||(r.updateGestureState({_active:!1,canceled:!0}),setTimeout(function(){return r.fireGestureHandler()},0))},r.onGestureStart=function(i){if(r.enabled){i.preventDefault();var o=If(i,r.transform);r.updateSharedState($t(i)),r.updateGestureState(De({},cr(Le(r),o,i),ut(Le(r),i,!0),{origin:[i.clientX,i.clientY],cancel:r.onCancel})),r.updateGestureState(r.getMovement(o)),r.fireGestureHandler()}},r.onGestureChange=function(i){var o=r.state,a=o.canceled,s=o._active;if(!(a||!s)){i.preventDefault();var l=$t(i);r.updateSharedState(l);var u=If(i,r.transform);u[0]=(u[0]-r.state.event.scale)*S_+r.state.values[0];var c=r.getKinematics(u,i);r.updateGestureState(De({},ut(Le(r),i),c,{origin:[i.clientX,i.clientY]})),r.fireGestureHandler()}},r.onGestureEnd=function(i){r.clean(),r.state._active&&(r.updateGestureState(De({},ut(Le(r),i),r.getMovement(r.state.values),{_active:!1,origin:[i.clientX,i.clientY]})),r.fireGestureHandler())},r.wheelShouldRun=function(i){return r.enabled&&i.ctrlKey},r.getWheelValuesFromEvent=function(i){var o=sp(i,r.transform),a=o[1],s=r.state.values,l=s[0],u=s[1],c=-a*T_,f=l+c,d=u!==void 0?u:0;return{values:[f,d],origin:[i.clientX,i.clientY],delta:[c,d]}},r.onWheel=function(i){r.wheelShouldRun(i)&&(r.setTimeout(r.onWheelEnd),r.state._active?r.onWheelChange(i):r.onWheelStart(i))},r.onWheelStart=function(i){var o=r.getWheelValuesFromEvent(i),a=o.values,s=o.delta,l=o.origin;i.cancelable&&i.preventDefault(),r.updateSharedState($t(i)),r.updateGestureState(De({},cr(Le(r),a,i,r.state.values),ut(Le(r),i,!0),{offset:a,delta:s,origin:l})),r.updateGestureState(r.getMovement(a)),r.fireGestureHandler()},r.onWheelChange=function(i){i.cancelable&&i.preventDefault(),r.updateSharedState($t(i));var o=r.getWheelValuesFromEvent(i),a=o.values,s=o.origin,l=o.delta;r.updateGestureState(De({},ut(Le(r),i),r.getKinematics(a,i),{origin:s,delta:l})),r.fireGestureHandler()},r.onWheelEnd=function(){r.clean(),r.state._active&&(r.state._active=!1,r.updateGestureState(r.getMovement(r.state.values)),r.fireGestureHandler())},r}var n=e.prototype;return n.addBindings=function(i){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(Ze(i,"onGestureStart",this.onGestureStart),Ze(i,"onGestureChange",this.onGestureChange),Ze(i,"onGestureEnd",this.onGestureEnd)):(Ze(i,"onTouchStart",this.onPinchStart),Ze(i,"onTouchMove",this.onPinchChange),Ze(i,"onTouchEnd",this.onPinchEnd),Ze(i,"onTouchCancel",this.onPinchEnd),Ze(i,"onWheel",this.onWheel))},e}(E_),k_=function(t){gr(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="wheeling",r.stateKey="wheel",r.debounced=!0,r.handleEvent=function(i){if(!(i.ctrlKey&&"pinch"in r.controller.handlers)&&r.enabled){r.setTimeout(r.onEnd),r.updateSharedState($t(i));var o=_a(sp(i,r.transform),r.state.values);if(r.state._active)r.updateGestureState(De({},ut(Le(r),i),r.getKinematics(o,i)));else{r.updateGestureState(De({},cr(Le(r),o,i,r.state.values),ut(Le(r),i,!0)));var a=r.getMovement(o),s=tp(a.delta);r.updateGestureState(a),r.updateGestureState(s)}r.fireGestureHandler()}},r.onEnd=function(){if(r.clean(),!!r.state._active){var i=r.getMovement(r.state.values);r.updateGestureState(i),r.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),r.fireGestureHandler()}},r}var n=e.prototype;return n.addBindings=function(i){Ze(i,"onWheel",this.handleEvent)},e}(Ka),Ff=function(t){gr(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="moving",r.stateKey="move",r.debounced=!0,r.onMove=function(i){r.enabled&&(r.setTimeout(r.onMoveEnd),r.state._active?r.onMoveChange(i):r.onMoveStart(i))},r.onMoveStart=function(i){r.updateSharedState($t(i));var o=Cr(i,r.transform);r.updateGestureState(De({},cr(Le(r),o,i),ut(Le(r),i,!0))),r.updateGestureState(r.getMovement(o)),r.fireGestureHandler()},r.onMoveChange=function(i){r.updateSharedState($t(i));var o=Cr(i,r.transform);r.updateGestureState(De({},ut(Le(r),i),r.getKinematics(o,i))),r.fireGestureHandler()},r.onMoveEnd=function(){if(r.clean(),!!r.state._active){var i=r.state.values;r.updateGestureState(r.getMovement(i)),r.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),r.fireGestureHandler()}},r.hoverTransform=function(){return r.controller.config.hover.transform||r.controller.config.transform},r.onPointerEnter=function(i){if(r.controller.state.shared.hovering=!0,!!r.controller.config.enabled){if(r.controller.config.hover.enabled){var o=Cr(i,r.hoverTransform()),a=De({},r.controller.state.shared,r.state,ut(Le(r),i,!0),{args:r.args,values:o,active:!0,hovering:!0});r.controller.handlers.hover(De({},a,r.mapStateValues(a)))}"move"in r.controller.handlers&&r.onMoveStart(i)}},r.onPointerLeave=function(i){if(r.controller.state.shared.hovering=!1,"move"in r.controller.handlers&&r.onMoveEnd(),!!r.controller.config.hover.enabled){var o=Cr(i,r.hoverTransform()),a=De({},r.controller.state.shared,r.state,ut(Le(r),i),{args:r.args,values:o,active:!1});r.controller.handlers.hover(De({},a,r.mapStateValues(a)))}},r}var n=e.prototype;return n.addBindings=function(i){"move"in this.controller.handlers&&Ze(i,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(Ze(i,"onPointerEnter",this.onPointerEnter),Ze(i,"onPointerLeave",this.onPointerLeave))},e}(Ka),O_=function(t){gr(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="scrolling",r.stateKey="scroll",r.debounced=!0,r.handleEvent=function(i){if(r.enabled){r.clearTimeout(),r.setTimeout(r.onEnd);var o=Z1(i,r.transform);if(r.updateSharedState($t(i)),r.state._active)r.updateGestureState(De({},ut(Le(r),i),r.getKinematics(o,i)));else{r.updateGestureState(De({},cr(Le(r),o,i,r.state.values),ut(Le(r),i,!0)));var a=r.getMovement(o),s=tp(a.delta);r.updateGestureState(a),r.updateGestureState(s)}r.fireGestureHandler()}},r.onEnd=function(){r.clean(),r.state._active&&(r.updateGestureState(De({},r.getMovement(r.state.values),{_active:!1,velocities:[0,0],velocity:0})),r.fireGestureHandler())},r}var n=e.prototype;return n.addBindings=function(i){Ze(i,"onScroll",this.handleEvent)},e}(Ka),D_=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function C_(t){var e={},n={},r=new Set;for(var i in t)D_.test(i)?(r.add(RegExp.lastMatch),n[i]=t[i]):e[i]=t[i];return[n,e,r]}function M_(t,e){e===void 0&&(e={});var n=C_(t),r=n[0],i=n[1],o=n[2];Wt.set("drag",x_),Wt.set("hover",Ff),Wt.set("move",Ff),Wt.set("pinch",A_),Wt.set("scroll",O_),Wt.set("wheel",k_);var a=c_(e,o),s={};return o.has("onDrag")&&(s.drag=yi(r,"onDrag")),o.has("onWheel")&&(s.wheel=yi(r,"onWheel")),o.has("onScroll")&&(s.scroll=yi(r,"onScroll")),o.has("onMove")&&(s.move=yi(r,"onMove")),o.has("onPinch")&&(s.pinch=yi(r,"onPinch")),o.has("onHover")&&(s.hover=r.onHover),v_(s,a,i)}function yi(t,e){var n=e+"Start",r=e+"End",i=function(a){var s=void 0;return a.first&&n in t&&t[n](a),e in t&&(s=t[e](a)),a.last&&r in t&&t[r](a),s};return i}const P_=({draggable:t,set:e,position:n,onDragStart:r,onDragEnd:i})=>{const o=lt(g=>g.camera),a=lt(g=>g.raycaster),s=lt(g=>g.size),l=lt(g=>g.gl),{mouse2D:u,mouse3D:c,offset:f,normal:d,plane:h}=R.useMemo(()=>({mouse2D:new Oe,mouse3D:new _e,offset:new _e,normal:new _e,plane:new hg}),[]),p=R.useMemo(()=>l.domElement.getBoundingClientRect(),[l.domElement]);return M_({onDragStart:({event:g})=>{const{eventObject:y,point:m}=g;y.getWorldPosition(f).sub(m),c.copy(m),r()},onDrag:({event:g})=>{const y=(g.clientX-((p==null?void 0:p.left)??0))/s.width*2-1,m=-((g.clientY-((p==null?void 0:p.top)??0))/s.height)*2+1;u.set(y,m),a.setFromCamera(u,o),o.getWorldDirection(d).negate(),h.setFromNormalAndCoplanarPoint(d,c),a.ray.intersectPlane(h,c);const v=new _e(n.x,n.y,n.z).copy(c).add(f);return e(v)},onDragEnd:i},{drag:{enabled:t,threshold:10}})};var Yr={};function xn(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(xn.prototype[Symbol.iterator]=function(){return this});xn.of=function(){var t=arguments,e=t.length,n=0;return new xn(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};xn.empty=function(){var t=new xn(function(){return{done:!0}});return t};xn.fromSequence=function(t){var e=0,n=t.length;return new xn(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};xn.is=function(t){return t instanceof xn?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Za=xn;const Zt=Qt(Za);var Qa={};Qa.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Qa.SYMBOL_SUPPORT=typeof Symbol<"u";var gp=Qa,R_=gp.ARRAY_BUFFER_SUPPORT,I_=gp.SYMBOL_SUPPORT,Su=function(e,n){var r,i,o,a,s;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||R_&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(o=0,a=e.length;o<a;o++)n(e[o],o);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(I_&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,o=0;s=r.next(),s.done!==!0;)n(s.value,o),o++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)},yp=Za,L_=Su;function it(){this.clear()}it.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};it.prototype.enqueue=function(t){return this.items.push(t),++this.size};it.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};it.prototype.peek=function(){if(this.size)return this.items[this.offset]};it.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};it.prototype.toArray=function(){return this.items.slice(this.offset)};it.prototype.values=function(){var t=this.items,e=this.offset;return new yp(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};it.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new yp(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=it.prototype.values);it.prototype.toString=function(){return this.toArray().join(",")};it.prototype.toJSON=function(){return this.toArray()};it.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:it,enumerable:!1}),t};typeof Symbol<"u"&&(it.prototype[Symbol.for("nodejs.util.inspect.custom")]=it.prototype.inspect);it.from=function(t){var e=new it;return L_(t,function(n){e.enqueue(n)}),e};it.of=function(){return it.from(arguments)};var U_=it,V_=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var o=0;o<r;o++)e[i+o]=n[o]}},Au=Kn,F_=U_,G_=V_;function z_(t,e,n){if(!Au(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),o={},a={};o[e]=null,a[n]=null;var s=[e],l=[n],u,c,f,d,h,p,g,y,m=!1;e:for(;s.length&&l.length;)if(s.length<=l.length){for(u=s,s=[],h=0,g=u.length;h<g;h++)for(c=u[h],f=i(c),p=0,y=f.length;p<y;p++)if(d=f[p],d in o||(s.push(d),o[d]=c),d in a){m=!0;break e}}else for(u=l,l=[],h=0,g=u.length;h<g;h++)for(c=u[h],f=r(c),p=0,y=f.length;p<y;p++)if(d=f[p],d in a||(l.push(d),a[d]=c),d in o){m=!0;break e}if(!m)return null;for(var v=[];d;)v.unshift(d),d=o[d];for(d=a[v[v.length-1]];d;)v.push(d),d=a[d];return v.length?v:null}function j_(t,e){if(!Au(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');e=""+e;var n={},r={},i,o,a,s,l,u;for(n[e]=!0,r[e]=[e];Object.keys(n).length;){i=n,n={};for(a in i)for(o=t.outboundNeighbors(a),l=0,u=o.length;l<u;l++)s=o[l],r[s]||(r[s]=r[a].concat(s),n[s]=!0)}return r}function vp(t,e,n){if(!Au(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},o=0;i[n]=0;for(var a=[n],s,l,u;a.length!==0;){var c=[];for(s=0,l=a.length;s<l;s++)u=a[s],!r.has(u)&&(r.add(u),G_(c,e[t](u)),i[u]=o);o++,a=c}return i}var N_=vp.bind(null,"outboundNeighbors"),q_=vp.bind(null,"neighbors");function B_(t,e){e=""+e;var n=[],r={},i={},o=t.nodes(),a,s,l,u,c,f,d,h,p;for(f=0,h=o.length;f<h;f++)u=o[f],r[u]=[],i[u]=0;var g={};i[e]=1,g[e]=0;for(var y=F_.of(e);y.size;)for(u=y.dequeue(),n.push(u),a=g[u],s=i[u],l=t.outboundNeighbors(u),d=0,p=l.length;d<p;d++)c=l[d],c in g||(y.enqueue(c),g[c]=a+1),g[c]===a+1&&(i[c]+=s,r[c].push(u));return[n,r,i]}Yr.bidirectional=z_;Yr.singleSource=j_;Yr.singleSourceLength=N_;Yr.undirectedSingleSourceLength=q_;Yr.brandes=B_;var ku={},po={},$_=function(t,e){return t<e?-1:t>e?1:0},W_=function(t,e){return t<e?1:t>e?-1:0};function H_(t){return function(e,n){return t(n,e)}}function Y_(t){return t===2?function(e,n){return e[0]<n[0]?-1:e[0]>n[0]?1:e[1]<n[1]?-1:e[1]>n[1]?1:0}:function(e,n){for(var r=0;r<t;){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1;r++}return 0}}po.DEFAULT_COMPARATOR=$_;po.DEFAULT_REVERSE_COMPARATOR=W_;po.reverseComparator=H_;po.createTupleComparator=Y_;var mo={},bp=Su,_p=gu;function X_(t){return Array.isArray(t)||_p.isTypedArray(t)}function Ou(t){if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size}function K_(t){var e=Ou(t),n=typeof e=="number"?new Array(e):[],r=0;return bp(t,function(i){n[r++]=i}),n}function Z_(t){var e=Ou(t),n=typeof e=="number"?_p.getPointerArray(e):Array,r=typeof e=="number"?new Array(e):[],i=typeof e=="number"?new n(e):[],o=0;return bp(t,function(a){r[o]=a,i[o]=o++}),[r,i]}mo.isArrayLike=X_;mo.guessLength=Ou;mo.toArray=K_;mo.toArrayWithIndices=Z_;var Ea=Su,wp=po,wn=mo,Ja=wp.DEFAULT_COMPARATOR,Du=wp.reverseComparator;function Cu(t,e,n,r){for(var i=e[r],o,a;r>n;){if(o=r-1>>1,a=e[o],t(i,a)<0){e[r]=a,r=o;continue}break}e[r]=i}function go(t,e,n){for(var r=e.length,i=n,o=e[n],a=2*n+1,s;a<r;)s=a+1,s<r&&t(e[a],e[s])>=0&&(a=s),e[n]=e[a],n=a,a=2*n+1;e[n]=o,Cu(t,e,i,n)}function xp(t,e,n){e.push(n),Cu(t,e,0,e.length-1)}function Mu(t,e){var n=e.pop();if(e.length!==0){var r=e[0];return e[0]=n,go(t,e,0),r}return n}function jr(t,e,n){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var r=e[0];return e[0]=n,go(t,e,0),r}function Ep(t,e,n){var r;return e.length!==0&&t(e[0],n)<0&&(r=e[0],e[0]=n,n=r,go(t,e,0)),n}function hr(t,e){for(var n=e.length,r=n>>1,i=r;--i>=0;)go(t,e,i)}function Pu(t,e){for(var n=e.length,r=0,i=new Array(n);r<n;)i[r++]=Mu(t,e);return i}function Q_(t,e,n){arguments.length===2&&(n=e,e=t,t=Ja);var r=Du(t),i,o,a,s=1/0,l;if(e===1){if(wn.isArrayLike(n)){for(i=0,o=n.length;i<o;i++)a=n[i],(s===1/0||t(a,s)<0)&&(s=a);return l=new n.constructor(1),l[0]=s,l}return Ea(n,function(c){(s===1/0||t(c,s)<0)&&(s=c)}),[s]}if(wn.isArrayLike(n)){if(e>=n.length)return n.slice().sort(t);for(l=n.slice(0,e),hr(r,l),i=e,o=n.length;i<o;i++)r(n[i],l[0])>0&&jr(r,l,n[i]);return l.sort(t)}var u=wn.guessLength(n);return u!==null&&u<e&&(e=u),l=new Array(e),i=0,Ea(n,function(c){i<e?l[i]=c:(i===e&&hr(r,l),r(c,l[0])>0&&jr(r,l,c)),i++}),l.length>i&&(l.length=i),l.sort(t)}function J_(t,e,n){arguments.length===2&&(n=e,e=t,t=Ja);var r=Du(t),i,o,a,s=-1/0,l;if(e===1){if(wn.isArrayLike(n)){for(i=0,o=n.length;i<o;i++)a=n[i],(s===-1/0||t(a,s)>0)&&(s=a);return l=new n.constructor(1),l[0]=s,l}return Ea(n,function(c){(s===-1/0||t(c,s)>0)&&(s=c)}),[s]}if(wn.isArrayLike(n)){if(e>=n.length)return n.slice().sort(r);for(l=n.slice(0,e),hr(t,l),i=e,o=n.length;i<o;i++)t(n[i],l[0])>0&&jr(t,l,n[i]);return l.sort(r)}var u=wn.guessLength(n);return u!==null&&u<e&&(e=u),l=new Array(e),i=0,Ea(n,function(c){i<e?l[i]=c:(i===e&&hr(t,l),t(c,l[0])>0&&jr(t,l,c)),i++}),l.length>i&&(l.length=i),l.sort(r)}function ze(t){if(this.clear(),this.comparator=t||Ja,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}ze.prototype.clear=function(){this.items=[],this.size=0};ze.prototype.push=function(t){return xp(this.comparator,this.items,t),++this.size};ze.prototype.peek=function(){return this.items[0]};ze.prototype.pop=function(){return this.size!==0&&this.size--,Mu(this.comparator,this.items)};ze.prototype.replace=function(t){return jr(this.comparator,this.items,t)};ze.prototype.pushpop=function(t){return Ep(this.comparator,this.items,t)};ze.prototype.consume=function(){return this.size=0,Pu(this.comparator,this.items)};ze.prototype.toArray=function(){return Pu(this.comparator,this.items.slice())};ze.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:ze,enumerable:!1}),t};typeof Symbol<"u"&&(ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=ze.prototype.inspect);function Ta(t){if(this.clear(),this.comparator=t||Ja,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Du(this.comparator)}Ta.prototype=ze.prototype;ze.from=function(t,e){var n=new ze(e),r;return wn.isArrayLike(t)?r=t.slice():r=wn.toArray(t),hr(n.comparator,r),n.items=r,n.size=r.length,n};Ta.from=function(t,e){var n=new Ta(e),r;return wn.isArrayLike(t)?r=t.slice():r=wn.toArray(t),hr(n.comparator,r),n.items=r,n.size=r.length,n};ze.siftUp=go;ze.siftDown=Cu;ze.push=xp;ze.pop=Mu;ze.replace=jr;ze.pushpop=Ep;ze.heapify=hr;ze.consume=Pu;ze.nsmallest=Q_;ze.nlargest=J_;ze.MinHeap=ze;ze.MaxHeap=Ta;var ew=ze,Tp=Kn,Ru=Wr.createEdgeWeightGetter,Sa=ew,Iu="weight";function Ml(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:0}function tw(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:t[3]>e[3]?1:t[3]<e[3]?-1:0}function nw(t,e,n,r){if(e=""+e,n=""+n,!Tp(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(e&&!t.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" source node does not exist in the given graph.');if(n&&!t.hasNode(n))throw new Error('graphology-shortest-path/dijkstra: the "'+n+'" target node does not exist in the given graph.');if(r=Ru(r||Iu).fromMinimalEntry,e===n)return[0,[e]];var i=[{},{}],o=[{},{}],a=[new Sa(Ml),new Sa(Ml)],s=[{},{}];o[0][e]=[e],o[1][n]=[n],s[0][e]=0,s[1][n]=0;var l=[],u=1/0,c=0,f=1,d,h,p,g,y,m,v,b,_;for(a[0].push([0,c++,e]),a[1].push([0,c++,n]);a[0].size&&a[1].size;)if(f=1-f,d=a[f].pop(),g=d[0],y=d[2],!(y in i[f])){if(i[f][y]=g,y in i[1-f])return[u,l];for(h=f===1?t.inboundEdges(y):t.outboundEdges(y),b=0,_=h.length;b<_;b++){if(v=h[b],m=t.opposite(y,v),p=i[f][y]+r(v,t.getEdgeAttributes(v)),m in i[f]&&p<i[f][m])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(m in s[f])||p<s[f][m])&&(s[f][m]=p,a[f].push([p,c++,m]),o[f][m]=o[f][y].concat(m),m in s[0]&&m in s[1]&&(g=s[0][m]+s[1][m],(l.length===0||u>g)&&(u=g,l=o[0][m].concat(o[1][m].slice(0,-1).reverse()))))}}return[1/0,null]}function rw(t,e,n,r,i,o){if(!Tp(t))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(i&&!t.hasNode(i))throw new Error('graphology-shortest-path/dijkstra: the "'+i+'" target node does not exist in the given graph.');n=Ru(n||Iu).fromMinimalEntry;var a={},s={},l=new Sa(Ml),u=0,c,f,d,h,p,g,y,m,v,b,_;for(m=0,b=e.length;m<b;m++)h=e[m],s[h]=0,l.push([0,u++,h]),o&&(o[h]=[h]);for(;l.size;)if(f=l.pop(),y=f[0],h=f[2],!(h in a)){if(a[h]=y,h===i)break;for(c=t.outboundEdges(h),v=0,_=c.length;v<_;v++)if(g=c[v],p=t.opposite(h,g),d=n(g,t.getEdgeAttributes(g))+a[h],!(r&&d>r)){if(p in a&&d<a[p])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(p in s)||d<s[p])&&(s[p]=d,l.push([d,u++,p]),o&&(o[p]=o[h].concat(p)))}}return a}function iw(t,e,n){var r={};return rw(t,[e],n,0,null,r),r}function ow(t,e,n,r){return nw(t,e,n,r)[1]}function aw(t,e,n){e=""+e,n=Ru(n||Iu).fromMinimalEntry;var r=[],i={},o={},a=t.nodes(),s,l,u,c,f,d,h,p,g,y;for(g=0,y=a.length;g<y;g++)d=a[g],i[d]=[],o[d]=0;var m={};o[e]=1;var v={};v[e]=0;var b=0,_=new Sa(tw);for(_.push([0,b++,e,e]);_.size;)if(l=_.pop(),c=l[0],u=l[2],d=l[3],!(d in m))for(o[d]+=o[u],r.push(d),m[d]=c,s=t.outboundEdges(d),g=0,y=s.length;g<y;g++)p=s[g],h=t.opposite(d,p),f=c+n(p,t.getEdgeAttributes(p)),!(h in m)&&(!(h in v)||f<v[h])?(v[h]=f,_.push([f,b++,d,h]),o[h]=0,i[h]=[d]):f===v[h]&&(o[h]+=o[d],i[h].push(d));return[r,i,o]}ku.bidirectional=ow;ku.singleSource=iw;ku.brandes=aw;var yo=Yr,aS=yo.bidirectional;yo.singleSource;yo.singleSourceLength;yo.undirectedSingleSourceLength;yo.brandes;var Lu={exports:{}},Ir=typeof Reflect=="object"?Reflect:null,Gf=Ir&&typeof Ir.apply=="function"?Ir.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},aa;Ir&&typeof Ir.ownKeys=="function"?aa=Ir.ownKeys:Object.getOwnPropertySymbols?aa=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:aa=function(e){return Object.getOwnPropertyNames(e)};function sw(t){console&&console.warn&&console.warn(t)}var Sp=Number.isNaN||function(e){return e!==e};function je(){je.init.call(this)}Lu.exports=je;Lu.exports.once=fw;je.EventEmitter=je;je.prototype._events=void 0;je.prototype._eventsCount=0;je.prototype._maxListeners=void 0;var zf=10;function es(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(je,"defaultMaxListeners",{enumerable:!0,get:function(){return zf},set:function(t){if(typeof t!="number"||t<0||Sp(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");zf=t}});je.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};je.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Sp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ap(t){return t._maxListeners===void 0?je.defaultMaxListeners:t._maxListeners}je.prototype.getMaxListeners=function(){return Ap(this)};je.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")Gf(l,this,n);else for(var u=l.length,c=Mp(l,u),r=0;r<u;++r)Gf(c[r],this,n);return!0};function kp(t,e,n,r){var i,o,a;if(es(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),a===void 0)a=o[e]=n,++t._eventsCount;else if(typeof a=="function"?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=Ap(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,sw(s)}return t}je.prototype.addListener=function(e,n){return kp(this,e,n,!1)};je.prototype.on=je.prototype.addListener;je.prototype.prependListener=function(e,n){return kp(this,e,n,!0)};function lw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Op(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=lw.bind(r);return i.listener=n,r.wrapFn=i,i}je.prototype.once=function(e,n){return es(n),this.on(e,Op(this,e,n)),this};je.prototype.prependOnceListener=function(e,n){return es(n),this.prependListener(e,Op(this,e,n)),this};je.prototype.removeListener=function(e,n){var r,i,o,a,s;if(es(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():uw(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||n)}return this};je.prototype.off=je.prototype.removeListener;je.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Dp(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?cw(i):Mp(i,i.length)}je.prototype.listeners=function(e){return Dp(this,e,!0)};je.prototype.rawListeners=function(e){return Dp(this,e,!1)};je.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Cp.call(t,e)};je.prototype.listenerCount=Cp;function Cp(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}je.prototype.eventNames=function(){return this._eventsCount>0?aa(this._events):[]};function Mp(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function uw(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function cw(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function fw(t,e){return new Promise(function(n,r){function i(a){t.removeListener(e,o),r(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Pp(t,e,o,{once:!0}),e!=="error"&&dw(t,i,{once:!0})})}function dw(t,e,n){typeof t.on=="function"&&Pp(t,"error",e,n)}function Pp(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var hw=Lu.exports,pw=Za,Rp=Qa,mw=Rp.ARRAY_BUFFER_SUPPORT,gw=Rp.SYMBOL_SUPPORT;function yw(t){return typeof t=="string"||Array.isArray(t)||mw&&ArrayBuffer.isView(t)?pw.fromSequence(t):typeof t!="object"||t===null?null:gw&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var Ip=function(e){var n=yw(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},vw=Ip,bw=function(e,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],o,a=0,s=vw(e);;){if(a===r)return i;if(o=s.next(),o.done)return a!==n&&(i.length=a),i;i[a++]=o.value}};const Lp=Qt(bw);var _w=Za,ww=Ip,xw=function(){var e=arguments,n=null,r=-1;return new _w(function(){var o=null;do{if(n===null){if(r++,r>=e.length)return{done:!0};n=ww(e[r])}if(o=n.next(),o.done===!0){n=null;continue}break}while(!0);return o})};const Pn=Qt(xw);function Ew(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const r in arguments[e])t[r]=arguments[e][r];return t}let ct=Ew;typeof Object.assign=="function"&&(ct=Object.assign);function Xt(t,e,n,r){const i=t._nodes.get(e);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function gt(t){return typeof t=="object"&&t!==null}function Up(t){let e;for(e in t)return!1;return!0}function jt(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function on(t,e,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function jf(t){return!(!gt(t)||t.attributes&&!Array.isArray(t.attributes))}function Tw(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class Uu extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ue extends Uu{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue.prototype.constructor)}}class se extends Uu{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,se.prototype.constructor)}}class ye extends Uu{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ye.prototype.constructor)}}function Vp(t,e){this.key=t,this.attributes=e,this.clear()}Vp.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Fp(t,e){this.key=t,this.attributes=e,this.clear()}Fp.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Gp(t,e){this.key=t,this.attributes=e,this.clear()}Gp.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Xr(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}Xr.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};Xr.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");const i=this.source[t],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this};Xr.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};Xr.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const zp=0,jp=1,Sw=2,Np=3;function Ln(t,e,n,r,i,o,a){let s,l,u,c;if(r=""+r,n===zp){if(s=t._nodes.get(r),!s)throw new se(`Graph.${e}: could not find the "${r}" node in the graph.`);u=i,c=o}else if(n===Np){if(i=""+i,l=t._edges.get(i),!l)throw new se(`Graph.${e}: could not find the "${i}" edge in the graph.`);const f=l.source.key,d=l.target.key;if(r===f)s=l.target;else if(r===d)s=l.source;else throw new se(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${f}, ${d}).`);u=o,c=a}else{if(l=t._edges.get(r),!l)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===jp?s=l.source:s=l.target,u=i,c=o}return[s,u,c]}function Aw(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=Ln(this,e,n,r,i,o);return a.attributes[s]}}function kw(t,e,n){t.prototype[e]=function(r,i){const[o]=Ln(this,e,n,r,i);return o.attributes}}function Ow(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=Ln(this,e,n,r,i,o);return a.attributes.hasOwnProperty(s)}}function Dw(t,e,n){t.prototype[e]=function(r,i,o,a){const[s,l,u]=Ln(this,e,n,r,i,o,a);return s.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function Cw(t,e,n){t.prototype[e]=function(r,i,o,a){const[s,l,u]=Ln(this,e,n,r,i,o,a);if(typeof u!="function")throw new ue(`Graph.${e}: updater should be a function.`);const c=s.attributes,f=u(c[l]);return c[l]=f,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function Mw(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=Ln(this,e,n,r,i,o);return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}function Pw(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=Ln(this,e,n,r,i,o);if(!gt(s))throw new ue(`Graph.${e}: provided attributes are not a plain object.`);return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Rw(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=Ln(this,e,n,r,i,o);if(!gt(s))throw new ue(`Graph.${e}: provided attributes are not a plain object.`);return ct(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}function Iw(t,e,n){t.prototype[e]=function(r,i,o){const[a,s]=Ln(this,e,n,r,i,o);if(typeof s!="function")throw new ue(`Graph.${e}: provided updater is not a function.`);return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Lw=[{name:t=>`get${t}Attribute`,attacher:Aw},{name:t=>`get${t}Attributes`,attacher:kw},{name:t=>`has${t}Attribute`,attacher:Ow},{name:t=>`set${t}Attribute`,attacher:Dw},{name:t=>`update${t}Attribute`,attacher:Cw},{name:t=>`remove${t}Attribute`,attacher:Mw},{name:t=>`replace${t}Attributes`,attacher:Pw},{name:t=>`merge${t}Attributes`,attacher:Rw},{name:t=>`update${t}Attributes`,attacher:Iw}];function Uw(t){Lw.forEach(function({name:e,attacher:n}){n(t,e("Node"),zp),n(t,e("Source"),jp),n(t,e("Target"),Sw),n(t,e("Opposite"),Np)})}function Vw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Xt(this,a,s,n),!o)throw new se(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function Fw(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+arguments[1];if(i=Xt(this,o,a,n),!i)throw new se(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Gw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Xt(this,a,s,n),!o)throw new se(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function zw(t,e,n){t.prototype[e]=function(r,i,o){let a;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+i;if(i=arguments[2],o=arguments[3],a=Xt(this,s,l,n),!a)throw new se(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return a.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:i}),this}}function jw(t,e,n){t.prototype[e]=function(r,i,o){let a;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,l=""+i;if(i=arguments[2],o=arguments[3],a=Xt(this,s,l,n),!a)throw new se(`Graph.${e}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new ue(`Graph.${e}: updater should be a function.`);return a.attributes[i]=o(a.attributes[i]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:i}),this}}function Nw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Xt(this,a,s,n),!o)throw new se(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function qw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Xt(this,a,s,n),!o)throw new se(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!gt(i))throw new ue(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Bw(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Xt(this,a,s,n),!o)throw new se(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!gt(i))throw new ue(`Graph.${e}: provided attributes are not a plain object.`);return ct(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function $w(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+i;if(i=arguments[2],o=Xt(this,a,s,n),!o)throw new se(`Graph.${e}: could not find an edge for the given path ("${a}" - "${s}").`)}else{if(n!=="mixed")throw new ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new se(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new ue(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Ww=[{name:t=>`get${t}Attribute`,attacher:Vw},{name:t=>`get${t}Attributes`,attacher:Fw},{name:t=>`has${t}Attribute`,attacher:Gw},{name:t=>`set${t}Attribute`,attacher:zw},{name:t=>`update${t}Attribute`,attacher:jw},{name:t=>`remove${t}Attribute`,attacher:Nw},{name:t=>`replace${t}Attributes`,attacher:qw},{name:t=>`merge${t}Attributes`,attacher:Bw},{name:t=>`update${t}Attributes`,attacher:$w}];function Hw(t){Ww.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Yw=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Xw(t,e,n,r){let i=!1;for(const o in e){if(o===r)continue;const a=e[o];if(i=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&i)return a.key}}function Kw(t,e,n,r){let i,o,a,s=!1;for(const l in e)if(l!==r){i=e[l];do{if(o=i.source,a=i.target,s=n(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),t&&s)return i.key;i=i.next}while(i!==void 0)}}function Ks(t,e){const n=Object.keys(t),r=n.length;let i,o=0;return new Zt(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const s=n[o++];if(s===e){i=void 0;continue}i=t[s]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Zw(t,e,n,r){const i=e[n];if(!i)return;const o=i.source,a=i.target;if(r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&t)return i.key}function Qw(t,e,n,r){let i=e[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(i!==void 0)}function Zs(t,e){let n=t[e];return n.next!==void 0?new Zt(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Zt.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Jw(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):Lp(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",o=t._edges.values();let a=0,s,l;for(;s=o.next(),s.done!==!0;)l=s.value,l.undirected===i&&(r[a++]=l.key);return r}function qp(t,e,n,r){if(e.size===0)return;const i=n!=="mixed"&&n!==e.type,o=n==="undirected";let a,s,l=!1;const u=e._edges.values();for(;a=u.next(),a.done!==!0;){if(s=a.value,i&&s.undirected!==o)continue;const{key:c,attributes:f,source:d,target:h}=s;if(l=r(c,f,d.key,h.key,d.attributes,h.attributes,s.undirected),t&&l)return c}}function ex(t,e){if(t.size===0)return Zt.empty();const n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return new Zt(function(){let a,s;for(;;){if(a=i.next(),a.done)return a;if(s=a.value,!(n&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function Vu(t,e,n,r,i,o){const a=e?Kw:Xw;let s;if(n!=="undirected"&&(r!=="out"&&(s=a(t,i.in,o),t&&s)||r!=="in"&&(s=a(t,i.out,o,r?void 0:i.key),t&&s))||n!=="directed"&&(s=a(t,i.undirected,o),t&&s))return s}function tx(t,e,n,r){const i=[];return Vu(!1,t,e,n,r,function(o){i.push(o)}),i}function nx(t,e,n){let r=Zt.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Pn(r,Ks(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Pn(r,Ks(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Pn(r,Ks(n.undirected))),r}function Fu(t,e,n,r,i,o,a){const s=n?Qw:Zw;let l;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(l=s(t,i.in,o,a),t&&l)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(l=s(t,i.out,o,a),t&&l))||e!=="directed"&&typeof i.undirected<"u"&&(l=s(t,i.undirected,o,a),t&&l))return l}function rx(t,e,n,r,i){const o=[];return Fu(!1,t,e,n,r,i,function(a){o.push(a)}),o}function ix(t,e,n,r){let i=Zt.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Pn(i,Zs(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Pn(i,Zs(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Pn(i,Zs(n.undirected,r))),i}function ox(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Jw(this,r);if(arguments.length===1){o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new se(`Graph.${n}: could not find the "${o}" node in the graph.`);return tx(this.multi,r==="mixed"?this.type:r,i,s)}if(arguments.length===2){o=""+o,a=""+a;const s=this._nodes.get(o);if(!s)throw new se(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new se(`Graph.${n}:  could not find the "${a}" target node in the graph.`);return rx(r,this.multi,i,s,a)}throw new ue(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ax(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(u,c,f){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return f=u,qp(!1,this,r,f);if(arguments.length===2){u=""+u,f=c;const d=this._nodes.get(u);if(typeof d>"u")throw new se(`Graph.${o}: could not find the "${u}" node in the graph.`);return Vu(!1,this.multi,r==="mixed"?this.type:r,i,d,f)}if(arguments.length===3){u=""+u,c=""+c;const d=this._nodes.get(u);if(!d)throw new se(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new se(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return Fu(!1,r,this.multi,i,d,c,f)}throw new ue(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let f;if(u.length===0){let d=0;r!=="directed"&&(d+=this.undirectedSize),r!=="undirected"&&(d+=this.directedSize),f=new Array(d);let h=0;u.push((p,g,y,m,v,b,_)=>{f[h++]=c(p,g,y,m,v,b,_)})}else f=[],u.push((d,h,p,g,y,m,v)=>{f.push(c(d,h,p,g,y,m,v))});return this[o].apply(this,u),f};const s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),f=[];return u.push((d,h,p,g,y,m,v)=>{c(d,h,p,g,y,m,v)&&f.push(d)}),this[o].apply(this,u),f};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new ue(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new ue(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,f;u.length===2?(c=u[0],f=u[1],u=[]):u.length===3?(c=u[1],f=u[2],u=[u[0]]):u.length===4&&(c=u[2],f=u[3],u=[u[0],u[1]]);let d=f;return u.push((h,p,g,y,m,v,b)=>{d=c(d,h,p,g,y,m,v,b)}),this[o].apply(this,u),d}}function sx(t,e){const{name:n,type:r,direction:i}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(l,u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return c=l,qp(!0,this,r,c);if(arguments.length===2){l=""+l,c=u;const f=this._nodes.get(l);if(typeof f>"u")throw new se(`Graph.${o}: could not find the "${l}" node in the graph.`);return Vu(!0,this.multi,r==="mixed"?this.type:r,i,f,c)}if(arguments.length===3){l=""+l,u=""+u;const f=this._nodes.get(l);if(!f)throw new se(`Graph.${o}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new se(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return Fu(!0,r,this.multi,i,f,u,c)}throw new ue(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((f,d,h,p,g,y,m)=>u(f,d,h,p,g,y,m)),!!this[o].apply(this,l)};const s="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((f,d,h,p,g,y,m)=>!u(f,d,h,p,g,y,m)),!this[o].apply(this,l)}}function lx(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Zt.empty();if(!arguments.length)return ex(this,r);if(arguments.length===1){a=""+a;const l=this._nodes.get(a);if(!l)throw new se(`Graph.${o}: could not find the "${a}" node in the graph.`);return nx(r,i,l)}if(arguments.length===2){a=""+a,s=""+s;const l=this._nodes.get(a);if(!l)throw new se(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new se(`Graph.${o}:  could not find the "${s}" target node in the graph.`);return ix(r,i,l,s)}throw new ue(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ux(t){Yw.forEach(e=>{ox(t,e),ax(t,e),sx(t,e),lx(t,e)})}const cx=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ts(){this.A=null,this.B=null}ts.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};ts.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function vi(t,e,n,r,i){for(const o in r){const a=r[o],s=a.source,l=a.target,u=s===n?l:s;if(e&&e.has(u.key))continue;const c=i(u.key,u.attributes);if(t&&c)return u.key}}function Gu(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return vi(t,null,r,r.undirected,i);if(typeof n=="string")return vi(t,null,r,r[n],i)}const o=new ts;let a;if(e!=="undirected"){if(n!=="out"){if(a=vi(t,null,r,r.in,i),t&&a)return a;o.wrap(r.in)}if(n!=="in"){if(a=vi(t,o,r,r.out,i),t&&a)return a;o.wrap(r.out)}}if(e!=="directed"&&(a=vi(t,o,r,r.undirected,i),t&&a))return a}function fx(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const r=[];return Gu(!1,t,e,n,function(i){r.push(i)}),r}function bi(t,e,n){const r=Object.keys(n),i=r.length;let o=0;return new Zt(function(){let s=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};const l=n[r[o++]],u=l.source,c=l.target;if(s=u===e?c:u,t&&t.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}})}function dx(t,e,n){if(t!=="mixed"){if(t==="undirected")return bi(null,n,n.undirected);if(typeof e=="string")return bi(null,n,n[e])}let r=Zt.empty();const i=new ts;return t!=="undirected"&&(e!=="out"&&(r=Pn(r,bi(i,n,n.in))),e!=="in"&&(r=Pn(r,bi(i,n,n.out)))),t!=="directed"&&(r=Pn(r,bi(i,n,n.undirected))),r}function hx(t,e){const{name:n,type:r,direction:i}=e;t.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new se(`Graph.${n}: could not find the "${o}" node in the graph.`);return fx(r==="mixed"?this.type:r,i,a)}}function px(t,e){const{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const f=this._nodes.get(u);if(typeof f>"u")throw new se(`Graph.${o}: could not find the "${u}" node in the graph.`);Gu(!1,r==="mixed"?this.type:r,i,f,c)};const a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(u,c){const f=[];return this[o](u,(d,h)=>{f.push(c(d,h))}),f};const s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(u,c){const f=[];return this[o](u,(d,h)=>{c(d,h)&&f.push(d)}),f};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(u,c,f){if(arguments.length<3)throw new ue(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d=f;return this[o](u,(h,p)=>{d=c(d,h,p)}),d}}function mx(t,e){const{name:n,type:r,direction:i}=e,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;t.prototype[a]=function(u,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const f=this._nodes.get(u);if(typeof f>"u")throw new se(`Graph.${a}: could not find the "${u}" node in the graph.`);return Gu(!0,r==="mixed"?this.type:r,i,f,c)};const s="some"+o;t.prototype[s]=function(u,c){return!!this[a](u,c)};const l="every"+o;t.prototype[l]=function(u,c){return!this[a](u,(d,h)=>!c(d,h))}}function gx(t,e){const{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Zt.empty();a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new se(`Graph.${o}: could not find the "${a}" node in the graph.`);return dx(r==="mixed"?this.type:r,i,s)}}function yx(t){cx.forEach(e=>{hx(t,e),px(t,e),mx(t,e),gx(t,e)})}function No(t,e,n,r,i){const o=r._nodes.values(),a=r.type;let s,l,u,c,f,d,h;for(;s=o.next(),s.done!==!0;){let p=!1;if(l=s.value,a!=="undirected"){c=l.out;for(u in c){f=c[u];do{if(d=f.target,p=!0,h=i(l.key,d.key,l.attributes,d.attributes,f.key,f.attributes,f.undirected),t&&h)return f;f=f.next}while(f)}}if(a!=="directed"){c=l.undirected;for(u in c)if(!(e&&l.key>u)){f=c[u];do{if(d=f.target,d.key!==u&&(d=f.source),p=!0,h=i(l.key,d.key,l.attributes,d.attributes,f.key,f.attributes,f.undirected),t&&h)return f;f=f.next}while(f)}}if(n&&!p&&(h=i(l.key,null,l.attributes,null,null,null,null),t&&h))return null}}function vx(t,e){const n={key:t};return Up(e.attributes)||(n.attributes=ct({},e.attributes)),n}function bx(t,e,n){const r={key:e,source:n.source.key,target:n.target.key};return Up(n.attributes)||(r.attributes=ct({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function _x(t){if(!gt(t))throw new ue('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ue("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!gt(t.attributes)||t.attributes===null))throw new ue("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function wx(t){if(!gt(t))throw new ue('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ue("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ue("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!gt(t.attributes)||t.attributes===null))throw new ue("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ue("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const xx=Tw(),Ex=new Set(["directed","undirected","mixed"]),Nf=new Set(["domain","_events","_eventsCount","_maxListeners"]),Tx=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Sx={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ax(t,e,n){if(n&&!gt(n))throw new ue(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new ye(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function qf(t,e,n){const r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Bp(t,e,n,r,i,o,a,s){if(!r&&t.type==="undirected")throw new ye(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new ye(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!gt(s))throw new ue(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!t.allowSelfLoops&&o===a)throw new ye(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(o),u=t._nodes.get(a);if(!l)throw new se(`Graph.${e}: source node "${o}" not found.`);if(!u)throw new se(`Graph.${e}: target node "${a}" not found.`);const c={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new ye(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof l.undirected[a]<"u":typeof l.out[a]<"u"))throw new ye(`Graph.${e}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const f=new Xr(r,i,l,u,s);t._edges.set(i,f);const d=o===a;return r?(l.undirectedDegree++,u.undirectedDegree++,d&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,d&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,c.key=i,t.emit("edgeAdded",c),i}function kx(t,e,n,r,i,o,a,s,l){if(!r&&t.type==="undirected")throw new ye(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new ye(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(l){if(typeof s!="function")throw new ue(`Graph.${e}: invalid updater function. Expecting a function but got "${s}"`)}else if(!gt(s))throw new ue(`Graph.${e}: invalid attributes. Expecting an object but got "${s}"`)}o=""+o,a=""+a;let u;if(l&&(u=s,s=void 0),!t.allowSelfLoops&&o===a)throw new ye(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(o),f=t._nodes.get(a),d,h;if(!n&&(d=t._edges.get(i),d)){if((d.source.key!==o||d.target.key!==a)&&(!r||d.source.key!==a||d.target.key!==o))throw new ye(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${a}" target vs. ("${d.source.key}", "${d.target.key}").`);h=d}if(!h&&!t.multi&&c&&(h=r?c.undirected[a]:c.out[a]),h){const v=[h.key,!1,!1,!1];if(l?!u:!s)return v;if(l){const b=h.attributes;h.attributes=u(b),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else ct(h.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:s});return v}s=s||{},l&&u&&(s=u(s));const p={key:null,undirected:r,source:o,target:a,attributes:s};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new ye(`Graph.${e}: the "${i}" edge already exists in the graph.`);let g=!1,y=!1;c||(c=qf(t,o,{}),g=!0,o===a&&(f=c,y=!0)),f||(f=qf(t,a,{}),y=!0),d=new Xr(r,i,c,f,s),t._edges.set(i,d);const m=o===a;return r?(c.undirectedDegree++,f.undirectedDegree++,m&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,f.inDegree++,m&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,g,y]}function wr(t,e){t._edges.delete(e.key);const{source:n,target:r,attributes:i}=e,o=e.undirected,a=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,a&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,a&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}class Ne extends hw.EventEmitter{constructor(e){if(super(),e=ct({},Sx,e),typeof e.multi!="boolean")throw new ue(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Ex.has(e.type))throw new ue(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ue(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?Vp:e.type==="directed"?Fp:Gp;jt(this,"NodeDataClass",n);const r="geid_"+xx()+"_";let i=0;const o=()=>{let a;do a=r+i++;while(this._edges.has(a));return a};jt(this,"_attributes",{}),jt(this,"_nodes",new Map),jt(this,"_edges",new Map),jt(this,"_directedSize",0),jt(this,"_undirectedSize",0),jt(this,"_directedSelfLoopCount",0),jt(this,"_undirectedSelfLoopCount",0),jt(this,"_edgeKeyGenerator",o),jt(this,"_options",e),Nf.forEach(a=>jt(this,a,this[a])),on(this,"order",()=>this._nodes.size),on(this,"size",()=>this._edges.size),on(this,"directedSize",()=>this._directedSize),on(this,"undirectedSize",()=>this._undirectedSize),on(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),on(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),on(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),on(this,"multi",this._options.multi),on(this,"type",this._options.type),on(this,"allowSelfLoops",this._options.allowSelfLoops),on(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new ue(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new ue(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new ue(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new ye("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new se(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new se(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new ye("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new se(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new se(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new ye("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new se(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const r=this._nodes.get(e);if(!r)throw new se(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new se(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new se(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new se(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const r=this._edges.get(n);if(!r)throw new se(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(e===i)return o;if(e===o)return i;throw new se(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(e,n){e=""+e,n=""+n;const r=this._edges.get(e);if(!r)throw new se(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new se(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new se(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new se(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return Ax(this,e,n).key}mergeNode(e,n){if(n&&!gt(n))throw new ue(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(ct(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ue(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){const o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new se(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do wr(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do wr(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do wr(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Xt(this,r,i,this.type),!n)throw new se(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new se(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return wr(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new ye("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ye("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const r=Xt(this,e,n,"directed");if(!r)throw new se(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return wr(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new ye("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ye("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Xt(this,e,n,"undirected");if(!r)throw new se(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return wr(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ue("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!gt(e))throw new ue("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!gt(e))throw new ue("Graph.mergeAttributes: provided attributes are not a plain object.");return ct(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ue("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ue("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!jf(n))throw new ue("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ue("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!jf(n))throw new ue("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,a,s;for(;i=r.next(),i.done!==!0;)o=i.value,a=o.source,s=o.target,o.attributes=e(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ue("Graph.forEachAdjacencyEntry: expecting a callback.");No(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ue("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");No(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ue("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");No(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ue("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");No(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):Lp(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ue("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new ue("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new ue("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let a=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[a++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new ue("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ue("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ue("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,n){if(typeof e!="function")throw new ue("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ue("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,a;for(;o=i.next(),o.done!==!0;)a=o.value,r=e(r,a.key,a.attributes);return r}nodeEntries(){const e=this._nodes.values();return new Zt(()=>{const n=e.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{e[n++]=vx(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=bx(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof Ne)return e.forEachNode((l,u)=>{n?this.mergeNode(l,u):this.addNode(l,u)}),e.forEachEdge((l,u,c,f,d,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,c,f,u):this.mergeDirectedEdgeWithKey(l,c,f,u):p?this.addUndirectedEdgeWithKey(l,c,f,u):this.addDirectedEdgeWithKey(l,c,f,u)}),this;if(!gt(e))throw new ue("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!gt(e.attributes))throw new ue("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,o,a,s;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new ue("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],_x(a);const{key:l,attributes:u}=a;n?this.mergeNode(l,u):this.addNode(l,u)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),o=e.edges,!Array.isArray(o))throw new ue("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],wx(s);const{source:u,target:c,attributes:f,undirected:d=l}=s;let h;"key"in s?(h=n?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,s.key,u,c,f)):(h=n?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,u,c,f))}}return this}nullCopy(e){const n=new Ne(ct({},this._options,e));return n.replaceAttributes(ct({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{const o=ct({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new ye(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new ye("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new ye("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,Bp(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,ct({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,a)=>{e[a]=o.attributes});const n={},r={};this._edges.forEach((o,a)=>{const s=o.undirected?"--":"->";let l="",u=o.source.key,c=o.target.key,f;o.undirected&&u>c&&(f=u,u=c,c=f);const d=`(${u})${s}(${c})`;a.startsWith("geid_")?this.multi&&(typeof r[d]>"u"?r[d]=0:r[d]++,l+=`${r[d]}. `):l+=`[${a}]: `,l+=d,n[l]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Nf.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,jt(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(Ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ne.prototype.inspect);Tx.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),r=e==="add"?Bp:kx;t.generateKey?Ne.prototype[n]=function(i,o,a){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,o,a,e==="update")}:Ne.prototype[n]=function(i,o,a,s){return r(this,n,!1,(t.type||this.type)==="undirected",i,o,a,s,e==="update")}})});Uw(Ne);Hw(Ne);ux(Ne);yx(Ne);class $p extends Ne{constructor(e){const n=ct({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ue("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ue('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Wp extends Ne{constructor(e){const n=ct({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ue("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ue('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Hp extends Ne{constructor(e){const n=ct({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ue("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Yp extends Ne{constructor(e){const n=ct({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ue("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ue('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Xp extends Ne{constructor(e){const n=ct({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ue("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ue('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Kr(t){t.from=function(e,n){const r=ct({},e.options,n),i=new t(r);return i.import(e),i}}Kr(Ne);Kr($p);Kr(Wp);Kr(Hp);Kr(Yp);Kr(Xp);Ne.Graph=Ne;Ne.DirectedGraph=$p;Ne.UndirectedGraph=Wp;Ne.MultiGraph=Hp;Ne.MultiDirectedGraph=Yp;Ne.MultiUndirectedGraph=Xp;Ne.InvalidArgumentsGraphError=ue;Ne.NotFoundGraphError=se;Ne.UsageGraphError=ye;const{Provider:Ox,useStore:ce}=G1(),Dx=({actives:t=[],selections:e=[],collapsedNodeIds:n=[],theme:r})=>V1(i=>({theme:{...r,edge:{...r.edge,label:{...r.edge.label,fontSize:r.edge.label.fontSize??6}}},edges:[],nodes:[],collapsedNodeIds:n,clusters:new Map,panning:!1,draggingId:null,actives:t,edgeContextMenus:new Set,edgeMeshes:[],selections:e,drags:{},graph:new Ne({multi:!0}),setTheme:o=>i(a=>({...a,theme:o})),setClusters:o=>i(a=>({...a,clusters:o})),setEdgeContextMenus:o=>i(a=>({...a,edgeContextMenus:o})),setEdgeMeshes:o=>i(a=>({...a,edgeMeshes:o})),setPanning:o=>i(a=>({...a,panning:o})),setDrags:o=>i(a=>({...a,drags:o})),setDraggingId:o=>i(a=>({...a,draggingId:o})),setActives:o=>i(a=>({...a,actives:o})),setSelections:o=>i(a=>({...a,selections:o})),setNodes:o=>i(a=>({...a,nodes:o,centerPosition:wu(o)})),setEdges:o=>i(a=>({...a,edges:o})),setNodePosition:(o,a)=>i(s=>{var h,p;const l=s.nodes.find(g=>g.id===o),u=Ji(l),f=new _e(a.x,a.y,a.z).sub(u),d=[...s.nodes];if((h=s.selections)!=null&&h.includes(o))(p=s.selections)==null||p.forEach(g=>{const y=s.nodes.find(m=>m.id===g);if(y){const m=s.nodes.indexOf(y);d[m]=Sf(y,f)}});else{const g=s.nodes.indexOf(l);d[g]=Sf(l,f)}return{...s,drags:{...s.drags,[o]:l},nodes:d}}),setCollapsedNodeIds:(o=[])=>i(a=>({...a,collapsedNodeIds:o}))}));function Kp({nodeId:t,nodes:e,edges:n,currentHiddenNodes:r,currentHiddenEdges:i}){const o=[],a=[],s=r.map(h=>h.id),l=i.map(h=>h.id),u=n.filter(h=>h.source===t),c=u.map(h=>h.target);a.push(...u);for(const h of c){const p=n.filter(y=>y.target===h&&y.source!==t);let g=!1;if((p.length===0||p.length>0&&!s.includes(h)&&p.map(m=>m.id).every(m=>l.includes(m)))&&(g=!0),g){const y=e.find(v=>v.id===h);y&&o.push(y);const m=Kp({nodeId:h,nodes:e,edges:n,currentHiddenEdges:a,currentHiddenNodes:o});a.push(...m.hiddenEdges),o.push(...m.hiddenNodes)}}const f=Object.values(a.reduce((h,p)=>({...h,[p.id]:p}),{})),d=Object.values(o.reduce((h,p)=>({...h,[p.id]:p}),{}));return{hiddenEdges:f,hiddenNodes:d}}const Cx=({collapsedIds:t,nodes:e,edges:n})=>{const r=[],i=[];for(const u of t){const{hiddenEdges:c,hiddenNodes:f}=Kp({nodeId:u,nodes:e,edges:n,currentHiddenEdges:i,currentHiddenNodes:r});r.push(...f),i.push(...c)}const o=r.map(u=>u.id),a=i.map(u=>u.id),s=e.filter(u=>!o.includes(u.id)),l=n.filter(u=>!a.includes(u.id));return{visibleNodes:s,visibleEdges:l}},Mx=({nodeId:t,edges:e,visibleEdgeIds:n})=>{const r=[],i=e.filter(u=>u.target===t);if(i.map(u=>u.id).some(u=>n.includes(u)))return r;const s=i.map(u=>u.source);let l=!1;for(const u of s)l||(r.push(u,...Mx({nodeId:u,edges:e,visibleEdgeIds:n})),l=!0);return r},Px=({layoutType:t,sizingType:e,labelType:n,sizingAttribute:r,clusterAttribute:i,selections:o,nodes:a,edges:s,actives:l,collapsedNodeIds:u,defaultNodeSize:c,maxNodeSize:f,minNodeSize:d,layoutOverrides:h})=>{const p=ce(I=>I.graph),g=ce(I=>I.setClusters),y=ce(I=>I.collapsedNodeIds),m=ce(I=>I.setEdges),v=ce(I=>I.nodes),b=ce(I=>I.setNodes),_=ce(I=>I.setSelections),w=ce(I=>I.setActives),E=ce(I=>I.drags),S=ce(I=>I.setDrags),x=ce(I=>I.setCollapsedNodeIds),A=R.useRef(!1),H=R.useRef(null),V=lt(I=>I.camera),{visibleEdges:O,visibleNodes:G}=R.useMemo(()=>Cx({collapsedIds:y,nodes:a,edges:s}),[y,a,s]),q=R.useRef(E);R.useEffect(()=>{q.current=E},[E]);const Y=R.useCallback(async I=>{H.current=I||W0({...h,type:t,graph:p,drags:q.current,clusterAttribute:i}),await _v(H.current);const B=d1({graph:p,layout:H.current,sizingType:e,labelType:n,sizingAttribute:r,maxNodeSize:f,minNodeSize:d,defaultNodeSize:c}),F=q1({nodes:B.nodes,clusterAttribute:i});m(B.edges),b(B.nodes),g(F)},[h,t,i,e,n,r,f,d,c,m,b,g]);R.useEffect(()=>{const I=v.map(F=>({...F,labelVisible:Rh({nodeCount:v==null?void 0:v.length,labelType:n,camera:V,nodePosition:F==null?void 0:F.position})("node",F==null?void 0:F.size)}));I.some((F,z)=>F.labelVisible!==v[z].labelVisible)&&b(I)},[V,V.zoom,V.position.z,b,v,n]),R.useEffect(()=>{A.current&&_(o)},[o,_]),R.useEffect(()=>{A.current&&w(l)},[l,w]),R.useEffect(()=>{async function I(){A.current=!1,f1(p,G,O),await Y(),A.current=!0}I()},[G,O]),R.useEffect(()=>{A.current&&x(u)},[u,x]),R.useEffect(()=>{A.current&&(q.current={},S({}),Y())},[t,Y,S]),R.useEffect(()=>{A.current&&Y(H.current)},[e,r,n,Y])},vo=new _e,zu=new _e,Rx=new _e;function Ix(t,e,n){const r=vo.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,o=n.height/2;return[r.x*i+i,-(r.y*o)+o]}function Lx(t,e){const n=vo.setFromMatrixPosition(t.matrixWorld),r=zu.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),o=e.getWorldDirection(Rx);return i.angleTo(o)>Math.PI/2}function Ux(t,e,n,r){const i=vo.setFromMatrixPosition(t.matrixWorld),o=i.clone();o.project(e),n.setFromCamera(o,e);const a=n.intersectObjects(r,!0);if(a.length){const s=a[0].distance;return i.distanceTo(n.ray.origin)<s}return!0}function Vx(t,e){if(e instanceof Qd)return e.zoom;if(e instanceof Jd){const n=vo.setFromMatrixPosition(t.matrixWorld),r=zu.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}else return 1}function Fx(t,e,n){if(e instanceof Jd||e instanceof Qd){const r=vo.setFromMatrixPosition(t.matrixWorld),i=zu.setFromMatrixPosition(e.matrixWorld),o=r.distanceTo(i),a=(n[1]-n[0])/(e.far-e.near),s=n[1]-a*e.far;return Math.round(a*o+s)}}const Pl=t=>Math.abs(t)<1e-10?0:t;function Zp(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Pl(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const Gx=(t=>e=>Zp(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),zx=(t=>(e,n)=>Zp(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function jx(t){return t&&typeof t=="object"&&"current"in t}const ju=R.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:o,fullscreen:a,portal:s,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:f,onOcclude:d,castShadow:h,receiveShadow:p,material:g,geometry:y,zIndexRange:m=[16777271,0],calculatePosition:v=Ix,as:b="div",wrapperClass:_,pointerEvents:w="auto",...E},S)=>{const{gl:x,camera:A,scene:H,size:V,raycaster:O,events:G,viewport:q}=lt(),[Y]=R.useState(()=>document.createElement(b)),I=R.useRef(),B=R.useRef(null),F=R.useRef(0),z=R.useRef([0,0]),j=R.useRef(null),U=R.useRef(null),k=(s==null?void 0:s.current)||G.connected||x.domElement.parentNode,M=R.useRef(null),T=R.useRef(!1),P=R.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&jx(f[0]),[f]);R.useLayoutEffect(()=>{const Q=x.domElement;f&&f==="blending"?(Q.style.zIndex=`${Math.floor(m[0]/2)}`,Q.style.position="absolute",Q.style.pointerEvents="none"):(Q.style.zIndex=null,Q.style.position=null,Q.style.pointerEvents=null)},[f]),R.useLayoutEffect(()=>{if(B.current){const Q=I.current=Ng(Y);if(H.updateMatrixWorld(),c)Y.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const X=v(B.current,A,V);Y.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${X[0]}px,${X[1]}px,0);transform-origin:0 0;`}return k&&(i?k.prepend(Y):k.appendChild(Y)),()=>{k&&k.removeChild(Y),Q.unmount()}}},[k,c]),R.useLayoutEffect(()=>{_&&(Y.className=_)},[_]);const $=R.useMemo(()=>c?{position:"absolute",top:0,left:0,width:V.width,height:V.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...a&&{top:-V.height/2,left:-V.width/2,width:V.width,height:V.height},...n},[n,o,a,V,c]),C=R.useMemo(()=>({position:"absolute",pointerEvents:w}),[w]);R.useLayoutEffect(()=>{if(T.current=!1,c){var Q;(Q=I.current)==null||Q.render(R.createElement("div",{ref:j,style:$},R.createElement("div",{ref:U,style:C},R.createElement("div",{ref:S,className:r,style:n,children:t}))))}else{var X;(X=I.current)==null||X.render(R.createElement("div",{ref:S,style:$,className:r,children:t}))}});const W=R.useRef(!0);Ba(Q=>{if(B.current){A.updateMatrixWorld(),B.current.updateWorldMatrix(!0,!1);const X=c?z.current:v(B.current,A,V);if(c||Math.abs(F.current-A.zoom)>e||Math.abs(z.current[0]-X[0])>e||Math.abs(z.current[1]-X[1])>e){const N=Lx(B.current,A);let ie=!1;P&&(Array.isArray(f)?ie=f.map(D=>D.current):f!=="blending"&&(ie=[H]));const ne=W.current;if(ie){const D=Ux(B.current,A,O,ie);W.current=D&&!N}else W.current=!N;ne!==W.current&&(d?d(!W.current):Y.style.display=W.current?"block":"none");const Z=Math.floor(m[0]/2),L=f?P?[m[0],Z]:[Z-1,0]:m;if(Y.style.zIndex=`${Fx(B.current,A,L)}`,c){const[D,K]=[V.width/2,V.height/2],oe=A.projectionMatrix.elements[5]*K,{isOrthographicCamera:re,top:J,left:he,bottom:fe,right:pe}=A,de=Gx(A.matrixWorldInverse),Ce=re?`scale(${oe})translate(${Pl(-(pe+he)/2)}px,${Pl((J+fe)/2)}px)`:`translateZ(${oe}px)`;let xe=B.current.matrixWorld;u&&(xe=A.matrixWorldInverse.clone().transpose().copyPosition(xe).scale(B.current.scale),xe.elements[3]=xe.elements[7]=xe.elements[11]=0,xe.elements[15]=1),Y.style.width=V.width+"px",Y.style.height=V.height+"px",Y.style.perspective=re?"":`${oe}px`,j.current&&U.current&&(j.current.style.transform=`${Ce}${de}translate(${D}px,${K}px)`,U.current.style.transform=zx(xe,1/((l||10)/400)))}else{const D=l===void 0?1:Vx(B.current,A)*l;Y.style.transform=`translate3d(${X[0]}px,${X[1]}px,0) scale(${D})`}z.current=X,F.current=A.zoom}}if(!P&&M.current&&!T.current)if(c){if(j.current){const X=j.current.children[0];if(X!=null&&X.clientWidth&&X!=null&&X.clientHeight){const{isOrthographicCamera:N}=A;if(N||y)E.scale&&(Array.isArray(E.scale)?E.scale instanceof _e?M.current.scale.copy(E.scale.clone().divideScalar(1)):M.current.scale.set(1/E.scale[0],1/E.scale[1],1/E.scale[2]):M.current.scale.setScalar(1/E.scale));else{const ie=(l||10)/400,ne=X.clientWidth*ie,Z=X.clientHeight*ie;M.current.scale.set(ne,Z,1)}T.current=!0}}}else{const X=Y.children[0];if(X!=null&&X.clientWidth&&X!=null&&X.clientHeight){const N=1/q.factor,ie=X.clientWidth*N,ne=X.clientHeight*N;M.current.scale.set(ie,ne,1),T.current=!0}M.current.lookAt(Q.camera.position)}});const te=R.useMemo(()=>({vertexShader:c?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[c]);return R.createElement("group",bn({},E,{ref:B}),f&&!P&&R.createElement("mesh",{castShadow:h,receiveShadow:p,ref:M},y||R.createElement("planeGeometry",null),g||R.createElement("shaderMaterial",{side:bt,vertexShader:te.vertexShader,fragmentShader:te.fragmentShader})))});function Gi(t,e="pointer",n="auto",r=document.body){R.useEffect(()=>{if(t)return r.style.cursor=e,()=>void(r.style.cursor=n)},[t])}let Nu=_o();const we=t=>bo(t,Nu);let qu=_o();we.write=t=>bo(t,qu);let ns=_o();we.onStart=t=>bo(t,ns);let Bu=_o();we.onFrame=t=>bo(t,Bu);let $u=_o();we.onFinish=t=>bo(t,$u);let Lr=[];we.setTimeout=(t,e)=>{let n=we.now()+e,r=()=>{let o=Lr.findIndex(a=>a.cancel==r);~o&&Lr.splice(o,1),Wn-=~o?1:0},i={time:n,handler:t,cancel:r};return Lr.splice(Qp(n),0,i),Wn+=1,Jp(),i};let Qp=t=>~(~Lr.findIndex(e=>e.time>t)||~Lr.length);we.cancel=t=>{ns.delete(t),Bu.delete(t),$u.delete(t),Nu.delete(t),qu.delete(t)};we.sync=t=>{Rl=!0,we.batchedUpdates(t),Rl=!1};we.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,we.onStart(n)}return r.handler=t,r.cancel=()=>{ns.delete(n),e=null},r};let Wu=typeof window<"u"?window.requestAnimationFrame:()=>{};we.use=t=>Wu=t;we.now=typeof performance<"u"?()=>performance.now():Date.now;we.batchedUpdates=t=>t();we.catch=console.error;we.frameLoop="always";we.advance=()=>{we.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):tm()};let $n=-1,Wn=0,Rl=!1;function bo(t,e){Rl?(e.delete(t),t(0)):(e.add(t),Jp())}function Jp(){$n<0&&($n=0,we.frameLoop!=="demand"&&Wu(em))}function Nx(){$n=-1}function em(){~$n&&(Wu(em),we.batchedUpdates(tm))}function tm(){let t=$n;$n=we.now();let e=Qp($n);if(e&&(nm(Lr.splice(0,e),n=>n.handler()),Wn-=e),!Wn){Nx();return}ns.flush(),Nu.flush(t?Math.min(64,$n-t):16.667),Bu.flush(),qu.flush(),$u.flush()}function _o(){let t=new Set,e=t;return{add(n){Wn+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Wn-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Wn-=e.size,nm(e,r=>r(n)&&t.add(r)),Wn+=t.size,e=t)}}}function nm(t,e){t.forEach(n=>{try{e(n)}catch(r){we.catch(r)}})}function Il(){}const qx=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),le={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Cn(t,e){if(le.arr(t)){if(!le.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const Fe=(t,e)=>t.forEach(e);function Rn(t,e,n){if(le.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}const Yt=t=>le.und(t)?[]:le.arr(t)?t:[t];function zi(t,e){if(t.size){const n=Array.from(t);t.clear(),Fe(n,e)}}const Fi=(t,...e)=>zi(t,n=>n(...e)),Hu=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let Yu,rm,Hn=null,im=!1,Xu=Il;const Bx=t=>{t.to&&(rm=t.to),t.now&&(we.now=t.now),t.colors!==void 0&&(Hn=t.colors),t.skipAnimation!=null&&(im=t.skipAnimation),t.createStringInterpolator&&(Yu=t.createStringInterpolator),t.requestAnimationFrame&&we.use(t.requestAnimationFrame),t.batchedUpdates&&(we.batchedUpdates=t.batchedUpdates),t.willAdvance&&(Xu=t.willAdvance),t.frameLoop&&(we.frameLoop=t.frameLoop)};var En=Object.freeze({__proto__:null,get createStringInterpolator(){return Yu},get to(){return rm},get colors(){return Hn},get skipAnimation(){return im},get willAdvance(){return Xu},assign:Bx});const ji=new Set;let Ht=[],Qs=[],Aa=0;const rs={get idle(){return!ji.size&&!Ht.length},start(t){Aa>t.priority?(ji.add(t),we.onStart($x)):(om(t),we(Ll))},advance:Ll,sort(t){if(Aa)we.onFrame(()=>rs.sort(t));else{const e=Ht.indexOf(t);~e&&(Ht.splice(e,1),am(t))}},clear(){Ht=[],ji.clear()}};function $x(){ji.forEach(om),ji.clear(),we(Ll)}function om(t){Ht.includes(t)||am(t)}function am(t){Ht.splice(Wx(Ht,e=>e.priority>t.priority),0,t)}function Ll(t){const e=Qs;for(let n=0;n<Ht.length;n++){const r=Ht[n];Aa=r.priority,r.idle||(Xu(r),r.advance(t),r.idle||e.push(r))}return Aa=0,Qs=Ht,Qs.length=0,Ht=e,Ht.length>0}function Wx(t,e){const n=t.findIndex(e);return n<0?t.length:n}const Hx=(t,e,n)=>Math.min(Math.max(n,t),e),Yx={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},cn="[-+]?\\d*\\.?\\d+",ka=cn+"%";function is(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Xx=new RegExp("rgb"+is(cn,cn,cn)),Kx=new RegExp("rgba"+is(cn,cn,cn,cn)),Zx=new RegExp("hsl"+is(cn,ka,ka)),Qx=new RegExp("hsla"+is(cn,ka,ka,cn)),Jx=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,eE=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tE=/^#([0-9a-fA-F]{6})$/,nE=/^#([0-9a-fA-F]{8})$/;function rE(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=tE.exec(t))?parseInt(e[1]+"ff",16)>>>0:Hn&&Hn[t]!==void 0?Hn[t]:(e=Xx.exec(t))?(xr(e[1])<<24|xr(e[2])<<16|xr(e[3])<<8|255)>>>0:(e=Kx.exec(t))?(xr(e[1])<<24|xr(e[2])<<16|xr(e[3])<<8|Wf(e[4]))>>>0:(e=Jx.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=nE.exec(t))?parseInt(e[1],16)>>>0:(e=eE.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Zx.exec(t))?(Bf($f(e[1]),qo(e[2]),qo(e[3]))|255)>>>0:(e=Qx.exec(t))?(Bf($f(e[1]),qo(e[2]),qo(e[3]))|Wf(e[4]))>>>0:null}function Js(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Bf(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,o=Js(i,r,t+1/3),a=Js(i,r,t),s=Js(i,r,t-1/3);return Math.round(o*255)<<24|Math.round(a*255)<<16|Math.round(s*255)<<8}function xr(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function $f(t){return(parseFloat(t)%360+360)%360/360}function Wf(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function qo(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Hf(t){let e=rE(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${o})`}const to=(t,e,n)=>{if(le.fun(t))return t;if(le.arr(t))return to({range:t,output:e,extrapolate:n});if(le.str(t.output[0]))return Yu(t);const r=t,i=r.output,o=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=oE(u,o);return iE(u,o[c],o[c+1],i[c],i[c+1],l,a,s,r.map)}};function iE(t,e,n,r,i,o,a,s,l){let u=l?l(t):t;if(u<e){if(a==="identity")return u;a==="clamp"&&(u=e)}if(u>n){if(s==="identity")return u;s==="clamp"&&(u=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?u=-u:n===1/0?u=u-e:u=(u-e)/(n-e),u=o(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function oE(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}const aE=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return Hx(0,1,i/t)},Oa=1.70158,Bo=Oa*1.525,Yf=Oa+1,Xf=2*Math.PI/3,Kf=2*Math.PI/4.5,$o=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,sE={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Yf*t*t*t-Oa*t*t,easeOutBack:t=>1+Yf*Math.pow(t-1,3)+Oa*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Bo+1)*2*t-Bo)/2:(Math.pow(2*t-2,2)*((Bo+1)*(t*2-2)+Bo)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Xf),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Xf)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Kf))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Kf)/2+1,easeInBounce:t=>1-$o(1-t),easeOutBounce:$o,easeInOutBounce:t=>t<.5?(1-$o(1-2*t))/2:(1+$o(2*t-1))/2,steps:aE};function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}const Nr=Symbol.for("FluidValue.get"),pr=Symbol.for("FluidValue.observers"),vn=t=>!!(t&&t[Nr]),qt=t=>t&&t[Nr]?t[Nr]():t,Zf=t=>t[pr]||null;function lE(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Da(t,e){let n=t[pr];n&&n.forEach(r=>{lE(r,e)})}class uE{constructor(e){if(this[Nr]=void 0,this[pr]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");cE(this,e)}}const cE=(t,e)=>sm(t,Nr,e);function wo(t,e){if(t[Nr]){let n=t[pr];n||sm(t,pr,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Ca(t,e){let n=t[pr];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[pr]=null,t.observerRemoved&&t.observerRemoved(r,e)}}const sm=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),sa=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,fE=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Qf=new RegExp(`(${sa.source})(%|[a-z]+)`,"i"),dE=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,os=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,lm=t=>{const[e,n]=hE(t);if(!e||Hu())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&os.test(n))return lm(n);if(n)return n}return t},hE=t=>{const e=os.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]};let el;const pE=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,um=t=>{el||(el=Hn?new RegExp(`(${Object.keys(Hn).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(o=>qt(o).replace(os,lm).replace(fE,Hf).replace(el,Hf)),n=e.map(o=>o.match(sa).map(Number)),i=n[0].map((o,a)=>n.map(s=>{if(!(a in s))throw Error('The arity of each "output" value must be equal');return s[a]})).map(o=>to(Ul({},t,{output:o})));return o=>{var a;const s=!Qf.test(e[0])&&((a=e.find(u=>Qf.test(u)))==null?void 0:a.replace(sa,""));let l=0;return e[0].replace(sa,()=>`${i[l++](o)}${s||""}`).replace(dE,pE)}},Ku="react-spring: ",cm=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${Ku}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},mE=cm(console.warn);function gE(){mE(`${Ku}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const yE=cm(console.warn);function vE(){yE(`${Ku}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function as(t){return le.str(t)&&(t[0]=="#"||/\d/.test(t)||!Hu()&&os.test(t)||t in(Hn||{}))}const Zu=Hu()?R.useEffect:R.useLayoutEffect,bE=()=>{const t=R.useRef(!1);return Zu(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function fm(){const t=R.useState()[1],e=bE();return()=>{e.current&&t(Math.random())}}function _E(t,e){const[n]=R.useState(()=>({inputs:e,result:t()})),r=R.useRef(),i=r.current;let o=i;return o?e&&o.inputs&&wE(e,o.inputs)||(o={inputs:e,result:t()}):o=n,R.useEffect(()=>{r.current=o,i==n&&(n.inputs=n.result=void 0)},[o]),o.result}function wE(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const dm=t=>R.useEffect(t,xE),xE=[];function Jf(t){const e=R.useRef();return R.useEffect(()=>{e.current=t}),e.current}const no=Symbol.for("Animated:node"),EE=t=>!!t&&t[no]===t,yn=t=>t&&t[no],Qu=(t,e)=>qx(t,no,e),ss=t=>t&&t[no]&&t[no].getPayload();class hm{constructor(){this.payload=void 0,Qu(this,this)}getPayload(){return this.payload||[]}}class Zr extends hm{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,le.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Zr(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return le.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,le.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class qr extends Zr{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=to({output:[e,e]})}static create(e){return new qr(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(le.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=to({output:[this.getValue(),e]})),this._value=0,super.reset()}}const Ma={dependencies:null};class Ju extends hm{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const n={};return Rn(this.source,(r,i)=>{EE(r)?n[i]=r.getValue(e):vn(r)?n[i]=qt(r):e||(n[i]=r)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Fe(this.payload,e=>e.reset())}_makePayload(e){if(e){const n=new Set;return Rn(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){Ma.dependencies&&vn(e)&&Ma.dependencies.add(e);const n=ss(e);n&&Fe(n,r=>this.add(r))}}class ec extends Ju{constructor(e){super(e)}static create(e){return new ec(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(TE)),!0)}}function TE(t){return(as(t)?qr:Zr).create(t)}function Vl(t){const e=yn(t);return e?e.constructor:le.arr(t)?ec:as(t)?qr:Zr}function Pa(){return Pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pa.apply(this,arguments)}const ed=(t,e)=>{const n=!le.fun(t)||t.prototype&&t.prototype.isReactComponent;return R.forwardRef((r,i)=>{const o=R.useRef(null),a=n&&R.useCallback(p=>{o.current=kE(i,p)},[i]),[s,l]=AE(r,e),u=fm(),c=()=>{const p=o.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,s.getValue(!0)):!1)===!1&&u()},f=new SE(c,l),d=R.useRef();Zu(()=>(d.current=f,Fe(l,p=>wo(p,f)),()=>{d.current&&(Fe(d.current.deps,p=>Ca(p,d.current)),we.cancel(d.current.update))})),R.useEffect(c,[]),dm(()=>()=>{const p=d.current;Fe(p.deps,g=>Ca(g,p))});const h=e.getComponentProps(s.getValue());return R.createElement(t,Pa({},h,{ref:a}))})};class SE{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&we.write(this.update)}}function AE(t,e){const n=new Set;return Ma.dependencies=n,t.style&&(t=Pa({},t,{style:e.createAnimatedStyle(t.style)})),t=new Ju(t),Ma.dependencies=null,[t,n]}function kE(t,e){return t&&(le.fun(t)?t(e):t.current=e),e}const td=Symbol.for("AnimatedComponent"),OE=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Ju(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},o=a=>{const s=nd(a)||"Anonymous";return le.str(a)?a=o[a]||(o[a]=ed(a,i)):a=a[td]||(a[td]=ed(a,i)),a.displayName=`Animated(${s})`,a};return Rn(t,(a,s)=>{le.arr(t)&&(s=nd(a)),o[s]=o(a)}),{animated:o}},nd=t=>le.str(t)?t:t&&le.str(t.displayName)?t.displayName:le.fun(t)&&t.name||null;function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)}function sr(t,...e){return le.fun(t)?t(...e):t}const Ni=(t,e)=>t===!0||!!(e&&t&&(le.fun(t)?t(e):Yt(t).includes(e))),pm=(t,e)=>le.obj(t)?e&&t[e]:t,mm=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,DE=t=>t,tc=(t,e=DE)=>{let n=CE;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const o=e(t[i],i);le.und(o)||(r[i]=o)}return r},CE=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ME={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function PE(t){const e={};let n=0;if(Rn(t,(r,i)=>{ME[i]||(e[i]=r,n++)}),n)return e}function gm(t){const e=PE(t);if(e){const n={to:e};return Rn(t,(r,i)=>i in e||(n[i]=r)),n}return ht({},t)}function ro(t){return t=qt(t),le.arr(t)?t.map(ro):as(t)?En.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function RE(t){for(const e in t)return!0;return!1}function Fl(t){return le.fun(t)||le.arr(t)&&le.obj(t[0])}function IE(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function LE(t,e){if(e&&t.ref!==e){var n;(n=t.ref)==null||n.delete(t),e.add(t),t.ref=e}}const UE={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Gl=ht({},UE.default,{mass:1,damping:1,easing:sE.linear,clamp:!1});class VE{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,Gl)}}function FE(t,e,n){n&&(n=ht({},n),rd(n,e),e=ht({},n,e)),rd(t,e),Object.assign(t,e);for(const a in Gl)t[a]==null&&(t[a]=Gl[a]);let{mass:r,frequency:i,damping:o}=t;return le.und(i)||(i<.01&&(i=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/i,2)*r,t.friction=4*Math.PI*o*r/i),t}function rd(t,e){if(!le.und(e.decay))t.duration=void 0;else{const n=!le.und(e.tension)||!le.und(e.friction);(n||!le.und(e.frequency)||!le.und(e.damping)||!le.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}const id=[];class GE{constructor(){this.changed=!1,this.values=id,this.toValues=null,this.fromValues=id,this.to=void 0,this.from=void 0,this.config=new VE,this.immediate=!1}}function ym(t,{key:e,props:n,defaultProps:r,state:i,actions:o}){return new Promise((a,s)=>{var l;let u,c,f=Ni((l=n.cancel)!=null?l:r==null?void 0:r.cancel,e);if(f)p();else{le.und(n.pause)||(i.paused=Ni(n.pause,e));let g=r==null?void 0:r.pause;g!==!0&&(g=i.paused||Ni(g,e)),u=sr(n.delay||0,e),g?(i.resumeQueue.add(h),o.pause()):(o.resume(),h())}function d(){i.resumeQueue.add(h),i.timeouts.delete(c),c.cancel(),u=c.time-we.now()}function h(){u>0&&!En.skipAnimation?(i.delayed=!0,c=we.setTimeout(p,u),i.pauseQueue.add(d),i.timeouts.add(c)):p()}function p(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(f=!0);try{o.start(ht({},n,{callId:t,cancel:f}),a)}catch(g){s(g)}}})}const nc=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Ur(t.get()):e.every(n=>n.noop)?vm(t.get()):ln(t.get(),e.every(n=>n.finished)),vm=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ln=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Ur=t=>({value:t,cancelled:!0,finished:!1});function bm(t,e,n,r){const{callId:i,parentId:o,onRest:a}=e,{asyncTo:s,promise:l}=n;return!o&&t===s&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const u=tc(e,(y,m)=>m==="onRest"?void 0:y);let c,f;const d=new Promise((y,m)=>(c=y,f=m)),h=y=>{const m=i<=(n.cancelId||0)&&Ur(r)||i!==n.asyncId&&ln(r,!1);if(m)throw y.result=m,f(y),y},p=(y,m)=>{const v=new od,b=new ad;return(async()=>{if(En.skipAnimation)throw io(n),b.result=ln(r,!1),f(b),b;h(v);const _=le.obj(y)?ht({},y):ht({},m,{to:y});_.parentId=i,Rn(u,(E,S)=>{le.und(_[S])&&(_[S]=E)});const w=await r.start(_);return h(v),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),w})()};let g;if(En.skipAnimation)return io(n),ln(r,!1);try{let y;le.arr(t)?y=(async m=>{for(const v of m)await p(v)})(t):y=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([y.then(c),d]),g=ln(r.get(),!0,!1)}catch(y){if(y instanceof od)g=y.result;else if(y instanceof ad)g=y.result;else throw y}finally{i==n.asyncId&&(n.asyncId=o,n.asyncTo=o?s:void 0,n.promise=o?l:void 0)}return le.fun(a)&&we.batchedUpdates(()=>{a(g,r,r.item)}),g})()}function io(t,e){zi(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class od extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class ad extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const zl=t=>t instanceof rc;let zE=1;class rc extends uE{constructor(...e){super(...e),this.id=zE++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=yn(this);return e&&e.getValue()}to(...e){return En.to(this,e)}interpolate(...e){return gE(),En.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){Da(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||rs.sort(this),Da(this,{type:"priority",parent:this,priority:e})}}const mr=Symbol.for("SpringPhase"),_m=1,jl=2,Nl=4,tl=t=>(t[mr]&_m)>0,Nn=t=>(t[mr]&jl)>0,_i=t=>(t[mr]&Nl)>0,sd=(t,e)=>e?t[mr]|=jl|_m:t[mr]&=~jl,ld=(t,e)=>e?t[mr]|=Nl:t[mr]&=~Nl;class jE extends rc{constructor(e,n){if(super(),this.key=void 0,this.animation=new GE,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!le.und(e)||!le.und(n)){const r=le.obj(e)?ht({},e):ht({},n,{from:e});le.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Nn(this)||this._state.asyncTo)||_i(this)}get goal(){return qt(this.animation.to)}get velocity(){const e=yn(this);return e instanceof Zr?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return tl(this)}get isAnimating(){return Nn(this)}get isPaused(){return _i(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,r=!1;const i=this.animation;let{config:o,toValues:a}=i;const s=ss(i.to);!s&&vn(i.to)&&(a=Yt(qt(i.to))),i.values.forEach((c,f)=>{if(c.done)return;const d=c.constructor==qr?1:s?s[f].lastPosition:a[f];let h=i.immediate,p=d;if(!h){if(p=c.lastPosition,o.tension<=0){c.done=!0;return}let g=c.elapsedTime+=e;const y=i.fromValues[f],m=c.v0!=null?c.v0:c.v0=le.arr(o.velocity)?o.velocity[f]:o.velocity;let v;const b=o.precision||(y==d?.005:Math.min(1,Math.abs(d-y)*.001));if(le.und(o.duration))if(o.decay){const _=o.decay===!0?.998:o.decay,w=Math.exp(-(1-_)*g);p=y+m/(1-_)*(1-w),h=Math.abs(c.lastPosition-p)<=b,v=m*w}else{v=c.lastVelocity==null?m:c.lastVelocity;const _=o.restVelocity||b/10,w=o.clamp?0:o.bounce,E=!le.und(w),S=y==d?c.v0>0:y<d;let x,A=!1;const H=1,V=Math.ceil(e/H);for(let O=0;O<V&&(x=Math.abs(v)>_,!(!x&&(h=Math.abs(d-p)<=b,h)));++O){E&&(A=p==d||p>d==S,A&&(v=-v*w,p=d));const G=-o.tension*1e-6*(p-d),q=-o.friction*.001*v,Y=(G+q)/o.mass;v=v+Y*H,p=p+v*H}}else{let _=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,c.durationProgress>0&&(c.elapsedTime=o.duration*c.durationProgress,g=c.elapsedTime+=e)),_=(o.progress||0)+g/this._memoizedDuration,_=_>1?1:_<0?0:_,c.durationProgress=_),p=y+o.easing(_)*(d-y),v=(p-c.lastPosition)/e,h=_==1}c.lastVelocity=v,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),h=!0)}s&&!s[f].done&&(h=!1),h?c.done=!0:n=!1,c.setValue(p,o.round)&&(r=!0)});const l=yn(this),u=l.getValue();if(n){const c=qt(i.to);(u!==c||r)&&!o.decay?(l.setValue(c),this._onChange(c)):r&&o.decay&&this._onChange(u),this._stop()}else r&&this._onChange(u)}set(e){return we.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Nn(this)){const{to:e,config:n}=this.animation;we.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let r;return le.und(e)?(r=this.queue||[],this.queue=[]):r=[le.obj(e)?e:ht({},n,{to:e})],Promise.all(r.map(i=>this._update(i))).then(i=>nc(this,i))}stop(e){const{to:n}=this.animation;return this._focus(this.get()),io(this._state,e&&this._lastCallId),we.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const n=this.key||"";let{to:r,from:i}=e;r=le.obj(r)?r[n]:r,(r==null||Fl(r))&&(r=void 0),i=le.obj(i)?i[n]:i,i==null&&(i=void 0);const o={to:r,from:i};return tl(this)||(e.reverse&&([r,i]=[i,r]),i=qt(i),le.und(i)?yn(this)||this._set(r):this._set(i)),o}_update(e,n){let r=ht({},e);const{key:i,defaultProps:o}=this;r.default&&Object.assign(o,tc(r,(l,u)=>/^on/.test(u)?pm(l,i):l)),cd(this,r,"onProps"),xi(this,"onProps",r,this);const a=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return ym(++this._lastCallId,{key:i,props:r,defaultProps:o,state:s,actions:{pause:()=>{_i(this)||(ld(this,!0),Fi(s.pauseQueue),xi(this,"onPause",ln(this,wi(this,this.animation.to)),this))},resume:()=>{_i(this)&&(ld(this,!1),Nn(this)&&this._resume(),Fi(s.resumeQueue),xi(this,"onResume",ln(this,wi(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(l=>{if(r.loop&&l.finished&&!(n&&l.noop)){const u=wm(r);if(u)return this._update(u,!0)}return l})}_merge(e,n,r){if(n.cancel)return this.stop(!0),r(Ur(this));const i=!le.und(e.to),o=!le.und(e.from);if(i||o)if(n.callId>this._lastToId)this._lastToId=n.callId;else return r(Ur(this));const{key:a,defaultProps:s,animation:l}=this,{to:u,from:c}=l;let{to:f=u,from:d=c}=e;o&&!i&&(!n.default||le.und(f))&&(f=d),n.reverse&&([f,d]=[d,f]);const h=!Cn(d,c);h&&(l.from=d),d=qt(d);const p=!Cn(f,u);p&&this._focus(f);const g=Fl(n.to),{config:y}=l,{decay:m,velocity:v}=y;(i||o)&&(y.velocity=0),n.config&&!g&&FE(y,sr(n.config,a),n.config!==s.config?sr(s.config,a):void 0);let b=yn(this);if(!b||le.und(f))return r(ln(this,!0));const _=le.und(n.reset)?o&&!n.default:!le.und(d)&&Ni(n.reset,a),w=_?d:this.get(),E=ro(f),S=le.num(E)||le.arr(E)||as(E),x=!g&&(!S||Ni(s.immediate||n.immediate,a));if(p){const O=Vl(f);if(O!==b.constructor)if(x)b=this._set(E);else throw Error(`Cannot animate between ${b.constructor.name} and ${O.name}, as the "to" prop suggests`)}const A=b.constructor;let H=vn(f),V=!1;if(!H){const O=_||!tl(this)&&h;(p||O)&&(V=Cn(ro(w),E),H=!V),(!Cn(l.immediate,x)&&!x||!Cn(y.decay,m)||!Cn(y.velocity,v))&&(H=!0)}if(V&&Nn(this)&&(l.changed&&!_?H=!0:H||this._stop(u)),!g&&((H||vn(u))&&(l.values=b.getPayload(),l.toValues=vn(f)?null:A==qr?[1]:Yt(E)),l.immediate!=x&&(l.immediate=x,!x&&!_&&this._set(u)),H)){const{onRest:O}=l;Fe(qE,q=>cd(this,n,q));const G=ln(this,wi(this,u));Fi(this._pendingCalls,G),this._pendingCalls.add(r),l.changed&&we.batchedUpdates(()=>{l.changed=!_,O==null||O(G,this),_?sr(s.onRest,G):l.onStart==null||l.onStart(G,this)})}_&&this._set(w),g?r(bm(n.to,n,this._state,this)):H?this._start():Nn(this)&&!p?this._pendingCalls.add(r):r(vm(w))}_focus(e){const n=this.animation;e!==n.to&&(Zf(this)&&this._detach(),n.to=e,Zf(this)&&this._attach())}_attach(){let e=0;const{to:n}=this.animation;vn(n)&&(wo(n,this),zl(n)&&(e=n.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;vn(e)&&Ca(e,this)}_set(e,n=!0){const r=qt(e);if(!le.und(r)){const i=yn(this);if(!i||!Cn(r,i.getValue())){const o=Vl(r);!i||i.constructor!=o?Qu(this,o.create(r)):i.setValue(r),i&&we.batchedUpdates(()=>{this._onChange(r,n)})}}return yn(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,xi(this,"onStart",ln(this,wi(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),sr(this.animation.onChange,e,this)),sr(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){const e=this.animation;yn(this).reset(qt(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),Nn(this)||(sd(this,!0),_i(this)||this._resume())}_resume(){En.skipAnimation?this.finish():rs.start(this)}_stop(e,n){if(Nn(this)){sd(this,!1);const r=this.animation;Fe(r.values,o=>{o.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),Da(this,{type:"idle",parent:this});const i=n?Ur(this.get()):ln(this.get(),wi(this,e??r.to));Fi(this._pendingCalls,i),r.changed&&(r.changed=!1,xi(this,"onRest",i,this))}}}function wi(t,e){const n=ro(e),r=ro(t.get());return Cn(r,n)}function wm(t,e=t.loop,n=t.to){let r=sr(e);if(r){const i=r!==!0&&gm(r),o=(i||t).reverse,a=!i||i.reset;return oo(ht({},t,{loop:e,default:!1,pause:void 0,to:!o||Fl(n)?n:void 0,from:a?t.from:void 0,reset:a},i))}}function oo(t){const{to:e,from:n}=t=gm(t),r=new Set;return le.obj(e)&&ud(e,r),le.obj(n)&&ud(n,r),t.keys=r.size?Array.from(r):null,t}function NE(t){const e=oo(t);return le.und(e.default)&&(e.default=tc(e)),e}function ud(t,e){Rn(t,(n,r)=>n!=null&&e.add(r))}const qE=["onStart","onRest","onChange","onPause","onResume"];function cd(t,e,n){t.animation[n]=e[n]!==mm(e,n)?pm(e[n],t.key):void 0}function xi(t,e,...n){var r,i,o,a;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(a=t.defaultProps)[e])==null||o.call(a,...n)}const BE=["onStart","onChange","onRest"];let $E=1;class WE{constructor(e,n){this.id=$E++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start(ht({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,r)=>e[r]=n.get()),e}set(e){for(const n in e){const r=e[n];le.und(r)||this.springs[n].set(r)}}update(e){return e&&this.queue.push(oo(e)),this}start(e){let{queue:n}=this;return e?n=Yt(e).map(oo):this.queue=[],this._flush?this._flush(this,n):(Am(this,n),ql(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const r=this.springs;Fe(Yt(n),i=>r[i].stop(!!e))}else io(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(le.und(e))this.start({pause:!0});else{const n=this.springs;Fe(Yt(e),r=>n[r].pause())}return this}resume(e){if(le.und(e))this.start({pause:!1});else{const n=this.springs;Fe(Yt(e),r=>n[r].resume())}return this}each(e){Rn(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:r}=this._events,i=this._active.size>0,o=this._changed.size>0;(i&&!this._started||o&&!this._started)&&(this._started=!0,zi(e,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));const a=!i&&this._started,s=o||a&&r.size?this.get():null;o&&n.size&&zi(n,([l,u])=>{u.value=s,l(u,this,this._item)}),a&&(this._started=!1,zi(r,([l,u])=>{u.value=s,l(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;we.onFrame(this._onFrame)}}function ql(t,e){return Promise.all(e.map(n=>xm(t,n))).then(n=>nc(t,n))}async function xm(t,e,n){const{keys:r,to:i,from:o,loop:a,onRest:s,onResolve:l}=e,u=le.obj(e.default)&&e.default;a&&(e.loop=!1),i===!1&&(e.to=null),o===!1&&(e.from=null);const c=le.arr(i)||le.fun(i)?i:void 0;c?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Fe(BE,g=>{const y=e[g];if(le.fun(y)){const m=t._events[g];e[g]=({finished:v,cancelled:b})=>{const _=m.get(y);_?(v||(_.finished=!1),b&&(_.cancelled=!0)):m.set(y,{value:null,finished:v||!1,cancelled:b||!1})},u&&(u[g]=e[g])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,Fi(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const d=(r||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),h=e.cancel===!0||mm(e,"cancel")===!0;(c||h&&f.asyncId)&&d.push(ym(++t._lastAsyncId,{props:e,state:f,actions:{pause:Il,resume:Il,start(g,y){h?(io(f,t._lastAsyncId),y(Ur(t))):(g.onRest=s,y(bm(c,g,f,t)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const p=nc(t,await Promise.all(d));if(a&&p.finished&&!(n&&p.noop)){const g=wm(e,a,i);if(g)return Am(t,[g]),xm(t,g,!0)}return l&&we.batchedUpdates(()=>l(p,t,t.item)),p}function fd(t,e){const n=ht({},t.springs);return e&&Fe(Yt(e),r=>{le.und(r.keys)&&(r=oo(r)),le.obj(r.to)||(r=ht({},r,{to:void 0})),Sm(n,r,i=>Tm(i))}),Em(t,n),n}function Em(t,e){Rn(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,wo(n,t))})}function Tm(t,e){const n=new jE;return n.key=t,e&&wo(n,e),n}function Sm(t,e,n){e.keys&&Fe(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function Am(t,e){Fe(e,n=>{Sm(t.springs,n,r=>Tm(r,t))})}function HE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const YE=["children"],ls=t=>{let{children:e}=t,n=HE(t,YE);const r=R.useContext(Ra),i=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=_E(()=>({pause:i,immediate:o}),[i,o]);const{Provider:a}=Ra;return R.createElement(a,{value:n},e)},Ra=XE(ls,{});ls.Provider=Ra.Provider;ls.Consumer=Ra.Consumer;function XE(t,e){return Object.assign(t,R.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}const KE=()=>{const t=[],e=function(i){vE();const o=[];return Fe(t,(a,s)=>{if(le.und(i))o.push(a.start());else{const l=n(i,a,s);l&&o.push(a.start(l))}}),o};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Fe(t,r=>r.pause(...arguments)),this},e.resume=function(){return Fe(t,r=>r.resume(...arguments)),this},e.set=function(r){Fe(t,i=>i.set(r))},e.start=function(r){const i=[];return Fe(t,(o,a)=>{if(le.und(r))i.push(o.start());else{const s=this._getProps(r,o,a);s&&i.push(o.start(s))}}),i},e.stop=function(){return Fe(t,r=>r.stop(...arguments)),this},e.update=function(r){return Fe(t,(i,o)=>i.update(this._getProps(r,i,o))),this};const n=function(i,o,a){return le.fun(i)?i(a,o):i};return e._getProps=n,e};function ZE(t,e,n){const r=le.fun(e)&&e;r&&!n&&(n=[]);const i=R.useMemo(()=>r||arguments.length==3?KE():void 0,[]),o=R.useRef(0),a=fm(),s=R.useMemo(()=>({ctrls:[],queue:[],flush(m,v){const b=fd(m,v);return o.current>0&&!s.queue.length&&!Object.keys(b).some(w=>!m.springs[w])?ql(m,v):new Promise(w=>{Em(m,b),s.queue.push(()=>{w(ql(m,v))}),a()})}}),[]),l=R.useRef([...s.ctrls]),u=[],c=Jf(t)||0;R.useMemo(()=>{Fe(l.current.slice(t,c),m=>{IE(m,i),m.stop(!0)}),l.current.length=t,f(c,t)},[t]),R.useMemo(()=>{f(0,Math.min(c,t))},n);function f(m,v){for(let b=m;b<v;b++){const _=l.current[b]||(l.current[b]=new WE(null,s.flush)),w=r?r(b,_):e[b];w&&(u[b]=NE(w))}}const d=l.current.map((m,v)=>fd(m,u[v])),h=R.useContext(ls),p=Jf(h),g=h!==p&&RE(h);Zu(()=>{o.current++,s.ctrls=l.current;const{queue:m}=s;m.length&&(s.queue=[],Fe(m,v=>v())),Fe(l.current,(v,b)=>{i==null||i.add(v),g&&v.start({default:h});const _=u[b];_&&(LE(v,_.ref),v.ref?v.queue.push(_):v.start(_))})}),dm(()=>()=>{Fe(s.ctrls,m=>m.stop(!0))});const y=d.map(m=>ht({},m));return i?[y,i]:y}function Vt(t,e){const n=le.fun(t),[[r],i]=ZE(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}let dd;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(dd||(dd={}));class QE extends rc{constructor(e,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=to(...n);const r=this._get(),i=Vl(r);Qu(this,i.create(r))}advance(e){const n=this._get(),r=this.get();Cn(n,r)||(yn(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&hd(this._active)&&nl(this)}_get(){const e=le.arr(this.source)?this.source.map(qt):Yt(qt(this.source));return this.calc(...e)}_start(){this.idle&&!hd(this._active)&&(this.idle=!1,Fe(ss(this),e=>{e.done=!1}),En.skipAnimation?(we.batchedUpdates(()=>this.advance()),nl(this)):rs.start(this))}_attach(){let e=1;Fe(Yt(this.source),n=>{vn(n)&&wo(n,this),zl(n)&&(n.idle||this._active.add(n),e=Math.max(e,n.priority+1))}),this.priority=e,this._start()}_detach(){Fe(Yt(this.source),e=>{vn(e)&&Ca(e,this)}),this._active.clear(),nl(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Yt(this.source).reduce((n,r)=>Math.max(n,(zl(r)?r.priority:0)+1),0))}}function JE(t){return t.idle!==!1}function hd(t){return!t.size||Array.from(t).every(JE)}function nl(t){t.idle||(t.idle=!0,Fe(ss(t),e=>{e.done=!0}),Da(t,{type:"idle",parent:t}))}En.assign({createStringInterpolator:um,to:(t,e)=>new QE(t,e)});const e2=["primitive"].concat(Object.keys(Zd).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));En.assign({createStringInterpolator:um,colors:Yx,frameLoop:"demand"});pg(()=>{we.advance()});const t2=OE(e2,{applyAnimatedValues:mg}),Je=t2.animated,Wo=(t,e)=>{const n=t[0].index!==null,r=new Set(Object.keys(t[0].attributes)),i=new Set(Object.keys(t[0].morphAttributes)),o={},a={},s=t[0].morphTargetsRelative,l=new nu;let u=0;if(t.forEach((c,f)=>{let d=0;if(n!==(c.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let h in c.attributes){if(!r.has(h))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+'. All geometries must have compatible attributes; make sure "'+h+'" attribute exists among all geometries, or in none of them.'),null;o[h]===void 0&&(o[h]=[]),o[h].push(c.attributes[h]),d++}if(d!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". Make sure all geometries have the same number of attributes."),null;if(s!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let h in c.morphAttributes){if(!i.has(h))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+".  .morphAttributes must be consistent throughout all geometries."),null;a[h]===void 0&&(a[h]=[]),a[h].push(c.morphAttributes[h])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(c.userData),e){let h;if(c.index)h=c.index.count;else if(c.attributes.position!==void 0)h=c.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,h,f),u+=h}}),n){let c=0;const f=[];t.forEach(d=>{const h=d.index;for(let p=0;p<h.count;++p)f.push(h.getX(p)+c);c+=d.attributes.position.count}),l.setIndex(f)}for(let c in o){const f=pd(o[c]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,f)}for(let c in a){const f=a[c][0].length;if(f===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let d=0;d<f;++d){const h=[];for(let g=0;g<a[c].length;++g)h.push(a[c][g][d]);const p=pd(h);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(p)}}return l},pd=t=>{let e,n,r,i=0;if(t.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(n===void 0&&(n=o.itemSize),n!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=o.array.length}),e&&n){const o=new e(i);let a=0;return t.forEach(s=>{o.set(s.array,a),a+=s.array.length}),new eh(o,n,r)}},rl=new gg,il=new _e,Er=new _e,an=new _e,kn=new _e,pn=new _e,On=new _e,Dn=new _e,Ei=new _e,Ti=new _e,Si=new _e,Ho=new _e,Ai=new _e,ki=new _e,Oi=new _e;class md{constructor(e,n,r){this.camera=e,this.scene=n,this.startPoint=new _e,this.endPoint=new _e,this.collection=[],this.deep=r||Number.MAX_VALUE}select(e,n){return this.startPoint=e||this.startPoint,this.endPoint=n||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(rl,this.scene),this.collection}updateFrustum(e,n){if(e=e||this.startPoint,n=n||this.endPoint,e.x===n.x&&(n.x+=Number.EPSILON),e.y===n.y&&(n.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){Er.copy(e),Er.x=Math.min(e.x,n.x),Er.y=Math.max(e.y,n.y),n.x=Math.max(e.x,n.x),n.y=Math.min(e.y,n.y),an.setFromMatrixPosition(this.camera.matrixWorld),kn.copy(Er),pn.set(n.x,Er.y,0),On.copy(n),Dn.set(Er.x,n.y,0),kn.unproject(this.camera),pn.unproject(this.camera),On.unproject(this.camera),Dn.unproject(this.camera),Ai.copy(kn).sub(an),ki.copy(pn).sub(an),Oi.copy(On).sub(an),Ai.normalize(),ki.normalize(),Oi.normalize(),Ai.multiplyScalar(this.deep),ki.multiplyScalar(this.deep),Oi.multiplyScalar(this.deep),Ai.add(an),ki.add(an),Oi.add(an);var r=rl.planes;r[0].setFromCoplanarPoints(an,kn,pn),r[1].setFromCoplanarPoints(an,pn,On),r[2].setFromCoplanarPoints(On,Dn,an),r[3].setFromCoplanarPoints(Dn,kn,an),r[4].setFromCoplanarPoints(pn,On,Dn),r[5].setFromCoplanarPoints(Oi,ki,Ai),r[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const i=Math.min(e.x,n.x),o=Math.max(e.y,n.y),a=Math.max(e.x,n.x),s=Math.min(e.y,n.y);kn.set(i,o,-1),pn.set(a,o,-1),On.set(a,s,-1),Dn.set(i,s,-1),Ei.set(i,o,1),Ti.set(a,o,1),Si.set(a,s,1),Ho.set(i,s,1),kn.unproject(this.camera),pn.unproject(this.camera),On.unproject(this.camera),Dn.unproject(this.camera),Ei.unproject(this.camera),Ti.unproject(this.camera),Si.unproject(this.camera),Ho.unproject(this.camera);var r=rl.planes;r[0].setFromCoplanarPoints(kn,Ei,Ti),r[1].setFromCoplanarPoints(pn,Ti,Si),r[2].setFromCoplanarPoints(Si,Ho,Dn),r[3].setFromCoplanarPoints(Ho,Ei,kn),r[4].setFromCoplanarPoints(pn,On,Dn),r[5].setFromCoplanarPoints(Si,Ti,Ei),r[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,n){if((n.isMesh||n.isLine||n.isPoints)&&n.material!==void 0&&(n.geometry.boundingSphere===null&&n.geometry.computeBoundingSphere(),il.copy(n.geometry.boundingSphere.center),il.applyMatrix4(n.matrixWorld),e.containsPoint(il)&&this.collection.push(n)),n.children.length>0)for(let r=0;r<n.children.length;r++)this.searchChildInFrustum(e,n.children[r])}}class qi extends yg{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,r,i){const o=this,a=new vg(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{n(o.parse(s))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=this;function r(k,M){if(k.nodeType!==1)return;const T=_(k);let P=!0,$=null;switch(k.nodeName){case"svg":break;case"style":o(k);break;case"g":M=p(k,M);break;case"path":M=p(k,M),k.hasAttribute("d")&&($=i(k));break;case"rect":M=p(k,M),$=l(k);break;case"polygon":M=p(k,M),$=u(k);break;case"polyline":M=p(k,M),$=c(k);break;case"circle":M=p(k,M),$=f(k);break;case"ellipse":M=p(k,M),$=d(k);break;case"line":M=p(k,M),$=h(k);break;case"defs":P=!1;break;case"mask":P=!1;break;case"use":M=p(k,M);const C=k.href.baseVal.substring(1),W=k.viewportElement.getElementById(C);W?r(W,M):console.warn("SVGLoader: 'use node' references non-existent node id: "+C);break}if($&&(M.fill!==void 0&&M.fill!=="none"&&$.color.setStyle(M.fill),E($,z),H.push($),$.userData={node:k,style:M}),P){const C=k.childNodes;for(let W=0;W<C.length;W++)r(C[W],M)}T&&(O.pop(),O.length>0?z.copy(O[O.length-1]):z.identity())}function i(k){const M=new er,T=new Oe,P=new Oe,$=new Oe;let C=!0,W=!1;const Q=k.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let X=0,N=Q.length;X<N;X++){const ie=Q[X],ne=ie.charAt(0),Z=ie.substr(1).trim();C===!0&&(W=!0,C=!1);let L;switch(ne){case"M":L=y(Z);for(let D=0,K=L.length;D<K;D+=2)T.x=L[D+0],T.y=L[D+1],P.x=T.x,P.y=T.y,D===0?M.moveTo(T.x,T.y):M.lineTo(T.x,T.y),D===0&&$.copy(T);break;case"H":L=y(Z);for(let D=0,K=L.length;D<K;D++)T.x=L[D],P.x=T.x,P.y=T.y,M.lineTo(T.x,T.y),D===0&&W===!0&&$.copy(T);break;case"V":L=y(Z);for(let D=0,K=L.length;D<K;D++)T.y=L[D],P.x=T.x,P.y=T.y,M.lineTo(T.x,T.y),D===0&&W===!0&&$.copy(T);break;case"L":L=y(Z);for(let D=0,K=L.length;D<K;D+=2)T.x=L[D+0],T.y=L[D+1],P.x=T.x,P.y=T.y,M.lineTo(T.x,T.y),D===0&&W===!0&&$.copy(T);break;case"C":L=y(Z);for(let D=0,K=L.length;D<K;D+=6)M.bezierCurveTo(L[D+0],L[D+1],L[D+2],L[D+3],L[D+4],L[D+5]),P.x=L[D+2],P.y=L[D+3],T.x=L[D+4],T.y=L[D+5],D===0&&W===!0&&$.copy(T);break;case"S":L=y(Z);for(let D=0,K=L.length;D<K;D+=4)M.bezierCurveTo(g(T.x,P.x),g(T.y,P.y),L[D+0],L[D+1],L[D+2],L[D+3]),P.x=L[D+0],P.y=L[D+1],T.x=L[D+2],T.y=L[D+3],D===0&&W===!0&&$.copy(T);break;case"Q":L=y(Z);for(let D=0,K=L.length;D<K;D+=4)M.quadraticCurveTo(L[D+0],L[D+1],L[D+2],L[D+3]),P.x=L[D+0],P.y=L[D+1],T.x=L[D+2],T.y=L[D+3],D===0&&W===!0&&$.copy(T);break;case"T":L=y(Z);for(let D=0,K=L.length;D<K;D+=2){const oe=g(T.x,P.x),re=g(T.y,P.y);M.quadraticCurveTo(oe,re,L[D+0],L[D+1]),P.x=oe,P.y=re,T.x=L[D+0],T.y=L[D+1],D===0&&W===!0&&$.copy(T)}break;case"A":L=y(Z,[3,4],7);for(let D=0,K=L.length;D<K;D+=7){if(L[D+5]==T.x&&L[D+6]==T.y)continue;const oe=T.clone();T.x=L[D+5],T.y=L[D+6],P.x=T.x,P.y=T.y,a(M,L[D],L[D+1],L[D+2],L[D+3],L[D+4],oe,T),D===0&&W===!0&&$.copy(T)}break;case"m":L=y(Z);for(let D=0,K=L.length;D<K;D+=2)T.x+=L[D+0],T.y+=L[D+1],P.x=T.x,P.y=T.y,D===0?M.moveTo(T.x,T.y):M.lineTo(T.x,T.y),D===0&&$.copy(T);break;case"h":L=y(Z);for(let D=0,K=L.length;D<K;D++)T.x+=L[D],P.x=T.x,P.y=T.y,M.lineTo(T.x,T.y),D===0&&W===!0&&$.copy(T);break;case"v":L=y(Z);for(let D=0,K=L.length;D<K;D++)T.y+=L[D],P.x=T.x,P.y=T.y,M.lineTo(T.x,T.y),D===0&&W===!0&&$.copy(T);break;case"l":L=y(Z);for(let D=0,K=L.length;D<K;D+=2)T.x+=L[D+0],T.y+=L[D+1],P.x=T.x,P.y=T.y,M.lineTo(T.x,T.y),D===0&&W===!0&&$.copy(T);break;case"c":L=y(Z);for(let D=0,K=L.length;D<K;D+=6)M.bezierCurveTo(T.x+L[D+0],T.y+L[D+1],T.x+L[D+2],T.y+L[D+3],T.x+L[D+4],T.y+L[D+5]),P.x=T.x+L[D+2],P.y=T.y+L[D+3],T.x+=L[D+4],T.y+=L[D+5],D===0&&W===!0&&$.copy(T);break;case"s":L=y(Z);for(let D=0,K=L.length;D<K;D+=4)M.bezierCurveTo(g(T.x,P.x),g(T.y,P.y),T.x+L[D+0],T.y+L[D+1],T.x+L[D+2],T.y+L[D+3]),P.x=T.x+L[D+0],P.y=T.y+L[D+1],T.x+=L[D+2],T.y+=L[D+3],D===0&&W===!0&&$.copy(T);break;case"q":L=y(Z);for(let D=0,K=L.length;D<K;D+=4)M.quadraticCurveTo(T.x+L[D+0],T.y+L[D+1],T.x+L[D+2],T.y+L[D+3]),P.x=T.x+L[D+0],P.y=T.y+L[D+1],T.x+=L[D+2],T.y+=L[D+3],D===0&&W===!0&&$.copy(T);break;case"t":L=y(Z);for(let D=0,K=L.length;D<K;D+=2){const oe=g(T.x,P.x),re=g(T.y,P.y);M.quadraticCurveTo(oe,re,T.x+L[D+0],T.y+L[D+1]),P.x=oe,P.y=re,T.x=T.x+L[D+0],T.y=T.y+L[D+1],D===0&&W===!0&&$.copy(T)}break;case"a":L=y(Z,[3,4],7);for(let D=0,K=L.length;D<K;D+=7){if(L[D+5]==0&&L[D+6]==0)continue;const oe=T.clone();T.x+=L[D+5],T.y+=L[D+6],P.x=T.x,P.y=T.y,a(M,L[D],L[D+1],L[D+2],L[D+3],L[D+4],oe,T),D===0&&W===!0&&$.copy(T)}break;case"Z":case"z":M.currentPath.autoClose=!0,M.currentPath.curves.length>0&&(T.copy($),M.currentPath.currentPoint.copy(T),C=!0);break;default:console.warn(ie)}W=!1}return M}function o(k){if(!(!k.sheet||!k.sheet.cssRules||!k.sheet.cssRules.length))for(let M=0;M<k.sheet.cssRules.length;M++){const T=k.sheet.cssRules[M];if(T.type!==1)continue;const P=T.selectorText.split(/,/gm).filter(Boolean).map($=>$.trim());for(let $=0;$<P.length;$++)V[P[$]]=Object.assign(V[P[$]]||{},T.style)}}function a(k,M,T,P,$,C,W,te){if(M==0||T==0){k.lineTo(te.x,te.y);return}P=P*Math.PI/180,M=Math.abs(M),T=Math.abs(T);const Q=(W.x-te.x)/2,X=(W.y-te.y)/2,N=Math.cos(P)*Q+Math.sin(P)*X,ie=-Math.sin(P)*Q+Math.cos(P)*X;let ne=M*M,Z=T*T;const L=N*N,D=ie*ie,K=L/ne+D/Z;if(K>1){const me=Math.sqrt(K);M=me*M,T=me*T,ne=M*M,Z=T*T}const oe=ne*D+Z*L,re=(ne*Z-oe)/oe;let J=Math.sqrt(Math.max(0,re));$===C&&(J=-J);const he=J*M*ie/T,fe=-J*T*N/M,pe=Math.cos(P)*he-Math.sin(P)*fe+(W.x+te.x)/2,de=Math.sin(P)*he+Math.cos(P)*fe+(W.y+te.y)/2,Ce=s(1,0,(N-he)/M,(ie-fe)/T),xe=s((N-he)/M,(ie-fe)/T,(-N-he)/M,(-ie-fe)/T)%(Math.PI*2);k.currentPath.absellipse(pe,de,M,T,Ce,Ce+xe,C===0,P)}function s(k,M,T,P){const $=k*T+M*P,C=Math.sqrt(k*k+M*M)*Math.sqrt(T*T+P*P);let W=Math.acos(Math.max(-1,Math.min(1,$/C)));return k*P-M*T<0&&(W=-W),W}function l(k){const M=b(k.getAttribute("x")||0),T=b(k.getAttribute("y")||0),P=b(k.getAttribute("rx")||k.getAttribute("ry")||0),$=b(k.getAttribute("ry")||k.getAttribute("rx")||0),C=b(k.getAttribute("width")),W=b(k.getAttribute("height")),te=1-.551915024494,Q=new er;return Q.moveTo(M+P,T),Q.lineTo(M+C-P,T),(P!==0||$!==0)&&Q.bezierCurveTo(M+C-P*te,T,M+C,T+$*te,M+C,T+$),Q.lineTo(M+C,T+W-$),(P!==0||$!==0)&&Q.bezierCurveTo(M+C,T+W-$*te,M+C-P*te,T+W,M+C-P,T+W),Q.lineTo(M+P,T+W),(P!==0||$!==0)&&Q.bezierCurveTo(M+P*te,T+W,M,T+W-$*te,M,T+W-$),Q.lineTo(M,T+$),(P!==0||$!==0)&&Q.bezierCurveTo(M,T+$*te,M+P*te,T,M+P,T),Q}function u(k){function M(C,W,te){const Q=b(W),X=b(te);$===0?P.moveTo(Q,X):P.lineTo(Q,X),$++}const T=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,P=new er;let $=0;return k.getAttribute("points").replace(T,M),P.currentPath.autoClose=!0,P}function c(k){function M(C,W,te){const Q=b(W),X=b(te);$===0?P.moveTo(Q,X):P.lineTo(Q,X),$++}const T=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,P=new er;let $=0;return k.getAttribute("points").replace(T,M),P.currentPath.autoClose=!1,P}function f(k){const M=b(k.getAttribute("cx")||0),T=b(k.getAttribute("cy")||0),P=b(k.getAttribute("r")||0),$=new Ls;$.absarc(M,T,P,0,Math.PI*2);const C=new er;return C.subPaths.push($),C}function d(k){const M=b(k.getAttribute("cx")||0),T=b(k.getAttribute("cy")||0),P=b(k.getAttribute("rx")||0),$=b(k.getAttribute("ry")||0),C=new Ls;C.absellipse(M,T,P,$,0,Math.PI*2);const W=new er;return W.subPaths.push(C),W}function h(k){const M=b(k.getAttribute("x1")||0),T=b(k.getAttribute("y1")||0),P=b(k.getAttribute("x2")||0),$=b(k.getAttribute("y2")||0),C=new er;return C.moveTo(M,T),C.lineTo(P,$),C.currentPath.autoClose=!1,C}function p(k,M){M=Object.assign({},M);let T={};if(k.hasAttribute("class")){const W=k.getAttribute("class").split(/\s/).filter(Boolean).map(te=>te.trim());for(let te=0;te<W.length;te++)T=Object.assign(T,V["."+W[te]])}k.hasAttribute("id")&&(T=Object.assign(T,V["#"+k.getAttribute("id")]));function P(W,te,Q){Q===void 0&&(Q=function(N){return N.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),N}),k.hasAttribute(W)&&(M[te]=Q(k.getAttribute(W))),T[W]&&(M[te]=Q(T[W])),k.style&&k.style[W]!==""&&(M[te]=Q(k.style[W]))}function $(W){return Math.max(0,Math.min(1,b(W)))}function C(W){return Math.max(0,b(W))}return P("fill","fill"),P("fill-opacity","fillOpacity",$),P("fill-rule","fillRule"),P("opacity","opacity",$),P("stroke","stroke"),P("stroke-opacity","strokeOpacity",$),P("stroke-width","strokeWidth",C),P("stroke-linejoin","strokeLineJoin"),P("stroke-linecap","strokeLineCap"),P("stroke-miterlimit","strokeMiterLimit",C),P("visibility","visibility"),M}function g(k,M){return k-(M-k)}function y(k,M,T){if(typeof k!="string")throw new TypeError("Invalid input: "+typeof k);const P={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},$=0,C=1,W=2,te=3;let Q=$,X=!0,N="",ie="";const ne=[];function Z(oe,re,J){const he=new SyntaxError('Unexpected character "'+oe+'" at index '+re+".");throw he.partial=J,he}function L(){N!==""&&(ie===""?ne.push(Number(N)):ne.push(Number(N)*Math.pow(10,Number(ie)))),N="",ie=""}let D;const K=k.length;for(let oe=0;oe<K;oe++){if(D=k[oe],Array.isArray(M)&&M.includes(ne.length%T)&&P.FLAGS.test(D)){Q=C,N=D,L();continue}if(Q===$){if(P.WHITESPACE.test(D))continue;if(P.DIGIT.test(D)||P.SIGN.test(D)){Q=C,N=D;continue}if(P.POINT.test(D)){Q=W,N=D;continue}P.COMMA.test(D)&&(X&&Z(D,oe,ne),X=!0)}if(Q===C){if(P.DIGIT.test(D)){N+=D;continue}if(P.POINT.test(D)){N+=D,Q=W;continue}if(P.EXP.test(D)){Q=te;continue}P.SIGN.test(D)&&N.length===1&&P.SIGN.test(N[0])&&Z(D,oe,ne)}if(Q===W){if(P.DIGIT.test(D)){N+=D;continue}if(P.EXP.test(D)){Q=te;continue}P.POINT.test(D)&&N[N.length-1]==="."&&Z(D,oe,ne)}if(Q===te){if(P.DIGIT.test(D)){ie+=D;continue}if(P.SIGN.test(D)){if(ie===""){ie+=D;continue}ie.length===1&&P.SIGN.test(ie)&&Z(D,oe,ne)}}P.WHITESPACE.test(D)?(L(),Q=$,X=!1):P.COMMA.test(D)?(L(),Q=$,X=!0):P.SIGN.test(D)?(L(),Q=C,N=D):P.POINT.test(D)?(L(),Q=W,N=D):Z(D,oe,ne)}return L(),ne}const m=["mm","cm","in","pt","pc","px"],v={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function b(k){let M="px";if(typeof k=="string"||k instanceof String)for(let P=0,$=m.length;P<$;P++){const C=m[P];if(k.endsWith(C)){M=C,k=k.substring(0,k.length-C.length);break}}let T;return M==="px"&&n.defaultUnit!=="px"?T=v.in[n.defaultUnit]/n.defaultDPI:(T=v[M][n.defaultUnit],T<0&&(T=v[M].in*n.defaultDPI)),T*parseFloat(k)}function _(k){if(!(k.hasAttribute("transform")||k.nodeName==="use"&&(k.hasAttribute("x")||k.hasAttribute("y"))))return null;const M=w(k);return O.length>0&&M.premultiply(O[O.length-1]),z.copy(M),O.push(M),M}function w(k){const M=new ar,T=G;if(k.nodeName==="use"&&(k.hasAttribute("x")||k.hasAttribute("y"))){const P=b(k.getAttribute("x")),$=b(k.getAttribute("y"));M.translate(P,$)}if(k.hasAttribute("transform")){const P=k.getAttribute("transform").split(")");for(let $=P.length-1;$>=0;$--){const C=P[$].trim();if(C==="")continue;const W=C.indexOf("("),te=C.length;if(W>0&&W<te){const Q=C.substr(0,W),X=y(C.substr(W+1,te-W-1));switch(T.identity(),Q){case"translate":if(X.length>=1){const N=X[0];let ie=N;X.length>=2&&(ie=X[1]),T.translate(N,ie)}break;case"rotate":if(X.length>=1){let N=0,ie=0,ne=0;N=-X[0]*Math.PI/180,X.length>=3&&(ie=X[1],ne=X[2]),q.identity().translate(-ie,-ne),Y.identity().rotate(N),I.multiplyMatrices(Y,q),q.identity().translate(ie,ne),T.multiplyMatrices(q,I)}break;case"scale":if(X.length>=1){const N=X[0];let ie=N;X.length>=2&&(ie=X[1]),T.scale(N,ie)}break;case"skewX":X.length===1&&T.set(1,Math.tan(X[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":X.length===1&&T.set(1,0,0,Math.tan(X[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":X.length===6&&T.set(X[0],X[2],X[4],X[1],X[3],X[5],0,0,1);break}}M.premultiply(T)}}return M}function E(k,M){function T(C){F.set(C.x,C.y,1).applyMatrix3(M),C.set(F.x,F.y)}const P=S(M),$=k.subPaths;for(let C=0,W=$.length;C<W;C++){const Q=$[C].curves;for(let X=0;X<Q.length;X++){const N=Q[X];N.isLineCurve?(T(N.v1),T(N.v2)):N.isCubicBezierCurve?(T(N.v0),T(N.v1),T(N.v2),T(N.v3)):N.isQuadraticBezierCurve?(T(N.v0),T(N.v1),T(N.v2)):N.isEllipseCurve&&(P&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),B.set(N.aX,N.aY),T(B),N.aX=B.x,N.aY=B.y,N.xRadius*=x(M),N.yRadius*=A(M))}}}function S(k){return k.elements[1]!==0||k.elements[3]!==0}function x(k){const M=k.elements;return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function A(k){const M=k.elements;return Math.sqrt(M[3]*M[3]+M[4]*M[4])}const H=[],V={},O=[],G=new ar,q=new ar,Y=new ar,I=new ar,B=new Oe,F=new _e,z=new ar,j=new DOMParser().parseFromString(e,"image/svg+xml");return r(j.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:H,xml:j.documentElement}}static createShapes(e){const r={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},i={loc:r.ORIGIN,t:0};function o(y,m,v,b){const _=y.x,w=m.x,E=v.x,S=b.x,x=y.y,A=m.y,H=v.y,V=b.y,O=(S-E)*(x-H)-(V-H)*(_-E),G=(w-_)*(x-H)-(A-x)*(_-E),q=(V-H)*(w-_)-(S-E)*(A-x),Y=O/q,I=G/q;if(q===0&&O!==0||Y<=0||Y>=1||I<0||I>1)return null;if(O===0&&q===0){for(let B=0;B<2;B++)if(a(B===0?v:b,y,m),i.loc==r.ORIGIN){const F=B===0?v:b;return{x:F.x,y:F.y,t:i.t}}else if(i.loc==r.BETWEEN){const F=+(_+i.t*(w-_)).toPrecision(10),z=+(x+i.t*(A-x)).toPrecision(10);return{x:F,y:z,t:i.t}}return null}else{for(let z=0;z<2;z++)if(a(z===0?v:b,y,m),i.loc==r.ORIGIN){const j=z===0?v:b;return{x:j.x,y:j.y,t:i.t}}const B=+(_+Y*(w-_)).toPrecision(10),F=+(x+Y*(A-x)).toPrecision(10);return{x:B,y:F,t:Y}}}function a(y,m,v){const b=v.x-m.x,_=v.y-m.y,w=y.x-m.x,E=y.y-m.y,S=b*E-w*_;if(y.x===m.x&&y.y===m.y){i.loc=r.ORIGIN,i.t=0;return}if(y.x===v.x&&y.y===v.y){i.loc=r.DESTINATION,i.t=1;return}if(S<-Number.EPSILON){i.loc=r.LEFT;return}if(S>Number.EPSILON){i.loc=r.RIGHT;return}if(b*w<0||_*E<0){i.loc=r.BEHIND;return}if(Math.sqrt(b*b+_*_)<Math.sqrt(w*w+E*E)){i.loc=r.BEYOND;return}let x;b!==0?x=w/b:x=E/_,i.loc=r.BETWEEN,i.t=x}function s(y,m){const v=[],b=[];for(let _=1;_<y.length;_++){const w=y[_-1],E=y[_];for(let S=1;S<m.length;S++){const x=m[S-1],A=m[S],H=o(w,E,x,A);H!==null&&v.find(V=>V.t<=H.t+Number.EPSILON&&V.t>=H.t-Number.EPSILON)===void 0&&(v.push(H),b.push(new Oe(H.x,H.y)))}}return b}function l(y,m,v){const b=new Oe;m.getCenter(b);const _=[];return v.forEach(w=>{w.boundingBox.containsPoint(b)&&s(y,w.points).forEach(S=>{_.push({identifier:w.identifier,isCW:w.isCW,point:S})})}),_.sort((w,E)=>w.point.x-E.point.x),_}function u(y,m,v,b,_){(_==null||_==="")&&(_="nonzero");const w=new Oe;y.boundingBox.getCenter(w);const E=[new Oe(v,w.y),new Oe(b,w.y)],S=l(E,y.boundingBox,m);S.sort((G,q)=>G.point.x-q.point.x);const x=[],A=[];S.forEach(G=>{G.identifier===y.identifier?x.push(G):A.push(G)});const H=x[0].point.x,V=[];let O=0;for(;O<A.length&&A[O].point.x<H;)V.length>0&&V[V.length-1]===A[O].identifier?V.pop():V.push(A[O].identifier),O++;if(V.push(y.identifier),_==="evenodd"){const G=V.length%2===0,q=V[V.length-2];return{identifier:y.identifier,isHole:G,for:q}}else if(_==="nonzero"){let G=!0,q=null,Y=null;for(let I=0;I<V.length;I++){const B=V[I];G?(Y=m[B].isCW,G=!1,q=B):Y!==m[B].isCW&&(Y=m[B].isCW,G=!0)}return{identifier:y.identifier,isHole:G,for:q}}else console.warn('fill-rule: "'+_+'" is currently not implemented.')}let c=0,f=999999999,d=-999999999,h=e.subPaths.map(y=>{const m=y.getPoints();let v=-999999999,b=999999999,_=-999999999,w=999999999;for(let E=0;E<m.length;E++){const S=m[E];S.y>v&&(v=S.y),S.y<b&&(b=S.y),S.x>_&&(_=S.x),S.x<w&&(w=S.x)}return d<=_&&(d=_+1),f>=w&&(f=w-1),{curves:y.curves,points:m,isCW:bg.isClockWise(m),identifier:c++,boundingBox:new _g(new Oe(w,b),new Oe(_,v))}});h=h.filter(y=>y.points.length>1);const p=h.map(y=>u(y,h,f,d,e.userData.style.fillRule)),g=[];return h.forEach(y=>{if(!p[y.identifier].isHole){const v=new wg;v.curves=y.curves,p.filter(_=>_.isHole&&_.for===y.identifier).forEach(_=>{const w=h[_.identifier],E=new Ls;E.curves=w.curves,v.holes.push(E)}),g.push(v)}}),g}static getStrokeStyle(e,n,r,i,o){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",r=r!==void 0?r:"miter",i=i!==void 0?i:"butt",o=o!==void 0?o:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:r,strokeLineCap:i,strokeMiterLimit:o}}static pointsToStroke(e,n,r,i){const o=[],a=[],s=[];if(qi.pointsToStrokeWithBuffers(e,n,r,i,o,a,s)===0)return null;const l=new nu;return l.setAttribute("position",new na(o,3)),l.setAttribute("normal",new na(a,3)),l.setAttribute("uv",new na(s,2)),l}static pointsToStrokeWithBuffers(e,n,r,i,o,a,s,l){const u=new Oe,c=new Oe,f=new Oe,d=new Oe,h=new Oe,p=new Oe,g=new Oe,y=new Oe,m=new Oe,v=new Oe,b=new Oe,_=new Oe,w=new Oe,E=new Oe,S=new Oe,x=new Oe,A=new Oe;r=r!==void 0?r:12,i=i!==void 0?i:.001,l=l!==void 0?l:0,e=ie(e);const H=e.length;if(H<2)return 0;const V=e[0].equals(e[H-1]);let O,G=e[0],q;const Y=n.strokeWidth/2,I=1/(H-1);let B=0,F,z,j,U,k=!1,M=0,T=l*3,P=l*2;$(e[0],e[1],u).multiplyScalar(Y),y.copy(e[0]).sub(u),m.copy(e[0]).add(u),v.copy(y),b.copy(m);for(let ne=1;ne<H;ne++){O=e[ne],ne===H-1?V?q=e[1]:q=void 0:q=e[ne+1];const Z=u;if($(G,O,Z),f.copy(Z).multiplyScalar(Y),_.copy(O).sub(f),w.copy(O).add(f),F=B+I,z=!1,q!==void 0){$(O,q,c),f.copy(c).multiplyScalar(Y),E.copy(O).sub(f),S.copy(O).add(f),j=!0,f.subVectors(q,G),Z.dot(f)<0&&(j=!1),ne===1&&(k=j),f.subVectors(q,O),f.normalize();const L=Math.abs(Z.dot(f));if(L!==0){const D=Y/L;f.multiplyScalar(-D),d.subVectors(O,G),h.copy(d).setLength(D).add(f),x.copy(h).negate();const K=h.length(),oe=d.length();d.divideScalar(oe),p.subVectors(q,O);const re=p.length();switch(p.divideScalar(re),d.dot(x)<oe&&p.dot(x)<re&&(z=!0),A.copy(h).add(O),x.add(O),U=!1,z?j?(S.copy(x),w.copy(x)):(E.copy(x),_.copy(x)):te(),n.strokeLineJoin){case"bevel":Q(j,z,F);break;case"round":X(j,z),j?W(O,_,E,F,0):W(O,S,w,F,1);break;case"miter":case"miter-clip":default:const J=Y*n.strokeMiterLimit/K;if(J<1)if(n.strokeLineJoin!=="miter-clip"){Q(j,z,F);break}else X(j,z),j?(p.subVectors(A,_).multiplyScalar(J).add(_),g.subVectors(A,E).multiplyScalar(J).add(E),C(_,F,0),C(p,F,0),C(O,F,.5),C(O,F,.5),C(p,F,0),C(g,F,0),C(O,F,.5),C(g,F,0),C(E,F,0)):(p.subVectors(A,w).multiplyScalar(J).add(w),g.subVectors(A,S).multiplyScalar(J).add(S),C(w,F,1),C(p,F,1),C(O,F,.5),C(O,F,.5),C(p,F,1),C(g,F,1),C(O,F,.5),C(g,F,1),C(S,F,1));else z?(j?(C(m,B,1),C(y,B,0),C(A,F,0),C(m,B,1),C(A,F,0),C(x,F,1)):(C(m,B,1),C(y,B,0),C(A,F,1),C(y,B,0),C(x,F,0),C(A,F,1)),j?E.copy(A):S.copy(A)):j?(C(_,F,0),C(A,F,0),C(O,F,.5),C(O,F,.5),C(A,F,0),C(E,F,0)):(C(w,F,1),C(A,F,1),C(O,F,.5),C(O,F,.5),C(A,F,1),C(S,F,1)),U=!0;break}}else te()}else te();!V&&ne===H-1&&N(e[0],v,b,j,!0,B),B=F,G=O,y.copy(E),m.copy(S)}if(!V)N(O,_,w,j,!1,F);else if(z&&o){let ne=A,Z=x;k!==j&&(ne=x,Z=A),j?(U||k)&&(Z.toArray(o,0*3),Z.toArray(o,3*3),U&&ne.toArray(o,1*3)):(U||!k)&&(Z.toArray(o,1*3),Z.toArray(o,3*3),U&&ne.toArray(o,0*3))}return M;function $(ne,Z,L){return L.subVectors(Z,ne),L.set(-L.y,L.x).normalize()}function C(ne,Z,L){o&&(o[T]=ne.x,o[T+1]=ne.y,o[T+2]=0,a&&(a[T]=0,a[T+1]=0,a[T+2]=1),T+=3,s&&(s[P]=Z,s[P+1]=L,P+=2)),M+=3}function W(ne,Z,L,D,K){u.copy(Z).sub(ne).normalize(),c.copy(L).sub(ne).normalize();let oe=Math.PI;const re=u.dot(c);Math.abs(re)<1&&(oe=Math.abs(Math.acos(re))),oe/=r,f.copy(Z);for(let J=0,he=r-1;J<he;J++)d.copy(f).rotateAround(ne,oe),C(f,D,K),C(d,D,K),C(ne,D,.5),f.copy(d);C(d,D,K),C(L,D,K),C(ne,D,.5)}function te(){C(m,B,1),C(y,B,0),C(_,F,0),C(m,B,1),C(_,F,1),C(w,F,0)}function Q(ne,Z,L){Z?ne?(C(m,B,1),C(y,B,0),C(_,F,0),C(m,B,1),C(_,F,0),C(x,F,1),C(_,L,0),C(E,L,0),C(x,L,.5)):(C(m,B,1),C(y,B,0),C(w,F,1),C(y,B,0),C(x,F,0),C(w,F,1),C(w,L,1),C(S,L,0),C(x,L,.5)):ne?(C(_,L,0),C(E,L,0),C(O,L,.5)):(C(w,L,1),C(S,L,0),C(O,L,.5))}function X(ne,Z){Z&&(ne?(C(m,B,1),C(y,B,0),C(_,F,0),C(m,B,1),C(_,F,0),C(x,F,1),C(_,B,0),C(O,F,.5),C(x,F,1),C(O,F,.5),C(E,B,0),C(x,F,1)):(C(m,B,1),C(y,B,0),C(w,F,1),C(y,B,0),C(x,F,0),C(w,F,1),C(w,B,1),C(x,F,0),C(O,F,.5),C(O,F,.5),C(x,F,0),C(S,B,1)))}function N(ne,Z,L,D,K,oe){switch(n.strokeLineCap){case"round":K?W(ne,L,Z,oe,.5):W(ne,Z,L,oe,.5);break;case"square":if(K)u.subVectors(Z,ne),c.set(u.y,-u.x),f.addVectors(u,c).add(ne),d.subVectors(c,u).add(ne),D?(f.toArray(o,1*3),d.toArray(o,0*3),d.toArray(o,3*3)):(f.toArray(o,1*3),f.toArray(o,3*3),d.toArray(o,0*3));else{u.subVectors(L,ne),c.set(u.y,-u.x),f.addVectors(u,c).add(ne),d.subVectors(c,u).add(ne);const re=o.length;D?(f.toArray(o,re-1*3),d.toArray(o,re-2*3),d.toArray(o,re-4*3)):(f.toArray(o,re-2*3),d.toArray(o,re-1*3),d.toArray(o,re-4*3))}break}}function ie(ne){let Z=!1;for(let D=1,K=ne.length-1;D<K;D++)if(ne[D].distanceTo(ne[D+1])<i){Z=!0;break}if(!Z)return ne;const L=[];L.push(ne[0]);for(let D=1,K=ne.length-1;D<K;D++)ne[D].distanceTo(ne[D+1])>=i&&L.push(ne[D]);return L.push(ne[ne.length-1]),L}}}const ic=R.forwardRef(function({children:e,follow:n=!0,lockX:r=!1,lockY:i=!1,lockZ:o=!1,...a},s){const l=R.useRef(null),u=R.useRef(null),c=new ru;return Ba(({camera:f})=>{if(!n||!u.current)return;const d=u.current.rotation.clone();u.current.updateMatrix(),u.current.updateWorldMatrix(!1,!1),u.current.getWorldQuaternion(c),f.getWorldQuaternion(l.current.quaternion).premultiply(c.invert()),r&&(u.current.rotation.x=d.x),i&&(u.current.rotation.y=d.y),o&&(u.current.rotation.z=d.z)}),R.useImperativeHandle(s,()=>u.current,[]),R.createElement("group",bn({ref:u,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},a),R.createElement("group",{ref:l},e))});function n2(){var t=Object.create(null);function e(i,o){var a=i.id,s=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!t[a])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(h){if(h instanceof Error)throw h}),d=t[d.id].value),d}),u=r("<"+s+">.init",u),c&&(c=r("<"+s+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[a]={id:a,value:f,getTransferables:c},o(f)}catch(d){d&&d.noLog||console.error(d),o(d)}}function n(i,o){var a,s=i.id,l=i.args;(!t[s]||typeof t[s].value!="function")&&o(new Error("Worker module "+s+": not found or its 'init' did not return a function"));try{var u=(a=t[s]).value.apply(a,l);u&&typeof u.then=="function"?u.then(c,function(f){return o(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){o(f)}function c(f){try{var d=t[s].getTransferables&&t[s].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),o(f,d)}catch(h){console.error(h),o(h)}}}function r(i,o){var a=void 0;self.troikaDefine=function(l){return a=l};var s=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(s)}catch(l){console.error(l)}return URL.revokeObjectURL(s),delete self.troikaDefine,a}self.addEventListener("message",function(i){var o=i.data,a=o.messageId,s=o.action,l=o.data;try{s==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof u=="function"}})}),s==="callModule"&&n(l,function(u,c){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:a,success:!1,error:u.stack})}})}function r2(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var i=Promise.all(n).then(function(o){return r.apply(null,o)});return e._getInitResult=function(){return i},i},e}var km=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return km=function(){return t},t},i2=0,o2=0,ol=!1,Bi=Object.create(null),$i=Object.create(null),Bl=Object.create(null);function xo(t){if((!t||typeof t.init!="function")&&!ol)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!km())return r2(t);i==null&&(i="#default");var o="workerModule"+ ++i2,a=t.name||o,s=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(ol=!0,u=xo({workerId:i,name:"<"+a+"> function dependency: "+u.name,init:`function(){return (
`+la(u)+`
)}`}),ol=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(!s){s=gd(i,"registerModule",l.workerModuleData);var f=function(){s=null,$i[i].delete(f)};($i[i]||($i[i]=new Set)).add(f)}return s.then(function(d){var h=d.isCallable;if(h)return gd(i,"callModule",{id:o,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:la(n),getTransferables:r&&la(r)},l}function a2(t){$i[t]&&$i[t].forEach(function(e){e()}),Bi[t]&&(Bi[t].terminate(),delete Bi[t])}function la(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function s2(t){var e=Bi[t];if(!e){var n=la(n2);e=Bi[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,o=i.messageId,a=Bl[o];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Bl[o],a(i)}}return e}function gd(t,e,n){return new Promise(function(r,i){var o=++o2;Bl[o]=function(a){a.success?r(a.result):i(new Error("Error in worker "+e+" call: "+a.error))},s2(t).postMessage({messageId:o,action:e,data:n})})}function Om(){var t=function(e){function n(z,j,U,k,M,T,P,$){var C=1-P;$.x=C*C*z+2*C*P*U+P*P*M,$.y=C*C*j+2*C*P*k+P*P*T}function r(z,j,U,k,M,T,P,$,C,W){var te=1-C;W.x=te*te*te*z+3*te*te*C*U+3*te*C*C*M+C*C*C*P,W.y=te*te*te*j+3*te*te*C*k+3*te*C*C*T+C*C*C*$}function i(z,j){for(var U=/([MLQCZ])([^MLQCZ]*)/g,k,M,T,P,$;k=U.exec(z);){var C=k[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(W){return parseFloat(W)});switch(k[1]){case"M":P=M=C[0],$=T=C[1];break;case"L":(C[0]!==P||C[1]!==$)&&j("L",P,$,P=C[0],$=C[1]);break;case"Q":{j("Q",P,$,P=C[2],$=C[3],C[0],C[1]);break}case"C":{j("C",P,$,P=C[4],$=C[5],C[0],C[1],C[2],C[3]);break}case"Z":(P!==M||$!==T)&&j("L",P,$,M,T);break}}}function o(z,j,U){U===void 0&&(U=16);var k={x:0,y:0};i(z,function(M,T,P,$,C,W,te,Q,X){switch(M){case"L":j(T,P,$,C);break;case"Q":{for(var N=T,ie=P,ne=1;ne<U;ne++)n(T,P,W,te,$,C,ne/(U-1),k),j(N,ie,k.x,k.y),N=k.x,ie=k.y;break}case"C":{for(var Z=T,L=P,D=1;D<U;D++)r(T,P,W,te,Q,X,$,C,D/(U-1),k),j(Z,L,k.x,k.y),Z=k.x,L=k.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(z,j){var U=z.getContext?z.getContext("webgl",u):z,k=l.get(U);if(!k){let te=function(Z){var L=T[Z];if(!L&&(L=T[Z]=U.getExtension(Z),!L))throw new Error(Z+" not supported");return L},Q=function(Z,L){var D=U.createShader(L);return U.shaderSource(D,Z),U.compileShader(D),D},X=function(Z,L,D,K){if(!P[Z]){var oe={},re={},J=U.createProgram();U.attachShader(J,Q(L,U.VERTEX_SHADER)),U.attachShader(J,Q(D,U.FRAGMENT_SHADER)),U.linkProgram(J),P[Z]={program:J,transaction:function(fe){U.useProgram(J),fe({setUniform:function(de,Ce){for(var xe=[],me=arguments.length-2;me-- >0;)xe[me]=arguments[me+2];var Se=re[Ce]||(re[Ce]=U.getUniformLocation(J,Ce));U["uniform"+de].apply(U,[Se].concat(xe))},setAttribute:function(de,Ce,xe,me,Se){var Pe=oe[de];Pe||(Pe=oe[de]={buf:U.createBuffer(),loc:U.getAttribLocation(J,de),data:null}),U.bindBuffer(U.ARRAY_BUFFER,Pe.buf),U.vertexAttribPointer(Pe.loc,Ce,U.FLOAT,!1,0,0),U.enableVertexAttribArray(Pe.loc),M?U.vertexAttribDivisor(Pe.loc,me):te("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Pe.loc,me),Se!==Pe.data&&(U.bufferData(U.ARRAY_BUFFER,Se,xe),Pe.data=Se)}})}}}P[Z].transaction(K)},N=function(Z,L){C++;try{U.activeTexture(U.TEXTURE0+C);var D=$[Z];D||(D=$[Z]=U.createTexture(),U.bindTexture(U.TEXTURE_2D,D),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.NEAREST),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.NEAREST)),U.bindTexture(U.TEXTURE_2D,D),L(D,C)}finally{C--}},ie=function(Z,L,D){var K=U.createFramebuffer();W.push(K),U.bindFramebuffer(U.FRAMEBUFFER,K),U.activeTexture(U.TEXTURE0+L),U.bindTexture(U.TEXTURE_2D,Z),U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,Z,0);try{D(K)}finally{U.deleteFramebuffer(K),U.bindFramebuffer(U.FRAMEBUFFER,W[--W.length-1]||null)}},ne=function(){T={},P={},$={},C=-1,W.length=0};var M=typeof WebGL2RenderingContext<"u"&&U instanceof WebGL2RenderingContext,T={},P={},$={},C=-1,W=[];U.canvas.addEventListener("webglcontextlost",function(Z){ne(),Z.preventDefault()},!1),l.set(U,k={gl:U,isWebGL2:M,getExtension:te,withProgram:X,withTexture:N,withTextureFramebuffer:ie,handleContextLoss:ne})}j(k)}function f(z,j,U,k,M,T,P,$){P===void 0&&(P=15),$===void 0&&($=null),c(z,function(C){var W=C.gl,te=C.withProgram,Q=C.withTexture;Q("copy",function(X,N){W.texImage2D(W.TEXTURE_2D,0,W.RGBA,M,T,0,W.RGBA,W.UNSIGNED_BYTE,j),te("copy",a,s,function(ie){var ne=ie.setUniform,Z=ie.setAttribute;Z("aUV",2,W.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ne("1i","image",N),W.bindFramebuffer(W.FRAMEBUFFER,$||null),W.disable(W.BLEND),W.colorMask(P&8,P&4,P&2,P&1),W.viewport(U,k,M,T),W.scissor(U,k,M,T),W.drawArrays(W.TRIANGLES,0,3)})})})}function d(z,j,U){var k=z.width,M=z.height;c(z,function(T){var P=T.gl,$=new Uint8Array(k*M*4);P.readPixels(0,0,k,M,P.RGBA,P.UNSIGNED_BYTE,$),z.width=j,z.height=U,f(P,$,0,0,k,M)})}var h=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function p(z,j,U,k,M,T){T===void 0&&(T=1);var P=new Uint8Array(z*j),$=k[2]-k[0],C=k[3]-k[1],W=[];o(U,function(Z,L,D,K){W.push({x1:Z,y1:L,x2:D,y2:K,minX:Math.min(Z,D),minY:Math.min(L,K),maxX:Math.max(Z,D),maxY:Math.max(L,K)})}),W.sort(function(Z,L){return Z.maxX-L.maxX});for(var te=0;te<z;te++)for(var Q=0;Q<j;Q++){var X=ie(k[0]+$*(te+.5)/z,k[1]+C*(Q+.5)/j),N=Math.pow(1-Math.abs(X)/M,T)/2;X<0&&(N=1-N),N=Math.max(0,Math.min(255,Math.round(N*255))),P[Q*z+te]=N}return P;function ie(Z,L){for(var D=1/0,K=1/0,oe=W.length;oe--;){var re=W[oe];if(re.maxX+K<=Z)break;if(Z+K>re.minX&&L-K<re.maxY&&L+K>re.minY){var J=m(Z,L,re.x1,re.y1,re.x2,re.y2);J<D&&(D=J,K=Math.sqrt(D))}}return ne(Z,L)&&(K=-K),K}function ne(Z,L){for(var D=0,K=W.length;K--;){var oe=W[K];if(oe.maxX<=Z)break;var re=oe.y1>L!=oe.y2>L&&Z<(oe.x2-oe.x1)*(L-oe.y1)/(oe.y2-oe.y1)+oe.x1;re&&(D+=oe.y1<oe.y2?1:-1)}return D!==0}}function g(z,j,U,k,M,T,P,$,C,W){T===void 0&&(T=1),$===void 0&&($=0),C===void 0&&(C=0),W===void 0&&(W=0),y(z,j,U,k,M,T,P,null,$,C,W)}function y(z,j,U,k,M,T,P,$,C,W,te){T===void 0&&(T=1),C===void 0&&(C=0),W===void 0&&(W=0),te===void 0&&(te=0);for(var Q=p(z,j,U,k,M,T),X=new Uint8Array(Q.length*4),N=0;N<Q.length;N++)X[N*4+te]=Q[N];f(P,X,C,W,z,j,1<<3-te,$)}function m(z,j,U,k,M,T){var P=M-U,$=T-k,C=P*P+$*$,W=C?Math.max(0,Math.min(1,((z-U)*P+(j-k)*$)/C)):0,te=z-(U+W*P),Q=j-(k+W*$);return te*te+Q*Q}var v=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:g,generateIntoFramebuffer:y}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",_="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),S=null,x=!1,A={},H=new WeakMap;function V(z){if(!x&&!Y(z))throw new Error("WebGL generation not supported")}function O(z,j,U,k,M,T,P){if(T===void 0&&(T=1),P===void 0&&(P=null),!P&&(P=S,!P)){var $=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!$)throw new Error("OffscreenCanvas or DOM canvas not supported");P=S=$.getContext("webgl",{depth:!1})}V(P);var C=new Uint8Array(z*j*4);c(P,function(X){var N=X.gl,ie=X.withTexture,ne=X.withTextureFramebuffer;ie("readable",function(Z,L){N.texImage2D(N.TEXTURE_2D,0,N.RGBA,z,j,0,N.RGBA,N.UNSIGNED_BYTE,null),ne(Z,L,function(D){q(z,j,U,k,M,T,N,D,0,0,0),N.readPixels(0,0,z,j,N.RGBA,N.UNSIGNED_BYTE,C)})})});for(var W=new Uint8Array(z*j),te=0,Q=0;te<C.length;te+=4)W[Q++]=C[te];return W}function G(z,j,U,k,M,T,P,$,C,W){T===void 0&&(T=1),$===void 0&&($=0),C===void 0&&(C=0),W===void 0&&(W=0),q(z,j,U,k,M,T,P,null,$,C,W)}function q(z,j,U,k,M,T,P,$,C,W,te){T===void 0&&(T=1),C===void 0&&(C=0),W===void 0&&(W=0),te===void 0&&(te=0),V(P);var Q=[];o(U,function(X,N,ie,ne){Q.push(X,N,ie,ne)}),Q=new Float32Array(Q),c(P,function(X){var N=X.gl,ie=X.isWebGL2,ne=X.getExtension,Z=X.withProgram,L=X.withTexture,D=X.withTextureFramebuffer,K=X.handleContextLoss;if(L("rawDistances",function(oe,re){(z!==oe._lastWidth||j!==oe._lastHeight)&&N.texImage2D(N.TEXTURE_2D,0,N.RGBA,oe._lastWidth=z,oe._lastHeight=j,0,N.RGBA,N.UNSIGNED_BYTE,null),Z("main",b,_,function(J){var he=J.setAttribute,fe=J.setUniform,pe=!ie&&ne("ANGLE_instanced_arrays"),de=!ie&&ne("EXT_blend_minmax");he("aUV",2,N.STATIC_DRAW,0,E),he("aLineSegment",4,N.DYNAMIC_DRAW,1,Q),fe.apply(void 0,["4f","uGlyphBounds"].concat(k)),fe("1f","uMaxDistance",M),fe("1f","uExponent",T),D(oe,re,function(Ce){N.enable(N.BLEND),N.colorMask(!0,!0,!0,!0),N.viewport(0,0,z,j),N.scissor(0,0,z,j),N.blendFunc(N.ONE,N.ONE),N.blendEquationSeparate(N.FUNC_ADD,ie?N.MAX:de.MAX_EXT),N.clear(N.COLOR_BUFFER_BIT),ie?N.drawArraysInstanced(N.TRIANGLES,0,3,Q.length/4):pe.drawArraysInstancedANGLE(N.TRIANGLES,0,3,Q.length/4)})}),Z("post",a,w,function(J){J.setAttribute("aUV",2,N.STATIC_DRAW,0,E),J.setUniform("1i","tex",re),N.bindFramebuffer(N.FRAMEBUFFER,$),N.disable(N.BLEND),N.colorMask(te===0,te===1,te===2,te===3),N.viewport(C,W,z,j),N.scissor(C,W,z,j),N.drawArrays(N.TRIANGLES,0,3)})}),N.isContextLost())throw K(),new Error("webgl context lost")})}function Y(z){var j=!z||z===S?A:z.canvas||z,U=H.get(j);if(U===void 0){x=!0;var k=null;try{var M=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],T=O(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,z);U=T&&M.length===T.length&&T.every(function(P,$){return P===M[$]}),U||(k="bad trial run results",console.info(M,T))}catch(P){U=!1,k=P.message}k&&console.warn("WebGL SDF generation not supported:",k),x=!1,H.set(j,U)}return U}var I=Object.freeze({__proto__:null,generate:O,generateIntoCanvas:G,generateIntoFramebuffer:q,isSupported:Y});function B(z,j,U,k,M,T){M===void 0&&(M=Math.max(k[2]-k[0],k[3]-k[1])/2),T===void 0&&(T=1);try{return O.apply(I,arguments)}catch(P){return console.info("WebGL SDF generation failed, falling back to JS",P),p.apply(v,arguments)}}function F(z,j,U,k,M,T,P,$,C,W){M===void 0&&(M=Math.max(k[2]-k[0],k[3]-k[1])/2),T===void 0&&(T=1),$===void 0&&($=0),C===void 0&&(C=0),W===void 0&&(W=0);try{return G.apply(I,arguments)}catch(te){return console.info("WebGL SDF generation failed, falling back to JS",te),g.apply(v,arguments)}}return e.forEachPathCommand=i,e.generate=B,e.generateIntoCanvas=F,e.javascript=v,e.pathToLineSegments=o,e.webgl=I,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function l2(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(K,oe){r[K]=1<<oe+1,i[r[K]]=K}),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,a=r.L|r.R|r.AL,s=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|o|r.PDI|l,c=null;function f(){if(!c){c=new Map;var K=function(re){if(n.hasOwnProperty(re)){var J=0;n[re].split(",").forEach(function(he){var fe=he.split("+"),pe=fe[0],de=fe[1];pe=parseInt(pe,36),de=de?parseInt(de,36):0,c.set(J+=pe,r[re]);for(var Ce=0;Ce<de;Ce++)c.set(++J,r[re])})}};for(var oe in n)K(oe)}}function d(K){return f(),c.get(K.codePointAt(0))||r.L}function h(K){return i[d(K)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(K,oe){var re=36,J=0,he=new Map,fe=oe&&new Map,pe;return K.split(",").forEach(function de(Ce){if(Ce.indexOf("+")!==-1)for(var xe=+Ce;xe--;)de(pe);else{pe=Ce;var me=Ce.split(">"),Se=me[0],Pe=me[1];Se=String.fromCodePoint(J+=parseInt(Se,re)),Pe=String.fromCodePoint(J+=parseInt(Pe,re)),he.set(Se,Pe),oe&&fe.set(Pe,Se)}}),{map:he,reverseMap:fe}}var y,m,v;function b(){if(!y){var K=g(p.pairs,!0),oe=K.map,re=K.reverseMap;y=oe,m=re,v=g(p.canonical,!1).map}}function _(K){return b(),y.get(K)||null}function w(K){return b(),m.get(K)||null}function E(K){return b(),v.get(K)||null}var S=r.L,x=r.R,A=r.EN,H=r.ES,V=r.ET,O=r.AN,G=r.CS,q=r.B,Y=r.S,I=r.ON,B=r.BN,F=r.NSM,z=r.AL,j=r.LRO,U=r.RLO,k=r.LRE,M=r.RLE,T=r.PDF,P=r.LRI,$=r.RLI,C=r.FSI,W=r.PDI;function te(K,oe){for(var re=125,J=new Uint32Array(K.length),he=0;he<K.length;he++)J[he]=d(K[he]);var fe=new Map;function pe(At,nn){var kt=J[At];J[At]=nn,fe.set(kt,fe.get(kt)-1),kt&s&&fe.set(s,fe.get(s)-1),fe.set(nn,(fe.get(nn)||0)+1),nn&s&&fe.set(s,(fe.get(s)||0)+1)}for(var de=new Uint8Array(K.length),Ce=new Map,xe=[],me=null,Se=0;Se<K.length;Se++)me||xe.push(me={start:Se,end:K.length-1,level:oe==="rtl"?1:oe==="ltr"?0:Pc(Se,!1)}),J[Se]&q&&(me.end=Se,me=null);for(var Pe=M|k|U|j|o|W|T|q,ot=function(At){return At+(At&1?1:2)},Te=function(At){return At+(At&1?2:1)},He=0;He<xe.length;He++){me=xe[He];var ke=[{_level:me.level,_override:0,_isolate:0}],be=void 0,Ge=0,$e=0,at=0;fe.clear();for(var Ae=me.start;Ae<=me.end;Ae++){var Ye=J[Ae];if(be=ke[ke.length-1],fe.set(Ye,(fe.get(Ye)||0)+1),Ye&s&&fe.set(s,(fe.get(s)||0)+1),Ye&Pe)if(Ye&(M|k)){de[Ae]=be._level;var wt=(Ye===M?Te:ot)(be._level);wt<=re&&!Ge&&!$e?ke.push({_level:wt,_override:0,_isolate:0}):Ge||$e++}else if(Ye&(U|j)){de[Ae]=be._level;var Tn=(Ye===U?Te:ot)(be._level);Tn<=re&&!Ge&&!$e?ke.push({_level:Tn,_override:Ye&U?x:S,_isolate:0}):Ge||$e++}else if(Ye&o){Ye&C&&(Ye=Pc(Ae+1,!0)===1?$:P),de[Ae]=be._level,be._override&&pe(Ae,be._override);var Qn=(Ye===$?Te:ot)(be._level);Qn<=re&&Ge===0&&$e===0?(at++,ke.push({_level:Qn,_override:0,_isolate:1,_isolInitIndex:Ae})):Ge++}else if(Ye&W){if(Ge>0)Ge--;else if(at>0){for($e=0;!ke[ke.length-1]._isolate;)ke.pop();var Un=ke[ke.length-1]._isolInitIndex;Un!=null&&(Ce.set(Un,Ae),Ce.set(Ae,Un)),ke.pop(),at--}be=ke[ke.length-1],de[Ae]=be._level,be._override&&pe(Ae,be._override)}else Ye&T?(Ge===0&&($e>0?$e--:!be._isolate&&ke.length>1&&(ke.pop(),be=ke[ke.length-1])),de[Ae]=be._level):Ye&q&&(de[Ae]=me.level);else de[Ae]=be._level,be._override&&Ye!==B&&pe(Ae,be._override)}for(var Ft=[],Rt=null,et=me.start;et<=me.end;et++){var Qr=J[et];if(!(Qr&l)){var rt=de[et],tt=Qr&o,Jt=Qr===W;Rt&&rt===Rt._level?(Rt._end=et,Rt._endsWithIsolInit=tt):Ft.push(Rt={_start:et,_end:et,_level:rt,_startsWithPDI:Jt,_endsWithIsolInit:tt})}}for(var It=[],qe=0;qe<Ft.length;qe++){var pt=Ft[qe];if(!pt._startsWithPDI||pt._startsWithPDI&&!Ce.has(pt._start)){for(var Gt=[Rt=pt],yt=void 0;Rt&&Rt._endsWithIsolInit&&(yt=Ce.get(Rt._end))!=null;)for(var ft=qe+1;ft<Ft.length;ft++)if(Ft[ft]._start===yt){Gt.push(Rt=Ft[ft]);break}for(var xt=[],Vn=0;Vn<Gt.length;Vn++)for(var en=Gt[Vn],Jn=en._start;Jn<=en._end;Jn++)xt.push(Jn);for(var Zm=de[xt[0]],hc=me.level,Eo=xt[0]-1;Eo>=0;Eo--)if(!(J[Eo]&l)){hc=de[Eo];break}var gs=xt[xt.length-1],Qm=de[gs],pc=me.level;if(!(J[gs]&o)){for(var To=gs+1;To<=me.end;To++)if(!(J[To]&l)){pc=de[To];break}}It.push({_seqIndices:xt,_sosType:Math.max(hc,Zm)%2?x:S,_eosType:Math.max(pc,Qm)%2?x:S})}}for(var ys=0;ys<It.length;ys++){var vs=It[ys],ge=vs._seqIndices,Jr=vs._sosType,Jm=vs._eosType,yr=de[ge[0]]&1?x:S;if(fe.get(F))for(var So=0;So<ge.length;So++){var mc=ge[So];if(J[mc]&F){for(var bs=Jr,Ao=So-1;Ao>=0;Ao--)if(!(J[ge[Ao]]&l)){bs=J[ge[Ao]];break}pe(mc,bs&(o|W)?I:bs)}}if(fe.get(A))for(var ko=0;ko<ge.length;ko++){var gc=ge[ko];if(J[gc]&A)for(var Oo=ko-1;Oo>=-1;Oo--){var yc=Oo===-1?Jr:J[ge[Oo]];if(yc&a){yc===z&&pe(gc,O);break}}}if(fe.get(z))for(var _s=0;_s<ge.length;_s++){var vc=ge[_s];J[vc]&z&&pe(vc,x)}if(fe.get(H)||fe.get(G))for(var ei=1;ei<ge.length-1;ei++){var ws=ge[ei];if(J[ws]&(H|G)){for(var vr=0,xs=0,Es=ei-1;Es>=0&&(vr=J[ge[Es]],!!(vr&l));Es--);for(var Ts=ei+1;Ts<ge.length&&(xs=J[ge[Ts]],!!(xs&l));Ts++);vr===xs&&(J[ws]===H?vr===A:vr&(A|O))&&pe(ws,vr)}}if(fe.get(A))for(var fn=0;fn<ge.length;fn++){var eg=ge[fn];if(J[eg]&A){for(var Do=fn-1;Do>=0&&J[ge[Do]]&(V|l);Do--)pe(ge[Do],A);for(fn++;fn<ge.length&&J[ge[fn]]&(V|l|A);fn++)J[ge[fn]]!==A&&pe(ge[fn],A)}}if(fe.get(V)||fe.get(H)||fe.get(G))for(var ti=0;ti<ge.length;ti++){var bc=ge[ti];if(J[bc]&(V|H|G)){pe(bc,I);for(var Co=ti-1;Co>=0&&J[ge[Co]]&l;Co--)pe(ge[Co],I);for(var Mo=ti+1;Mo<ge.length&&J[ge[Mo]]&l;Mo++)pe(ge[Mo],I)}}if(fe.get(A))for(var Ss=0,_c=Jr;Ss<ge.length;Ss++){var wc=ge[Ss],As=J[wc];As&A?_c===S&&pe(wc,S):As&a&&(_c=As)}if(fe.get(s)){var ni=x|A|O,xc=ni|S,Po=[];{for(var br=[],_r=0;_r<ge.length;_r++)if(J[ge[_r]]&s){var ri=K[ge[_r]],Ec=void 0;if(_(ri)!==null)if(br.length<63)br.push({char:ri,seqIndex:_r});else break;else if((Ec=w(ri))!==null)for(var ii=br.length-1;ii>=0;ii--){var ks=br[ii].char;if(ks===Ec||ks===w(E(ri))||_(E(ks))===ri){Po.push([br[ii].seqIndex,_r]),br.length=ii;break}}}Po.sort(function(At,nn){return At[0]-nn[0]})}for(var Os=0;Os<Po.length;Os++){for(var Tc=Po[Os],Ro=Tc[0],Ds=Tc[1],Sc=!1,tn=0,Cs=Ro+1;Cs<Ds;Cs++){var Ac=ge[Cs];if(J[Ac]&xc){Sc=!0;var kc=J[Ac]&ni?x:S;if(kc===yr){tn=kc;break}}}if(Sc&&!tn){tn=Jr;for(var Ms=Ro-1;Ms>=0;Ms--){var Oc=ge[Ms];if(J[Oc]&xc){var Dc=J[Oc]&ni?x:S;Dc!==yr?tn=Dc:tn=yr;break}}}if(tn){if(J[ge[Ro]]=J[ge[Ds]]=tn,tn!==yr){for(var oi=Ro+1;oi<ge.length;oi++)if(!(J[ge[oi]]&l)){d(K[ge[oi]])&F&&(J[ge[oi]]=tn);break}}if(tn!==yr){for(var ai=Ds+1;ai<ge.length;ai++)if(!(J[ge[ai]]&l)){d(K[ge[ai]])&F&&(J[ge[ai]]=tn);break}}}}for(var Fn=0;Fn<ge.length;Fn++)if(J[ge[Fn]]&s){for(var Cc=Fn,Ps=Fn,Rs=Jr,si=Fn-1;si>=0;si--)if(J[ge[si]]&l)Cc=si;else{Rs=J[ge[si]]&ni?x:S;break}for(var Mc=Jm,li=Fn+1;li<ge.length;li++)if(J[ge[li]]&(s|l))Ps=li;else{Mc=J[ge[li]]&ni?x:S;break}for(var Is=Cc;Is<=Ps;Is++)J[ge[Is]]=Rs===Mc?Rs:yr;Fn=Ps}}}for(var Lt=me.start;Lt<=me.end;Lt++){var tg=de[Lt],Io=J[Lt];if(tg&1?Io&(S|A|O)&&de[Lt]++:Io&x?de[Lt]++:Io&(O|A)&&(de[Lt]+=2),Io&l&&(de[Lt]=Lt===0?me.level:de[Lt-1]),Lt===me.end||d(K[Lt])&(Y|q))for(var Lo=Lt;Lo>=0&&d(K[Lo])&u;Lo--)de[Lo]=me.level}}return{levels:de,paragraphs:xe};function Pc(At,nn){for(var kt=At;kt<K.length;kt++){var Gn=J[kt];if(Gn&(x|z))return 1;if(Gn&(q|S)||nn&&Gn===W)return 0;if(Gn&o){var Rc=ng(kt);kt=Rc===-1?K.length:Rc}}return 0}function ng(At){for(var nn=1,kt=At+1;kt<K.length;kt++){var Gn=J[kt];if(Gn&q)break;if(Gn&W){if(--nn===0)return kt}else Gn&o&&nn++}return-1}}var Q="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",X;function N(){if(!X){var K=g(Q,!0),oe=K.map,re=K.reverseMap;re.forEach(function(J,he){oe.set(he,J)}),X=oe}}function ie(K){return N(),X.get(K)||null}function ne(K,oe,re,J){var he=K.length;re=Math.max(0,re==null?0:+re),J=Math.min(he-1,J==null?he-1:+J);for(var fe=new Map,pe=re;pe<=J;pe++)if(oe[pe]&1){var de=ie(K[pe]);de!==null&&fe.set(pe,de)}return fe}function Z(K,oe,re,J){var he=K.length;re=Math.max(0,re==null?0:+re),J=Math.min(he-1,J==null?he-1:+J);var fe=[];return oe.paragraphs.forEach(function(pe){var de=Math.max(re,pe.start),Ce=Math.min(J,pe.end);if(de<Ce){for(var xe=oe.levels.slice(de,Ce+1),me=Ce;me>=de&&d(K[me])&u;me--)xe[me]=pe.level;for(var Se=pe.level,Pe=1/0,ot=0;ot<xe.length;ot++){var Te=xe[ot];Te>Se&&(Se=Te),Te<Pe&&(Pe=Te|1)}for(var He=Se;He>=Pe;He--)for(var ke=0;ke<xe.length;ke++)if(xe[ke]>=He){for(var be=ke;ke+1<xe.length&&xe[ke+1]>=He;)ke++;ke>be&&fe.push([be+de,ke+de])}}}),fe}function L(K,oe,re,J){var he=D(K,oe,re,J),fe=[].concat(K);return he.forEach(function(pe,de){fe[de]=(oe.levels[pe]&1?ie(K[pe]):null)||K[pe]}),fe.join("")}function D(K,oe,re,J){for(var he=Z(K,oe,re,J),fe=[],pe=0;pe<K.length;pe++)fe[pe]=pe;return he.forEach(function(de){for(var Ce=de[0],xe=de[1],me=fe.slice(Ce,xe+1),Se=me.length;Se--;)fe[xe-Se]=me[Se]}),fe}return e.closingToOpeningBracket=w,e.getBidiCharType=d,e.getBidiCharTypeName=h,e.getCanonicalBracket=E,e.getEmbeddingLevels=te,e.getMirroredCharacter=ie,e.getMirroredCharactersMap=ne,e.getReorderSegments=Z,e.getReorderedIndices=D,e.getReorderedString=L,e.openingToClosingBracket=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const Dm=/\bvoid\s+main\s*\(\s*\)\s*{/g;function $l(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let o=Ag[i];return o?$l(o):r}return t.replace(e,n)}const mt=[];for(let t=0;t<256;t++)mt[t]=(t<16?"0":"")+t.toString(16);function u2(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(mt[t&255]+mt[t>>8&255]+mt[t>>16&255]+mt[t>>24&255]+"-"+mt[e&255]+mt[e>>8&255]+"-"+mt[e>>16&15|64]+mt[e>>24&255]+"-"+mt[n&63|128]+mt[n>>8&255]+"-"+mt[n>>16&255]+mt[n>>24&255]+mt[r&255]+mt[r>>8&255]+mt[r>>16&255]+mt[r>>24&255]).toUpperCase()}const nr=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},c2=Date.now(),yd=new WeakMap,vd=new Map;let f2=1e10;function Wl(t,e){const n=m2(e);let r=yd.get(t);if(r||yd.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(u,c){t.onBeforeCompile.call(this,u,c);const f=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let d=vd[f];if(!d){const h=d2(this,u,e,n);d=vd[f]=h}u.vertexShader=d.vertexShader,u.fragmentShader=d.fragmentShader,nr(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-c2}}),this[i]&&this[i](u)},a=function(){return s(e.chained?t:t.clone())},s=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:t}),Object.defineProperty(c,"id",{value:f2++}),c.uuid=u2(),c.uniforms=nr({},u.uniforms,e.uniforms),c.defines=nr({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",c.extensions=nr({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return o},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return t.copy.call(this,u),!t.isShaderMaterial&&!t.isDerivedMaterial&&(nr(this.extensions,u.extensions),nr(this.defines,u.defines),nr(this.uniforms,xg.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new t.constructor;return s(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=Wl(t.isDerivedMaterial?t.getDepthMaterial():new Eg({depthPacking:Tg}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=Wl(t.isDerivedMaterial?t.getDistanceMaterial():new Sg,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),t.dispose.call(this)}}};return r[n]=a,new a}function d2(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:s,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:c,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:h,timeUniform:p}=r;if(o=o||"",a=a||"",s=s||"",u=u||"",c=c||"",f=f||"",(l||h)&&(e=$l(e)),(d||h)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=$l(n)),h){let g=h({vertexShader:e,fragmentShader:n});e=g.vertexShader,n=g.fragmentShader}if(d){let g=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,y=>(g.push(y),"")),f=`${d}
${g.join(`
`)}
${f}`}if(p){const g=`
uniform float ${p};
`;o=g+o,u=g+u}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,o=`${o}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,a=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(g,y,m,v)=>/\battribute\s+vec[23]\s+$/.test(v.substr(0,m))?y:`troika_${y}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=bd(e,i,o,a,s),n=bd(n,i,u,c,f),{vertexShader:e,fragmentShader:n}}function bd(t,e,n,r,i){return(r||i||n)&&(t=t.replace(Dm,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function h2(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let p2=0;const _d=new Map;function m2(t){const e=JSON.stringify(t,h2);let n=_d.get(e);return n==null&&_d.set(e,n=++p2),n}function g2(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(v,b){function _(){const w=E=>{console.error(`Failure loading font ${v}${v===r?"":"; trying fallback"}`,E),v!==r&&(v=r,_())};try{const E=new XMLHttpRequest;E.open("get",v,!0),E.responseType="arraybuffer",E.onload=function(){if(E.status>=400)w(new Error(E.statusText));else if(E.status>0)try{const S=t(E.response);b(S)}catch(S){w(S)}},E.onerror=w,E.send()}catch(E){w(E)}}_()}function c(v,b){v||(v=r);let _=i[v];_?_.pending?_.pending.push(b):b(_):(i[v]={pending:[b]},u(v,w=>{let E=i[v].pending;i[v]=w,E.forEach(S=>S(w))}))}function f({text:v="",font:b=r,sdfGlyphSize:_=64,fontSize:w=1,letterSpacing:E=0,lineHeight:S="normal",maxWidth:x=o,direction:A,textAlign:H="left",textIndent:V=0,whiteSpace:O="normal",overflowWrap:G="normal",anchorX:q=0,anchorY:Y=0,includeCaretPositions:I=!1,chunkedBoundsSize:B=8192,colorRanges:F=null},z,j=!1){const U=g(),k={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),w=+w,E=+E,x=+x,S=S||"normal",V=+V,c(b,M=>{const T=isFinite(x);let P=null,$=null,C=null,W=null,te=null,Q=null,X=null,N=0,ie=0,ne=O!=="nowrap";const{ascender:Z,descender:L,unitsPerEm:D,lineGap:K,capHeight:oe,xHeight:re}=M;k.fontLoad=g()-U;const J=g(),he=w/D;S==="normal"&&(S=(Z-L+K)/D),S=S*w;const fe=(S-(Z-L)*he)/2,pe=-(Z*he+fe),de=Math.min(S,(Z-L)*he),Ce=(Z+L)/2*he-de/2;let xe=V,me=new y;const Se=[me];M.forEachGlyph(v,w,E,(Te,He,ke)=>{const be=v.charAt(ke),Ge=Te.advanceWidth*he,$e=me.count;let at;if("isEmpty"in Te||(Te.isWhitespace=!!be&&new RegExp(s).test(be),Te.canBreakAfter=!!be&&l.test(be),Te.isEmpty=Te.xMin===Te.xMax||Te.yMin===Te.yMax||a.test(be)),!Te.isWhitespace&&!Te.isEmpty&&ie++,ne&&T&&!Te.isWhitespace&&He+Ge+xe>x&&$e){if(me.glyphAt($e-1).glyphObj.canBreakAfter)at=new y,xe=-He;else for(let Ye=$e;Ye--;)if(Ye===0&&G==="break-word"){at=new y,xe=-He;break}else if(me.glyphAt(Ye).glyphObj.canBreakAfter){at=me.splitAt(Ye+1);const wt=at.glyphAt(0).x;xe-=wt;for(let Tn=at.count;Tn--;)at.glyphAt(Tn).x-=wt;break}at&&(me.isSoftWrapped=!0,me=at,Se.push(me),N=x)}let Ae=me.glyphAt(me.count);Ae.glyphObj=Te,Ae.x=He+xe,Ae.width=Ge,Ae.charIndex=ke,be===`
`&&(me=new y,Se.push(me),xe=-(He+Ge+E*w)+V)}),Se.forEach(Te=>{for(let He=Te.count;He--;){let{glyphObj:ke,x:be,width:Ge}=Te.glyphAt(He);if(!ke.isWhitespace){Te.width=be+Ge,Te.width>N&&(N=Te.width);return}}});let Pe=0,ot=0;if(q&&(typeof q=="number"?Pe=-q:typeof q=="string"&&(Pe=-N*(q==="left"?0:q==="center"?.5:q==="right"?1:h(q)))),Y){if(typeof Y=="number")ot=-Y;else if(typeof Y=="string"){let Te=Se.length*S;ot=Y==="top"?0:Y==="top-baseline"?-pe:Y==="top-cap"?-pe-oe*he:Y==="top-ex"?-pe-re*he:Y==="middle"?Te/2:Y==="bottom"?Te:Y==="bottom-baseline"?Te-fe+L*he:h(Y)*Te}}if(!j){const Te=e.getEmbeddingLevels(v,A);P=new Uint16Array(ie),$=new Float32Array(ie*2),C={},Q=[o,o,-o,-o],X=[];let He=pe;I&&(te=new Float32Array(v.length*3)),F&&(W=new Uint8Array(ie*3));let ke=0,be=-1,Ge=-1,$e,at;if(Se.forEach((Ae,Ye)=>{let{count:wt,width:Tn}=Ae;if(wt>0){let Qn=0;for(let rt=wt;rt--&&Ae.glyphAt(rt).glyphObj.isWhitespace;)Qn++;let Un=0,Ft=0;if(H==="center")Un=(N-Tn)/2;else if(H==="right")Un=N-Tn;else if(H==="justify"&&Ae.isSoftWrapped){let rt=0;for(let tt=wt-Qn;tt--;)Ae.glyphAt(tt).glyphObj.isWhitespace&&rt++;Ft=(N-Tn)/rt}if(Ft||Un){let rt=0;for(let tt=0;tt<wt;tt++){let Jt=Ae.glyphAt(tt);const It=Jt.glyphObj;Jt.x+=Un+rt,Ft!==0&&It.isWhitespace&&tt<wt-Qn&&(rt+=Ft,Jt.width+=Ft)}}const Rt=e.getReorderSegments(v,Te,Ae.glyphAt(0).charIndex,Ae.glyphAt(Ae.count-1).charIndex);for(let rt=0;rt<Rt.length;rt++){const[tt,Jt]=Rt[rt];let It=1/0,qe=-1/0;for(let pt=0;pt<wt;pt++)if(Ae.glyphAt(pt).charIndex>=tt){let Gt=pt,yt=pt;for(;yt<wt;yt++){let ft=Ae.glyphAt(yt);if(ft.charIndex>Jt)break;yt<wt-Qn&&(It=Math.min(It,ft.x),qe=Math.max(qe,ft.x+ft.width))}for(let ft=Gt;ft<yt;ft++){const xt=Ae.glyphAt(ft);xt.x=qe-(xt.x+xt.width-It)}break}}let et;const Qr=rt=>et=rt;for(let rt=0;rt<wt;rt++){let tt=Ae.glyphAt(rt);et=tt.glyphObj;const Jt=et.index,It=Te.levels[tt.charIndex]&1;if(It){const qe=e.getMirroredCharacter(v[tt.charIndex]);qe&&M.forEachGlyph(qe,0,0,Qr)}if(I){const{charIndex:qe}=tt,pt=tt.x+Pe,Gt=tt.x+tt.width+Pe;te[qe*3]=It?Gt:pt,te[qe*3+1]=It?pt:Gt,te[qe*3+2]=He+Ce+ot;const yt=qe-be;yt>1&&p(te,be,yt),be=qe}if(F){const{charIndex:qe}=tt;for(;qe>Ge;)Ge++,F.hasOwnProperty(Ge)&&(at=F[Ge])}if(!et.isWhitespace&&!et.isEmpty){const qe=ke++;C[Jt]||(C[Jt]={path:et.path,pathBounds:[et.xMin,et.yMin,et.xMax,et.yMax]});const pt=tt.x+Pe,Gt=He+ot;$[qe*2]=pt,$[qe*2+1]=Gt;const yt=pt+et.xMin*he,ft=Gt+et.yMin*he,xt=pt+et.xMax*he,Vn=Gt+et.yMax*he;yt<Q[0]&&(Q[0]=yt),ft<Q[1]&&(Q[1]=ft),xt>Q[2]&&(Q[2]=xt),Vn>Q[3]&&(Q[3]=Vn),qe%B===0&&($e={start:qe,end:qe,rect:[o,o,-o,-o]},X.push($e)),$e.end++;const en=$e.rect;if(yt<en[0]&&(en[0]=yt),ft<en[1]&&(en[1]=ft),xt>en[2]&&(en[2]=xt),Vn>en[3]&&(en[3]=Vn),P[qe]=Jt,F){const Jn=qe*3;W[Jn]=at>>16&255,W[Jn+1]=at>>8&255,W[Jn+2]=at&255}}}}He-=S}),te){const Ae=v.length-be;Ae>1&&p(te,be,Ae)}}k.typesetting=g()-J,z({glyphIds:P,glyphPositions:$,glyphData:C,caretPositions:te,caretHeight:de,glyphColors:W,chunkedBounds:X,fontSize:w,unitsPerEm:D,ascender:Z*he,descender:L*he,capHeight:oe*he,xHeight:re*he,lineHeight:S,topBaseline:pe,blockBounds:[Pe,ot-Se.length*S,Pe+N,ot],visibleBounds:Q,timings:k})})}function d(v,b){f(v,_=>{const[w,E,S,x]=_.blockBounds;b({width:S-w,height:x-E})},{metricsOnly:!0})}function h(v){let b=v.match(/^([\d.]+)%$/),_=b?parseFloat(b[1]):NaN;return isNaN(_)?0:_/100}function p(v,b,_){const w=v[b*3],E=v[b*3+1],S=v[b*3+2],x=(E-w)/_;for(let A=0;A<_;A++){const H=(b+A)*3;v[H]=w+x*A,v[H+1]=w+x*(A+1),v[H+2]=S}}function g(){return(self.performance||Date).now()}function y(){this.data=[]}const m=["glyphObj","x","width","charIndex"];return y.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(v){let b=y.flyweight;return b.data=this.data,b.index=v,b},splitAt(v){let b=new y;return b.data=this.data.splice(v*m.length),b}},y.flyweight=m.reduce((v,b,_,w)=>(Object.defineProperty(v,b,{get(){return this.data[this.index*m.length+_]},set(E){this.data[this.index*m.length+_]=E}}),v),{data:null,index:0}),{typeset:f,measure:d,loadFont:c}}const fr=()=>(self.performance||Date).now(),us=Om();let wd;function y2(t,e,n,r,i,o,a,s,l,u,c=!0){return c?b2(t,e,n,r,i,o,a,s,l,u).then(null,f=>(wd||(console.warn("WebGL SDF generation failed, falling back to JS",f),wd=!0),Ed(t,e,n,r,i,o,a,s,l,u))):Ed(t,e,n,r,i,o,a,s,l,u)}const ua=[],v2=5;let Hl=0;function Cm(){const t=fr();for(;ua.length&&fr()-t<v2;)ua.shift()();Hl=ua.length?setTimeout(Cm,0):0}const b2=(...t)=>new Promise((e,n)=>{ua.push(()=>{const r=fr();try{us.webgl.generateIntoCanvas(...t),e({timing:fr()-r})}catch(i){n(i)}}),Hl||(Hl=setTimeout(Cm,0))}),_2=4,w2=2e3,xd={};let x2=0;function Ed(t,e,n,r,i,o,a,s,l,u){const c="TroikaTextSDFGenerator_JS_"+x2++%_2;let f=xd[c];return f||(f=xd[c]={workerModule:xo({name:c,workerId:c,dependencies:[Om,fr],init(d,h){const p=d().javascript.generate;return function(...g){const y=h();return{textureData:p(...g),timing:h()-y}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,o).then(({textureData:d,timing:h})=>{const p=fr(),g=new Uint8Array(d.length*4);for(let y=0;y<d.length;y++)g[y*4+u]=d[y];return us.webglUtils.renderImageData(a,g,s,l,t,e,1<<3-u),h+=fr()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{a2(c)},w2)),{timing:h}})}function E2(t){t._warm||(us.webgl.isSupported(t),t._warm=!0)}const T2=us.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function S2(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var o=e._bin,a=new Uint8Array(i);if(o.readASCII(a,0,4)=="ttcf"){var s=4;o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2;var l=o.readUint(a,s);s+=4;for(var u=[],c=0;c<l;c++){var f=o.readUint(a,s);s+=4,u.push(e._readFont(a,f))}return u}return[e._readFont(a,0)]},_readFont:function(i,o){var a=e._bin,s=o;a.readFixed(i,o),o+=4;var l=a.readUshort(i,o);o+=2,a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:i,_offset:s},f={},d=0;d<l;d++){var h=a.readASCII(i,o,4);o+=4,a.readUint(i,o),o+=4;var p=a.readUint(i,o);o+=4;var g=a.readUint(i,o);o+=4,f[h]={offset:p,length:g}}for(d=0;d<u.length;d++){var y=u[d];f[y]&&(c[y.trim()]=e[y.trim()].parse(i,f[y].offset,f[y].length,c))}return c},_tabOffset:function(i,o,a){for(var s=e._bin,l=s.readUshort(i,a+4),u=a+12,c=0;c<l;c++){var f=s.readASCII(i,u,4);u+=4,s.readUint(i,u),u+=4;var d=s.readUint(i,u);if(u+=4,s.readUint(i,u),u+=4,f==o)return d}return 0}};e._bin={readFixed:function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<8|i[o+3])/65540},readF2dot14:function(i,o){return e._bin.readShort(i,o)/16384},readInt:function(i,o){return e._bin._view(i).getInt32(o)},readInt8:function(i,o){return e._bin._view(i).getInt8(o)},readShort:function(i,o){return e._bin._view(i).getInt16(o)},readUshort:function(i,o){return e._bin._view(i).getUint16(o)},readUshorts:function(i,o,a){for(var s=[],l=0;l<a;l++)s.push(e._bin.readUshort(i,o+2*l));return s},readUint:function(i,o){return e._bin._view(i).getUint32(o)},readUint64:function(i,o){return 4294967296*e._bin.readUint(i,o)+e._bin.readUint(i,o+4)},readASCII:function(i,o,a){for(var s="",l=0;l<a;l++)s+=String.fromCharCode(i[o+l]);return s},readUnicode:function(i,o,a){for(var s="",l=0;l<a;l++){var u=i[o++]<<8|i[o++];s+=String.fromCharCode(u)}return s},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,o,a){var s=e._bin._tdec;return s&&o==0&&a==i.length?s.decode(i):e._bin.readASCII(i,o,a)},readBytes:function(i,o,a){for(var s=[],l=0;l<a;l++)s.push(i[o+l]);return s},readASCIIArray:function(i,o,a){for(var s=[],l=0;l<a;l++)s.push(String.fromCharCode(i[o+l]));return s},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,o,a,s,l){var u=e._bin,c={},f=o;u.readFixed(i,o),o+=4;var d=u.readUshort(i,o);o+=2;var h=u.readUshort(i,o);o+=2;var p=u.readUshort(i,o);return o+=2,c.scriptList=e._lctf.readScriptList(i,f+d),c.featureList=e._lctf.readFeatureList(i,f+h),c.lookupList=e._lctf.readLookupList(i,f+p,l),c},e._lctf.readLookupList=function(i,o,a){var s=e._bin,l=o,u=[],c=s.readUshort(i,o);o+=2;for(var f=0;f<c;f++){var d=s.readUshort(i,o);o+=2;var h=e._lctf.readLookupTable(i,l+d,a);u.push(h)}return u},e._lctf.readLookupTable=function(i,o,a){var s=e._bin,l=o,u={tabs:[]};u.ltype=s.readUshort(i,o),o+=2,u.flag=s.readUshort(i,o),o+=2;var c=s.readUshort(i,o);o+=2;for(var f=u.ltype,d=0;d<c;d++){var h=s.readUshort(i,o);o+=2;var p=a(i,f,l+h,u);u.tabs.push(p)}return u},e._lctf.numOfOnes=function(i){for(var o=0,a=0;a<32;a++)i>>>a&1&&o++;return o},e._lctf.readClassDef=function(i,o){var a=e._bin,s=[],l=a.readUshort(i,o);if(o+=2,l==1){var u=a.readUshort(i,o);o+=2;var c=a.readUshort(i,o);o+=2;for(var f=0;f<c;f++)s.push(u+f),s.push(u+f),s.push(a.readUshort(i,o)),o+=2}if(l==2){var d=a.readUshort(i,o);for(o+=2,f=0;f<d;f++)s.push(a.readUshort(i,o)),o+=2,s.push(a.readUshort(i,o)),o+=2,s.push(a.readUshort(i,o)),o+=2}return s},e._lctf.getInterval=function(i,o){for(var a=0;a<i.length;a+=3){var s=i[a],l=i[a+1];if(i[a+2],s<=o&&o<=l)return a}return-1},e._lctf.readCoverage=function(i,o){var a=e._bin,s={};s.fmt=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);return o+=2,s.fmt==1&&(s.tab=a.readUshorts(i,o,l)),s.fmt==2&&(s.tab=a.readUshorts(i,o,3*l)),s},e._lctf.coverageIndex=function(i,o){var a=i.tab;if(i.fmt==1)return a.indexOf(o);if(i.fmt==2){var s=e._lctf.getInterval(a,o);if(s!=-1)return a[s+2]+(o-a[s])}return-1},e._lctf.readFeatureList=function(i,o){var a=e._bin,s=o,l=[],u=a.readUshort(i,o);o+=2;for(var c=0;c<u;c++){var f=a.readASCII(i,o,4);o+=4;var d=a.readUshort(i,o);o+=2;var h=e._lctf.readFeatureTable(i,s+d);h.tag=f.trim(),l.push(h)}return l},e._lctf.readFeatureTable=function(i,o){var a=e._bin,s=o,l={},u=a.readUshort(i,o);o+=2,u>0&&(l.featureParams=s+u);var c=a.readUshort(i,o);o+=2,l.tab=[];for(var f=0;f<c;f++)l.tab.push(a.readUshort(i,o+2*f));return l},e._lctf.readScriptList=function(i,o){var a=e._bin,s=o,l={},u=a.readUshort(i,o);o+=2;for(var c=0;c<u;c++){var f=a.readASCII(i,o,4);o+=4;var d=a.readUshort(i,o);o+=2,l[f.trim()]=e._lctf.readScriptTable(i,s+d)}return l},e._lctf.readScriptTable=function(i,o){var a=e._bin,s=o,l={},u=a.readUshort(i,o);o+=2,l.default=e._lctf.readLangSysTable(i,s+u);var c=a.readUshort(i,o);o+=2;for(var f=0;f<c;f++){var d=a.readASCII(i,o,4);o+=4;var h=a.readUshort(i,o);o+=2,l[d.trim()]=e._lctf.readLangSysTable(i,s+h)}return l},e._lctf.readLangSysTable=function(i,o){var a=e._bin,s={};a.readUshort(i,o),o+=2,s.reqFeature=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);return o+=2,s.features=a.readUshorts(i,o,l),s},e.CFF={},e.CFF.parse=function(i,o,a){var s=e._bin;(i=new Uint8Array(i.buffer,o,a))[o=0],i[++o],i[++o],i[++o],o++;var l=[];o=e.CFF.readIndex(i,o,l);for(var u=[],c=0;c<l.length-1;c++)u.push(s.readASCII(i,o+l[c],l[c+1]-l[c]));o+=l[l.length-1];var f=[];o=e.CFF.readIndex(i,o,f);var d=[];for(c=0;c<f.length-1;c++)d.push(e.CFF.readDict(i,o+f[c],o+f[c+1]));o+=f[f.length-1];var h=d[0],p=[];o=e.CFF.readIndex(i,o,p);var g=[];for(c=0;c<p.length-1;c++)g.push(s.readASCII(i,o+p[c],p[c+1]-p[c]));if(o+=p[p.length-1],e.CFF.readSubrs(i,o,h),h.CharStrings){o=h.CharStrings,p=[],o=e.CFF.readIndex(i,o,p);var y=[];for(c=0;c<p.length-1;c++)y.push(s.readBytes(i,o+p[c],p[c+1]-p[c]));h.CharStrings=y}if(h.ROS){o=h.FDArray;var m=[];for(o=e.CFF.readIndex(i,o,m),h.FDArray=[],c=0;c<m.length-1;c++){var v=e.CFF.readDict(i,o+m[c],o+m[c+1]);e.CFF._readFDict(i,v,g),h.FDArray.push(v)}o+=m[m.length-1],o=h.FDSelect,h.FDSelect=[];var b=i[o];if(o++,b!=3)throw b;var _=s.readUshort(i,o);for(o+=2,c=0;c<_+1;c++)h.FDSelect.push(s.readUshort(i,o),i[o+2]),o+=3}return h.Encoding&&(h.Encoding=e.CFF.readEncoding(i,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=e.CFF.readCharset(i,h.charset,h.CharStrings.length)),e.CFF._readFDict(i,h,g),h},e.CFF._readFDict=function(i,o,a){var s;for(var l in o.Private&&(s=o.Private[1],o.Private=e.CFF.readDict(i,s,s+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(i,s+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(o[l]=a[o[l]-426+35])},e.CFF.readSubrs=function(i,o,a){var s=e._bin,l=[];o=e.CFF.readIndex(i,o,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,a.Bias=u,a.Subrs=[];for(var f=0;f<l.length-1;f++)a.Subrs.push(s.readBytes(i,o+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,o){for(var a=0;a<i.charset.length;a++)if(i.charset[a]==o)return a;return-1},e.CFF.glyphBySE=function(i,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[o])},e.CFF.readEncoding=function(i,o,a){e._bin;var s=[".notdef"],l=i[o];if(o++,l!=0)throw"error: unknown encoding format: "+l;var u=i[o];o++;for(var c=0;c<u;c++)s.push(i[o+c]);return s},e.CFF.readCharset=function(i,o,a){var s=e._bin,l=[".notdef"],u=i[o];if(o++,u==0)for(var c=0;c<a;c++){var f=s.readUshort(i,o);o+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<a;){f=s.readUshort(i,o),o+=2;var d=0;for(u==1?(d=i[o],o++):(d=s.readUshort(i,o),o+=2),c=0;c<=d;c++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,o,a){var s=e._bin,l=s.readUshort(i,o)+1,u=i[o+=2];if(o++,u==1)for(var c=0;c<l;c++)a.push(i[o+c]);else if(u==2)for(c=0;c<l;c++)a.push(s.readUshort(i,o+2*c));else if(u==3)for(c=0;c<l;c++)a.push(16777215&s.readUint(i,o+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(o+=l*u)-1},e.CFF.getCharString=function(i,o,a){var s=e._bin,l=i[o],u=i[o+1];i[o+2],i[o+3],i[o+4];var c=1,f=null,d=null;l<=20&&(f=l,c=1),l==12&&(f=100*l+u,c=2),21<=l&&l<=27&&(f=l,c=1),l==28&&(d=s.readShort(i,o+1),c=3),29<=l&&l<=31&&(f=l,c=1),32<=l&&l<=246&&(d=l-139,c=1),247<=l&&l<=250&&(d=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(d=256*-(l-251)-u-108,c=2),l==255&&(d=s.readInt(i,o+1)/65535,c=5),a.val=d??"o"+f,a.size=c},e.CFF.readCharString=function(i,o,a){for(var s=o+a,l=e._bin,u=[];o<s;){var c=i[o],f=i[o+1];i[o+2],i[o+3],i[o+4];var d=1,h=null,p=null;c<=20&&(h=c,d=1),c==12&&(h=100*c+f,d=2),c!=19&&c!=20||(h=c,d=2),21<=c&&c<=27&&(h=c,d=1),c==28&&(p=l.readShort(i,o+1),d=3),29<=c&&c<=31&&(h=c,d=1),32<=c&&c<=246&&(p=c-139,d=1),247<=c&&c<=250&&(p=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(p=256*-(c-251)-f-108,d=2),c==255&&(p=l.readInt(i,o+1)/65535,d=5),u.push(p??"o"+h),o+=d}return u},e.CFF.readDict=function(i,o,a){for(var s=e._bin,l={},u=[];o<a;){var c=i[o],f=i[o+1];i[o+2],i[o+3],i[o+4];var d=1,h=null,p=null;if(c==28&&(p=s.readShort(i,o+1),d=3),c==29&&(p=s.readInt(i,o+1),d=5),32<=c&&c<=246&&(p=c-139,d=1),247<=c&&c<=250&&(p=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(p=256*-(c-251)-f-108,d=2),c==255)throw p=s.readInt(i,o+1)/65535,d=5,"unknown number";if(c==30){var g=[];for(d=1;;){var y=i[o+d];d++;var m=y>>4,v=15&y;if(m!=15&&g.push(m),v!=15&&g.push(v),v==15)break}for(var b="",_=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<g.length;w++)b+=_[g[w]];p=parseFloat(b)}c<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],d=1,c==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),h!=null?(l[h]=u.length==1?u[0]:u,u=[]):u.push(p),o+=d}return l},e.cmap={},e.cmap.parse=function(i,o,a){i=new Uint8Array(i.buffer,o,a),o=0;var s=e._bin,l={};s.readUshort(i,o),o+=2;var u=s.readUshort(i,o);o+=2;var c=[];l.tables=[];for(var f=0;f<u;f++){var d=s.readUshort(i,o);o+=2;var h=s.readUshort(i,o);o+=2;var p=s.readUint(i,o);o+=4;var g="p"+d+"e"+h,y=c.indexOf(p);if(y==-1){var m;y=l.tables.length,c.push(p);var v=s.readUshort(i,p);v==0?m=e.cmap.parse0(i,p):v==4?m=e.cmap.parse4(i,p):v==6?m=e.cmap.parse6(i,p):v==12?m=e.cmap.parse12(i,p):console.debug("unknown format: "+v,d,h,p),l.tables.push(m)}if(l[g]!=null)throw"multiple tables for one platform+encoding";l[g]=y}return l},e.cmap.parse0=function(i,o){var a=e._bin,s={};s.format=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);o+=2,a.readUshort(i,o),o+=2,s.map=[];for(var u=0;u<l-6;u++)s.map.push(i[o+u]);return s},e.cmap.parse4=function(i,o){var a=e._bin,s=o,l={};l.format=a.readUshort(i,o),o+=2;var u=a.readUshort(i,o);o+=2,a.readUshort(i,o),o+=2;var c=a.readUshort(i,o);o+=2;var f=c/2;l.searchRange=a.readUshort(i,o),o+=2,l.entrySelector=a.readUshort(i,o),o+=2,l.rangeShift=a.readUshort(i,o),o+=2,l.endCount=a.readUshorts(i,o,f),o+=2*f,o+=2,l.startCount=a.readUshorts(i,o,f),o+=2*f,l.idDelta=[];for(var d=0;d<f;d++)l.idDelta.push(a.readShort(i,o)),o+=2;for(l.idRangeOffset=a.readUshorts(i,o,f),o+=2*f,l.glyphIdArray=[];o<s+u;)l.glyphIdArray.push(a.readUshort(i,o)),o+=2;return l},e.cmap.parse6=function(i,o){var a=e._bin,s={};s.format=a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2,a.readUshort(i,o),o+=2,s.firstCode=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);o+=2,s.glyphIdArray=[];for(var u=0;u<l;u++)s.glyphIdArray.push(a.readUshort(i,o)),o+=2;return s},e.cmap.parse12=function(i,o){var a=e._bin,s={};s.format=a.readUshort(i,o),o+=2,o+=2,a.readUint(i,o),o+=4,a.readUint(i,o),o+=4;var l=a.readUint(i,o);o+=4,s.groups=[];for(var u=0;u<l;u++){var c=o+12*u,f=a.readUint(i,c+0),d=a.readUint(i,c+4),h=a.readUint(i,c+8);s.groups.push([f,d,h])}return s},e.glyf={},e.glyf.parse=function(i,o,a,s){for(var l=[],u=0;u<s.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,o){var a=e._bin,s=i._data,l=e._tabOffset(s,"glyf",i._offset)+i.loca[o];if(i.loca[o]==i.loca[o+1])return null;var u={};if(u.noc=a.readShort(s,l),l+=2,u.xMin=a.readShort(s,l),l+=2,u.yMin=a.readShort(s,l),l+=2,u.xMax=a.readShort(s,l),l+=2,u.yMax=a.readShort(s,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(a.readUshort(s,l)),l+=2;var f=a.readUshort(s,l);if(l+=2,s.length-l<f)return null;u.instructions=a.readBytes(s,l,f),l+=f;var d=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<d;c++){var h=s[l];if(l++,u.flags.push(h),(8&h)!=0){var p=s[l];l++;for(var g=0;g<p;g++)u.flags.push(h),c++}}for(u.xs=[],c=0;c<d;c++){var y=(2&u.flags[c])!=0,m=(16&u.flags[c])!=0;y?(u.xs.push(m?s[l]:-s[l]),l++):m?u.xs.push(0):(u.xs.push(a.readShort(s,l)),l+=2)}for(u.ys=[],c=0;c<d;c++)y=(4&u.flags[c])!=0,m=(32&u.flags[c])!=0,y?(u.ys.push(m?s[l]:-s[l]),l++):m?u.ys.push(0):(u.ys.push(a.readShort(s,l)),l+=2);var v=0,b=0;for(c=0;c<d;c++)v+=u.xs[c],b+=u.ys[c],u.xs[c]=v,u.ys[c]=b}else{var _;u.parts=[];do{_=a.readUshort(s,l),l+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(w),w.glyphIndex=a.readUshort(s,l),l+=2,1&_){var E=a.readShort(s,l);l+=2;var S=a.readShort(s,l);l+=2}else E=a.readInt8(s,l),l++,S=a.readInt8(s,l),l++;2&_?(w.m.tx=E,w.m.ty=S):(w.p1=E,w.p2=S),8&_?(w.m.a=w.m.d=a.readF2dot14(s,l),l+=2):64&_?(w.m.a=a.readF2dot14(s,l),l+=2,w.m.d=a.readF2dot14(s,l),l+=2):128&_&&(w.m.a=a.readF2dot14(s,l),l+=2,w.m.b=a.readF2dot14(s,l),l+=2,w.m.c=a.readF2dot14(s,l),l+=2,w.m.d=a.readF2dot14(s,l),l+=2)}while(32&_);if(256&_){var x=a.readUshort(s,l);for(l+=2,u.instr=[],c=0;c<x;c++)u.instr.push(s[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,o,a,s){return e._lctf.parse(i,o,a,s,e.GPOS.subt)},e.GPOS.subt=function(i,o,a,s){var l=e._bin,u=a,c={};if(c.fmt=l.readUshort(i,a),a+=2,o==1||o==2||o==3||o==7||o==8&&c.fmt<=2){var f=l.readUshort(i,a);a+=2,c.coverage=e._lctf.readCoverage(i,f+u)}if(o==1&&c.fmt==1){var d=l.readUshort(i,a);a+=2;var h=e._lctf.numOfOnes(d);d!=0&&(c.pos=e.GPOS.readValueRecord(i,a,d))}else if(o==2&&c.fmt>=1&&c.fmt<=2){d=l.readUshort(i,a),a+=2;var p=l.readUshort(i,a);a+=2,h=e._lctf.numOfOnes(d);var g=e._lctf.numOfOnes(p);if(c.fmt==1){c.pairsets=[];var y=l.readUshort(i,a);a+=2;for(var m=0;m<y;m++){var v=u+l.readUshort(i,a);a+=2;var b=l.readUshort(i,v);v+=2;for(var _=[],w=0;w<b;w++){var E=l.readUshort(i,v);v+=2,d!=0&&(O=e.GPOS.readValueRecord(i,v,d),v+=2*h),p!=0&&(G=e.GPOS.readValueRecord(i,v,p),v+=2*g),_.push({gid2:E,val1:O,val2:G})}c.pairsets.push(_)}}if(c.fmt==2){var S=l.readUshort(i,a);a+=2;var x=l.readUshort(i,a);a+=2;var A=l.readUshort(i,a);a+=2;var H=l.readUshort(i,a);for(a+=2,c.classDef1=e._lctf.readClassDef(i,u+S),c.classDef2=e._lctf.readClassDef(i,u+x),c.matrix=[],m=0;m<A;m++){var V=[];for(w=0;w<H;w++){var O=null,G=null;d!=0&&(O=e.GPOS.readValueRecord(i,a,d),a+=2*h),p!=0&&(G=e.GPOS.readValueRecord(i,a,p),a+=2*g),V.push({val1:O,val2:G})}c.matrix.push(V)}}}else{if(o==9&&c.fmt==1){var q=l.readUshort(i,a);a+=2;var Y=l.readUint(i,a);if(a+=4,s.ltype==9)s.ltype=q;else if(s.ltype!=q)throw"invalid extension substitution";return e.GPOS.subt(i,s.ltype,u+Y)}console.debug("unsupported GPOS table LookupType",o,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,o,a){var s=e._bin,l=[];return l.push(1&a?s.readShort(i,o):0),o+=1&a?2:0,l.push(2&a?s.readShort(i,o):0),o+=2&a?2:0,l.push(4&a?s.readShort(i,o):0),o+=4&a?2:0,l.push(8&a?s.readShort(i,o):0),o+=8&a?2:0,l},e.GSUB={},e.GSUB.parse=function(i,o,a,s){return e._lctf.parse(i,o,a,s,e.GSUB.subt)},e.GSUB.subt=function(i,o,a,s){var l=e._bin,u=a,c={};if(c.fmt=l.readUshort(i,a),a+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&c.fmt<=2||o==6&&c.fmt<=2){var f=l.readUshort(i,a);a+=2,c.coverage=e._lctf.readCoverage(i,u+f)}if(o==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,a),a+=2;else if(c.fmt==2){var d=l.readUshort(i,a);a+=2,c.newg=l.readUshorts(i,a,d),a+=2*c.newg.length}}else if(o==4){c.vals=[],d=l.readUshort(i,a),a+=2;for(var h=0;h<d;h++){var p=l.readUshort(i,a);a+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+p))}}else if(o==5&&c.fmt==2){if(c.fmt==2){var g=l.readUshort(i,a);a+=2,c.cDef=e._lctf.readClassDef(i,u+g),c.scset=[];var y=l.readUshort(i,a);for(a+=2,h=0;h<y;h++){var m=l.readUshort(i,a);a+=2,c.scset.push(m==0?null:e.GSUB.readSubClassSet(i,u+m))}}}else if(o==6&&c.fmt==3){if(c.fmt==3){for(h=0;h<3;h++){d=l.readUshort(i,a),a+=2;for(var v=[],b=0;b<d;b++)v.push(e._lctf.readCoverage(i,u+l.readUshort(i,a+2*b)));a+=2*d,h==0&&(c.backCvg=v),h==1&&(c.inptCvg=v),h==2&&(c.ahedCvg=v)}d=l.readUshort(i,a),a+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,a,d)}}else{if(o==7&&c.fmt==1){var _=l.readUshort(i,a);a+=2;var w=l.readUint(i,a);if(a+=4,s.ltype==9)s.ltype=_;else if(s.ltype!=_)throw"invalid extension substitution";return e.GSUB.subt(i,s.ltype,u+w)}console.debug("unsupported GSUB table LookupType",o,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,o){var a=e._bin.readUshort,s=o,l=[],u=a(i,o);o+=2;for(var c=0;c<u;c++){var f=a(i,o);o+=2,l.push(e.GSUB.readSubClassRule(i,s+f))}return l},e.GSUB.readSubClassRule=function(i,o){var a=e._bin.readUshort,s={},l=a(i,o),u=a(i,o+=2);o+=2,s.input=[];for(var c=0;c<l-1;c++)s.input.push(a(i,o)),o+=2;return s.substLookupRecords=e.GSUB.readSubstLookupRecords(i,o,u),s},e.GSUB.readSubstLookupRecords=function(i,o,a){for(var s=e._bin.readUshort,l=[],u=0;u<a;u++)l.push(s(i,o),s(i,o+2)),o+=4;return l},e.GSUB.readChainSubClassSet=function(i,o){var a=e._bin,s=o,l=[],u=a.readUshort(i,o);o+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,o);o+=2,l.push(e.GSUB.readChainSubClassRule(i,s+f))}return l},e.GSUB.readChainSubClassRule=function(i,o){for(var a=e._bin,s={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=a.readUshort(i,o);o+=2,u==1&&c--,s[l[u]]=a.readUshorts(i,o,c),o+=2*s[l[u]].length}return c=a.readUshort(i,o),o+=2,s.subst=a.readUshorts(i,o,2*c),o+=2*s.subst.length,s},e.GSUB.readLigatureSet=function(i,o){var a=e._bin,s=o,l=[],u=a.readUshort(i,o);o+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,o);o+=2,l.push(e.GSUB.readLigature(i,s+f))}return l},e.GSUB.readLigature=function(i,o){var a=e._bin,s={chain:[]};s.nglyph=a.readUshort(i,o),o+=2;var l=a.readUshort(i,o);o+=2;for(var u=0;u<l-1;u++)s.chain.push(a.readUshort(i,o)),o+=2;return s},e.head={},e.head.parse=function(i,o,a){var s=e._bin,l={};return s.readFixed(i,o),o+=4,l.fontRevision=s.readFixed(i,o),o+=4,s.readUint(i,o),o+=4,s.readUint(i,o),o+=4,l.flags=s.readUshort(i,o),o+=2,l.unitsPerEm=s.readUshort(i,o),o+=2,l.created=s.readUint64(i,o),o+=8,l.modified=s.readUint64(i,o),o+=8,l.xMin=s.readShort(i,o),o+=2,l.yMin=s.readShort(i,o),o+=2,l.xMax=s.readShort(i,o),o+=2,l.yMax=s.readShort(i,o),o+=2,l.macStyle=s.readUshort(i,o),o+=2,l.lowestRecPPEM=s.readUshort(i,o),o+=2,l.fontDirectionHint=s.readShort(i,o),o+=2,l.indexToLocFormat=s.readShort(i,o),o+=2,l.glyphDataFormat=s.readShort(i,o),o+=2,l},e.hhea={},e.hhea.parse=function(i,o,a){var s=e._bin,l={};return s.readFixed(i,o),o+=4,l.ascender=s.readShort(i,o),o+=2,l.descender=s.readShort(i,o),o+=2,l.lineGap=s.readShort(i,o),o+=2,l.advanceWidthMax=s.readUshort(i,o),o+=2,l.minLeftSideBearing=s.readShort(i,o),o+=2,l.minRightSideBearing=s.readShort(i,o),o+=2,l.xMaxExtent=s.readShort(i,o),o+=2,l.caretSlopeRise=s.readShort(i,o),o+=2,l.caretSlopeRun=s.readShort(i,o),o+=2,l.caretOffset=s.readShort(i,o),o+=2,o+=8,l.metricDataFormat=s.readShort(i,o),o+=2,l.numberOfHMetrics=s.readUshort(i,o),o+=2,l},e.hmtx={},e.hmtx.parse=function(i,o,a,s){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,d=0;d<s.maxp.numGlyphs;d++)d<s.hhea.numberOfHMetrics&&(c=l.readUshort(i,o),o+=2,f=l.readShort(i,o),o+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,o,a,s){var l=e._bin,u=l.readUshort(i,o);if(o+=2,u==1)return e.kern.parseV1(i,o-2,a,s);var c=l.readUshort(i,o);o+=2;for(var f={glyph1:[],rval:[]},d=0;d<c;d++){o+=2,a=l.readUshort(i,o),o+=2;var h=l.readUshort(i,o);o+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;o=e.kern.readFormat0(i,o,f)}return f},e.kern.parseV1=function(i,o,a,s){var l=e._bin;l.readFixed(i,o),o+=4;var u=l.readUint(i,o);o+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,o),o+=4;var d=l.readUshort(i,o);o+=2,l.readUshort(i,o),o+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;o=e.kern.readFormat0(i,o,c)}return c},e.kern.readFormat0=function(i,o,a){var s=e._bin,l=-1,u=s.readUshort(i,o);o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2;for(var c=0;c<u;c++){var f=s.readUshort(i,o);o+=2;var d=s.readUshort(i,o);o+=2;var h=s.readShort(i,o);o+=2,f!=l&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var p=a.rval[a.rval.length-1];p.glyph2.push(d),p.vals.push(h),l=f}return o},e.loca={},e.loca.parse=function(i,o,a,s){var l=e._bin,u=[],c=s.head.indexToLocFormat,f=s.maxp.numGlyphs+1;if(c==0)for(var d=0;d<f;d++)u.push(l.readUshort(i,o+(d<<1))<<1);if(c==1)for(d=0;d<f;d++)u.push(l.readUint(i,o+(d<<2)));return u},e.maxp={},e.maxp.parse=function(i,o,a){var s=e._bin,l={},u=s.readUint(i,o);return o+=4,l.numGlyphs=s.readUshort(i,o),o+=2,u==65536&&(l.maxPoints=s.readUshort(i,o),o+=2,l.maxContours=s.readUshort(i,o),o+=2,l.maxCompositePoints=s.readUshort(i,o),o+=2,l.maxCompositeContours=s.readUshort(i,o),o+=2,l.maxZones=s.readUshort(i,o),o+=2,l.maxTwilightPoints=s.readUshort(i,o),o+=2,l.maxStorage=s.readUshort(i,o),o+=2,l.maxFunctionDefs=s.readUshort(i,o),o+=2,l.maxInstructionDefs=s.readUshort(i,o),o+=2,l.maxStackElements=s.readUshort(i,o),o+=2,l.maxSizeOfInstructions=s.readUshort(i,o),o+=2,l.maxComponentElements=s.readUshort(i,o),o+=2,l.maxComponentDepth=s.readUshort(i,o),o+=2),l},e.name={},e.name.parse=function(i,o,a){var s=e._bin,l={};s.readUshort(i,o),o+=2;var u=s.readUshort(i,o);o+=2,s.readUshort(i,o);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=o+=2,h=0;h<u;h++){var p=s.readUshort(i,o);o+=2;var g=s.readUshort(i,o);o+=2;var y=s.readUshort(i,o);o+=2;var m=s.readUshort(i,o);o+=2;var v=s.readUshort(i,o);o+=2;var b=s.readUshort(i,o);o+=2;var _,w=f[m],E=d+12*u+b;if(p==0)_=s.readUnicode(i,E,v/2);else if(p==3&&g==0)_=s.readUnicode(i,E,v/2);else if(g==0)_=s.readASCII(i,E,v);else if(g==1)_=s.readUnicode(i,E,v/2);else if(g==3)_=s.readUnicode(i,E,v/2);else{if(p!=1)throw"unknown encoding "+g+", platformID: "+p;_=s.readASCII(i,E,v),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var S="p"+p+","+y.toString(16);l[S]==null&&(l[S]={}),l[S][w!==void 0?w:m]=_,l[S]._lang=y}for(var x in l)if(l[x].postScriptName!=null&&l[x]._lang==1033)return l[x];for(var x in l)if(l[x].postScriptName!=null&&l[x]._lang==0)return l[x];for(var x in l)if(l[x].postScriptName!=null&&l[x]._lang==3084)return l[x];for(var x in l)if(l[x].postScriptName!=null)return l[x];for(var x in l){c=x;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,o,a){var s=e._bin.readUshort(i,o);o+=2;var l={};if(s==0)e["OS/2"].version0(i,o,l);else if(s==1)e["OS/2"].version1(i,o,l);else if(s==2||s==3||s==4)e["OS/2"].version2(i,o,l);else{if(s!=5)throw"unknown OS/2 table version: "+s;e["OS/2"].version5(i,o,l)}return l},e["OS/2"].version0=function(i,o,a){var s=e._bin;return a.xAvgCharWidth=s.readShort(i,o),o+=2,a.usWeightClass=s.readUshort(i,o),o+=2,a.usWidthClass=s.readUshort(i,o),o+=2,a.fsType=s.readUshort(i,o),o+=2,a.ySubscriptXSize=s.readShort(i,o),o+=2,a.ySubscriptYSize=s.readShort(i,o),o+=2,a.ySubscriptXOffset=s.readShort(i,o),o+=2,a.ySubscriptYOffset=s.readShort(i,o),o+=2,a.ySuperscriptXSize=s.readShort(i,o),o+=2,a.ySuperscriptYSize=s.readShort(i,o),o+=2,a.ySuperscriptXOffset=s.readShort(i,o),o+=2,a.ySuperscriptYOffset=s.readShort(i,o),o+=2,a.yStrikeoutSize=s.readShort(i,o),o+=2,a.yStrikeoutPosition=s.readShort(i,o),o+=2,a.sFamilyClass=s.readShort(i,o),o+=2,a.panose=s.readBytes(i,o,10),o+=10,a.ulUnicodeRange1=s.readUint(i,o),o+=4,a.ulUnicodeRange2=s.readUint(i,o),o+=4,a.ulUnicodeRange3=s.readUint(i,o),o+=4,a.ulUnicodeRange4=s.readUint(i,o),o+=4,a.achVendID=[s.readInt8(i,o),s.readInt8(i,o+1),s.readInt8(i,o+2),s.readInt8(i,o+3)],o+=4,a.fsSelection=s.readUshort(i,o),o+=2,a.usFirstCharIndex=s.readUshort(i,o),o+=2,a.usLastCharIndex=s.readUshort(i,o),o+=2,a.sTypoAscender=s.readShort(i,o),o+=2,a.sTypoDescender=s.readShort(i,o),o+=2,a.sTypoLineGap=s.readShort(i,o),o+=2,a.usWinAscent=s.readUshort(i,o),o+=2,a.usWinDescent=s.readUshort(i,o),o+=2},e["OS/2"].version1=function(i,o,a){var s=e._bin;return o=e["OS/2"].version0(i,o,a),a.ulCodePageRange1=s.readUint(i,o),o+=4,a.ulCodePageRange2=s.readUint(i,o),o+=4},e["OS/2"].version2=function(i,o,a){var s=e._bin;return o=e["OS/2"].version1(i,o,a),a.sxHeight=s.readShort(i,o),o+=2,a.sCapHeight=s.readShort(i,o),o+=2,a.usDefault=s.readUshort(i,o),o+=2,a.usBreak=s.readUshort(i,o),o+=2,a.usMaxContext=s.readUshort(i,o),o+=2},e["OS/2"].version5=function(i,o,a){var s=e._bin;return o=e["OS/2"].version2(i,o,a),a.usLowerOpticalPointSize=s.readUshort(i,o),o+=2,a.usUpperOpticalPointSize=s.readUshort(i,o),o+=2},e.post={},e.post.parse=function(i,o,a){var s=e._bin,l={};return l.version=s.readFixed(i,o),o+=4,l.italicAngle=s.readFixed(i,o),o+=4,l.underlinePosition=s.readShort(i,o),o+=2,l.underlineThickness=s.readShort(i,o),o+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,o){var a=i.cmap,s=-1;if(a.p0e4!=null?s=a.p0e4:a.p3e1!=null?s=a.p3e1:a.p1e0!=null?s=a.p1e0:a.p0e3!=null&&(s=a.p0e3),s==-1)throw"no familiar platform and encoding!";var l=a.tables[s];if(l.format==0)return o>=l.map.length?0:l.map[o];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(o<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>o?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[o-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:o+l.idDelta[u])}if(l.format==12){if(o>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var f=l.groups[c];if(f[0]<=o&&o<=f[1])return f[2]+(o-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,o){var a={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[o]){var s=i.SVG.entries[o];return s==null?a:(typeof s=="string"&&(s=e.SVG.toPath(s),i.SVG.entries[o]=s),s)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=o;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[o],l,u,c,a)}else i.glyf&&e.U._drawGlyf(o,i,a);return a},e.U._drawGlyf=function(i,o,a){var s=o.glyf[i];s==null&&(s=o.glyf[i]=e.glyf._parseGlyf(o,i)),s!=null&&(s.noc>-1?e.U._simpleGlyph(s,a):e.U._compoGlyph(s,o,a))},e.U._simpleGlyph=function(i,o){for(var a=0;a<i.noc;a++){for(var s=a==0?0:i.endPts[a-1]+1,l=i.endPts[a],u=s;u<=l;u++){var c=u==s?l:u-1,f=u==l?s:u+1,d=1&i.flags[u],h=1&i.flags[c],p=1&i.flags[f],g=i.xs[u],y=i.ys[u];if(u==s)if(d){if(!h){e.U.P.moveTo(o,g,y);continue}e.U.P.moveTo(o,i.xs[c],i.ys[c])}else h?e.U.P.moveTo(o,i.xs[c],i.ys[c]):e.U.P.moveTo(o,(i.xs[c]+g)/2,(i.ys[c]+y)/2);d?h&&e.U.P.lineTo(o,g,y):p?e.U.P.qcurveTo(o,g,y,i.xs[f],i.ys[f]):e.U.P.qcurveTo(o,g,y,(g+i.xs[f])/2,(y+i.ys[f])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(i,o,a){for(var s=0;s<i.parts.length;s++){var l={cmds:[],crds:[]},u=i.parts[s];e.U._drawGlyf(u.glyphIndex,o,l);for(var c=u.m,f=0;f<l.crds.length;f+=2){var d=l.crds[f],h=l.crds[f+1];a.crds.push(d*c.a+h*c.b+c.tx),a.crds.push(d*c.c+h*c.d+c.ty)}for(f=0;f<l.cmds.length;f++)a.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,o){var a=e._lctf.getInterval(o,i);return a==-1?0:o[a+2]},e.U.getPairAdjustment=function(i,o,a){var s=!1;if(i.GPOS)for(var l=i.GPOS,u=l.lookupList,c=l.featureList,f=[],d=0;d<c.length;d++){var h=c[d];if(h.tag=="kern"){s=!0;for(var p=0;p<h.tab.length;p++)if(!f[h.tab[p]]){f[h.tab[p]]=!0;for(var g=u[h.tab[p]],y=0;y<g.tabs.length;y++)if(g.tabs[y]!=null){var m,v=g.tabs[y];if((!v.coverage||(m=e._lctf.coverageIndex(v.coverage,o))!=-1)&&g.ltype!=1){if(g.ltype==2){var b=null;if(v.fmt==1){var _=v.pairsets[m];for(d=0;d<_.length;d++)_[d].gid2==a&&(b=_[d])}else if(v.fmt==2){var w=e.U._getGlyphClass(o,v.classDef1),E=e.U._getGlyphClass(a,v.classDef2);b=v.matrix[w][E]}if(b){var S=0;return b.val1&&b.val1[2]&&(S+=b.val1[2]),b.val2&&b.val2[0]&&(S+=b.val2[0]),S}}}}}}}if(i.kern&&!s){var x=i.kern.glyph1.indexOf(o);if(x!=-1){var A=i.kern.rval[x].glyph2.indexOf(a);if(A!=-1)return i.kern.rval[x].vals[A]}}return 0},e.U._applySubs=function(i,o,a,s){for(var l=i.length-o-1,u=0;u<a.tabs.length;u++)if(a.tabs[u]!=null){var c,f=a.tabs[u];if(!f.coverage||(c=e._lctf.coverageIndex(f.coverage,i[o]))!=-1){if(a.ltype==1)i[o],f.fmt==1?i[o]=i[o]+f.delta:i[o]=f.newg[c];else if(a.ltype==4)for(var d=f.vals[c],h=0;h<d.length;h++){var p=d[h],g=p.chain.length;if(!(g>l)){for(var y=!0,m=0,v=0;v<g;v++){for(;i[o+m+(1+v)]==-1;)m++;p.chain[v]!=i[o+m+(1+v)]&&(y=!1)}if(y){for(i[o]=p.nglyph,v=0;v<g+m;v++)i[o+v+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var b=e._lctf.getInterval(f.cDef,i[o]),_=f.cDef[b+2],w=f.scset[_],E=0;E<w.length;E++){var S=w[E],x=S.input;if(!(x.length>l)){for(y=!0,v=0;v<x.length;v++){var A=e._lctf.getInterval(f.cDef,i[o+1+v]);if(b==-1&&f.cDef[A+2]!=x[v]){y=!1;break}}if(y){var H=S.substLookupRecords;for(h=0;h<H.length;h+=2)H[h],H[h+1]}}}else if(a.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,o-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,o)||!e.U._glsCovered(i,f.ahedCvg,o+f.inptCvg.length))continue;var V=f.lookupRec;for(E=0;E<V.length;E+=2){b=V[E];var O=s[V[E+1]];e.U._applySubs(i,o+b,O,s)}}}}},e.U._glsCovered=function(i,o,a){for(var s=0;s<o.length;s++)if(e._lctf.coverageIndex(o[s],i[a+s])==-1)return!1;return!0},e.U.glyphsToPath=function(i,o,a){for(var s={cmds:[],crds:[]},l=0,u=0;u<o.length;u++){var c=o[u];if(c!=-1){for(var f=u<o.length-1&&o[u+1]!=-1?o[u+1]:0,d=e.U.glyphToPath(i,c),h=0;h<d.crds.length;h+=2)s.crds.push(d.crds[h]+l),s.crds.push(d.crds[h+1]);for(a&&s.cmds.push(a),h=0;h<d.cmds.length;h++)s.cmds.push(d.cmds[h]);a&&s.cmds.push("X"),l+=i.hmtx.aWidth[c],u<o.length-1&&(l+=e.U.getPairAdjustment(i,c,f))}}return s},e.U.P={},e.U.P.moveTo=function(i,o,a){i.cmds.push("M"),i.crds.push(o,a)},e.U.P.lineTo=function(i,o,a){i.cmds.push("L"),i.crds.push(o,a)},e.U.P.curveTo=function(i,o,a,s,l,u,c){i.cmds.push("C"),i.crds.push(o,a,s,l,u,c)},e.U.P.qcurveTo=function(i,o,a,s,l){i.cmds.push("Q"),i.crds.push(o,a,s,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,o,a,s,l){for(var u=o.stack,c=o.nStems,f=o.haveWidth,d=o.width,h=o.open,p=0,g=o.x,y=o.y,m=0,v=0,b=0,_=0,w=0,E=0,S=0,x=0,A=0,H=0,V={val:0,size:0};p<i.length;){e.CFF.getCharString(i,p,V);var O=V.val;if(p+=V.size,O=="o1"||O=="o18")u.length%2!=0&&!f&&(d=u.shift()+s.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(O=="o3"||O=="o23")u.length%2!=0&&!f&&(d=u.shift()+s.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(O=="o4")u.length>1&&!f&&(d=u.shift()+s.nominalWidthX,f=!0),h&&e.U.P.closePath(l),y+=u.pop(),e.U.P.moveTo(l,g,y),h=!0;else if(O=="o5")for(;u.length>0;)g+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,g,y);else if(O=="o6"||O=="o7")for(var G=u.length,q=O=="o6",Y=0;Y<G;Y++){var I=u.shift();q?g+=I:y+=I,q=!q,e.U.P.lineTo(l,g,y)}else if(O=="o8"||O=="o24"){G=u.length;for(var B=0;B+6<=G;)m=g+u.shift(),v=y+u.shift(),b=m+u.shift(),_=v+u.shift(),g=b+u.shift(),y=_+u.shift(),e.U.P.curveTo(l,m,v,b,_,g,y),B+=6;O=="o24"&&(g+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,g,y))}else{if(O=="o11")break;if(O=="o1234"||O=="o1235"||O=="o1236"||O=="o1237")O=="o1234"&&(v=y,b=(m=g+u.shift())+u.shift(),H=_=v+u.shift(),E=_,x=y,g=(S=(w=(A=b+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,m,v,b,_,A,H),e.U.P.curveTo(l,w,E,S,x,g,y)),O=="o1235"&&(m=g+u.shift(),v=y+u.shift(),b=m+u.shift(),_=v+u.shift(),A=b+u.shift(),H=_+u.shift(),w=A+u.shift(),E=H+u.shift(),S=w+u.shift(),x=E+u.shift(),g=S+u.shift(),y=x+u.shift(),u.shift(),e.U.P.curveTo(l,m,v,b,_,A,H),e.U.P.curveTo(l,w,E,S,x,g,y)),O=="o1236"&&(m=g+u.shift(),v=y+u.shift(),b=m+u.shift(),H=_=v+u.shift(),E=_,S=(w=(A=b+u.shift())+u.shift())+u.shift(),x=E+u.shift(),g=S+u.shift(),e.U.P.curveTo(l,m,v,b,_,A,H),e.U.P.curveTo(l,w,E,S,x,g,y)),O=="o1237"&&(m=g+u.shift(),v=y+u.shift(),b=m+u.shift(),_=v+u.shift(),A=b+u.shift(),H=_+u.shift(),w=A+u.shift(),E=H+u.shift(),S=w+u.shift(),x=E+u.shift(),Math.abs(S-g)>Math.abs(x-y)?g=S+u.shift():y=x+u.shift(),e.U.P.curveTo(l,m,v,b,_,A,H),e.U.P.curveTo(l,w,E,S,x,g,y));else if(O=="o14"){if(u.length>0&&!f&&(d=u.shift()+a.nominalWidthX,f=!0),u.length==4){var F=u.shift(),z=u.shift(),j=u.shift(),U=u.shift(),k=e.CFF.glyphBySE(a,j),M=e.CFF.glyphBySE(a,U);e.U._drawCFF(a.CharStrings[k],o,a,s,l),o.x=F,o.y=z,e.U._drawCFF(a.CharStrings[M],o,a,s,l)}h&&(e.U.P.closePath(l),h=!1)}else if(O=="o19"||O=="o20")u.length%2!=0&&!f&&(d=u.shift()+s.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,p+=c+7>>3;else if(O=="o21")u.length>2&&!f&&(d=u.shift()+s.nominalWidthX,f=!0),y+=u.pop(),g+=u.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,g,y),h=!0;else if(O=="o22")u.length>1&&!f&&(d=u.shift()+s.nominalWidthX,f=!0),g+=u.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,g,y),h=!0;else if(O=="o25"){for(;u.length>6;)g+=u.shift(),y+=u.shift(),e.U.P.lineTo(l,g,y);m=g+u.shift(),v=y+u.shift(),b=m+u.shift(),_=v+u.shift(),g=b+u.shift(),y=_+u.shift(),e.U.P.curveTo(l,m,v,b,_,g,y)}else if(O=="o26")for(u.length%2&&(g+=u.shift());u.length>0;)m=g,v=y+u.shift(),g=b=m+u.shift(),y=(_=v+u.shift())+u.shift(),e.U.P.curveTo(l,m,v,b,_,g,y);else if(O=="o27")for(u.length%2&&(y+=u.shift());u.length>0;)v=y,b=(m=g+u.shift())+u.shift(),_=v+u.shift(),g=b+u.shift(),y=_,e.U.P.curveTo(l,m,v,b,_,g,y);else if(O=="o10"||O=="o29"){var T=O=="o10"?s:a;if(u.length==0)console.debug("error: empty stack");else{var P=u.pop(),$=T.Subrs[P+T.Bias];o.x=g,o.y=y,o.nStems=c,o.haveWidth=f,o.width=d,o.open=h,e.U._drawCFF($,o,a,s,l),g=o.x,y=o.y,c=o.nStems,f=o.haveWidth,d=o.width,h=o.open}}else if(O=="o30"||O=="o31"){var C=u.length,W=(B=0,O=="o31");for(B+=C-(G=-3&C);B<G;)W?(v=y,b=(m=g+u.shift())+u.shift(),y=(_=v+u.shift())+u.shift(),G-B==5?(g=b+u.shift(),B++):g=b,W=!1):(m=g,v=y+u.shift(),b=m+u.shift(),_=v+u.shift(),g=b+u.shift(),G-B==5?(y=_+u.shift(),B++):y=_,W=!0),e.U.P.curveTo(l,m,v,b,_,g,y),B+=4}else{if((O+"").charAt(0)=="o")throw console.debug("Unknown operation: "+O,i),O;u.push(O)}}}o.x=g,o.y=y,o.nStems=c,o.haveWidth=f,o.width=d,o.open=h};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function A2(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(O,G){for(var q=new n(31),Y=0;Y<31;++Y)q[Y]=G+=1<<O[Y-1];var I=new r(q[30]);for(Y=1;Y<30;++Y)for(var B=q[Y];B<q[Y+1];++B)I[B]=B-q[Y]<<5|Y;return[q,I]},l=s(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var f=s(o,0)[0],d=new n(32768),h=0;h<32768;++h){var p=(43690&h)>>>1|(21845&h)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[h]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(O,G,q){for(var Y=O.length,I=0,B=new n(G);I<Y;++I)++B[O[I]-1];var F,z=new n(G);for(I=0;I<G;++I)z[I]=z[I-1]+B[I-1]<<1;if(q){F=new n(1<<G);var j=15-G;for(I=0;I<Y;++I)if(O[I])for(var U=I<<4|O[I],k=G-O[I],M=z[O[I]-1]++<<k,T=M|(1<<k)-1;M<=T;++M)F[d[M]>>>j]=U}else for(F=new n(Y),I=0;I<Y;++I)O[I]&&(F[I]=d[z[O[I]-1]++]>>>15-O[I]);return F},y=new e(288);for(h=0;h<144;++h)y[h]=8;for(h=144;h<256;++h)y[h]=9;for(h=256;h<280;++h)y[h]=7;for(h=280;h<288;++h)y[h]=8;var m=new e(32);for(h=0;h<32;++h)m[h]=5;var v=g(y,9,1),b=g(m,5,1),_=function(O){for(var G=O[0],q=1;q<O.length;++q)O[q]>G&&(G=O[q]);return G},w=function(O,G,q){var Y=G/8|0;return(O[Y]|O[Y+1]<<8)>>(7&G)&q},E=function(O,G){var q=G/8|0;return(O[q]|O[q+1]<<8|O[q+2]<<16)>>(7&G)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],x=function(O,G,q){var Y=new Error(G||S[O]);if(Y.code=O,Error.captureStackTrace&&Error.captureStackTrace(Y,x),!q)throw Y;return Y},A=function(O,G,q){var Y=O.length;if(!Y||q&&!q.l&&Y<5)return G||new e(0);var I=!G||q,B=!q||q.i;q||(q={}),G||(G=new e(3*Y));var F,z=function(be){var Ge=G.length;if(be>Ge){var $e=new e(Math.max(2*Ge,be));$e.set(G),G=$e}},j=q.f||0,U=q.p||0,k=q.b||0,M=q.l,T=q.d,P=q.m,$=q.n,C=8*Y;do{if(!M){q.f=j=w(O,U,1);var W=w(O,U+1,3);if(U+=3,!W){var te=O[(re=((F=U)/8|0)+(7&F&&1)+4)-4]|O[re-3]<<8,Q=re+te;if(Q>Y){B&&x(0);break}I&&z(k+te),G.set(O.subarray(re,Q),k),q.b=k+=te,q.p=U=8*Q;continue}if(W==1)M=v,T=b,P=9,$=5;else if(W==2){var X=w(O,U,31)+257,N=w(O,U+10,15)+4,ie=X+w(O,U+5,31)+1;U+=14;for(var ne=new e(ie),Z=new e(19),L=0;L<N;++L)Z[a[L]]=w(O,U+3*L,7);U+=3*N;var D=_(Z),K=(1<<D)-1,oe=g(Z,D,1);for(L=0;L<ie;){var re,J=oe[w(O,U,K)];if(U+=15&J,(re=J>>>4)<16)ne[L++]=re;else{var he=0,fe=0;for(re==16?(fe=3+w(O,U,3),U+=2,he=ne[L-1]):re==17?(fe=3+w(O,U,7),U+=3):re==18&&(fe=11+w(O,U,127),U+=7);fe--;)ne[L++]=he}}var pe=ne.subarray(0,X),de=ne.subarray(X);P=_(pe),$=_(de),M=g(pe,P,1),T=g(de,$,1)}else x(1);if(U>C){B&&x(0);break}}I&&z(k+131072);for(var Ce=(1<<P)-1,xe=(1<<$)-1,me=U;;me=U){var Se=(he=M[E(O,U)&Ce])>>>4;if((U+=15&he)>C){B&&x(0);break}if(he||x(2),Se<256)G[k++]=Se;else{if(Se==256){me=U,M=null;break}var Pe=Se-254;if(Se>264){var ot=i[L=Se-257];Pe=w(O,U,(1<<ot)-1)+u[L],U+=ot}var Te=T[E(O,U)&xe],He=Te>>>4;if(Te||x(3),U+=15&Te,de=f[He],He>3&&(ot=o[He],de+=E(O,U)&(1<<ot)-1,U+=ot),U>C){B&&x(0);break}I&&z(k+131072);for(var ke=k+Pe;k<ke;k+=4)G[k]=G[k-de],G[k+1]=G[k+1-de],G[k+2]=G[k+2-de],G[k+3]=G[k+3-de];k=ke}}q.l=M,q.p=me,q.b=k,M&&(j=1,q.m=P,q.d=T,q.n=$)}while(!j);return k==G.length?G:function(be,Ge,$e){(Ge==null||Ge<0)&&(Ge=0),($e==null||$e>be.length)&&($e=be.length);var at=new(be instanceof n?n:be instanceof r?r:e)($e-Ge);return at.set(be.subarray(Ge,$e)),at}(G,0,k)},H=new e(0),V=typeof TextDecoder<"u"&&new TextDecoder;try{V.decode(H,{stream:!0})}catch{}return t.convert_streams=function(O){var G=new DataView(O),q=0;function Y(){var X=G.getUint16(q);return q+=2,X}function I(){var X=G.getUint32(q);return q+=4,X}function B(X){te.setUint16(Q,X),Q+=2}function F(X){te.setUint32(Q,X),Q+=4}for(var z={signature:I(),flavor:I(),length:I(),numTables:Y(),reserved:Y(),totalSfntSize:I(),majorVersion:Y(),minorVersion:Y(),metaOffset:I(),metaLength:I(),metaOrigLength:I(),privOffset:I(),privLength:I()},j=0;Math.pow(2,j)<=z.numTables;)j++;j--;for(var U=16*Math.pow(2,j),k=16*z.numTables-U,M=12,T=[],P=0;P<z.numTables;P++)T.push({tag:I(),offset:I(),compLength:I(),origLength:I(),origChecksum:I()}),M+=16;var $,C=new Uint8Array(12+16*T.length+T.reduce(function(X,N){return X+N.origLength+4},0)),W=C.buffer,te=new DataView(W),Q=0;return F(z.flavor),B(z.numTables),B(U),B(j),B(k),T.forEach(function(X){F(X.tag),F(X.origChecksum),F(M),F(X.origLength),X.outOffset=M,(M+=X.origLength)%4!=0&&(M+=4-M%4)}),T.forEach(function(X){var N,ie=O.slice(X.offset,X.offset+X.compLength);if(X.compLength!=X.origLength){var ne=new Uint8Array(X.origLength);N=new Uint8Array(ie,2),A(N,ne)}else ne=new Uint8Array(ie);C.set(ne,X.outOffset);var Z=0;(M=X.outOffset+X.origLength)%4!=0&&(Z=4-M%4),C.set(new Uint8Array(Z).buffer,X.outOffset+X.origLength),$=M+Z}),W.slice(0,$)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function k2(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,a=4,s=8,l=16,u=32;let c;function f(w){if(!c){const E={R:o,L:i,D:a,C:l,U:u,T:s};c=new Map;for(let S in r){let x=0;r[S].split(",").forEach(A=>{let[H,V]=A.split("+");H=parseInt(H,36),V=V?parseInt(V,36):0,c.set(x+=H,E[S]);for(let O=V;O--;)c.set(++x,E[S])})}}return c.get(w)||u}const d=1,h=2,p=3,g=4,y=[null,"isol","init","fina","medi"];function m(w){const E=new Uint8Array(w.length);let S=u,x=d,A=-1;for(let H=0;H<w.length;H++){const V=w.codePointAt(H);let O=f(V)|0,G=d;O&s||(S&(i|a|l)?O&(o|a|l)?(G=p,(x===d||x===p)&&E[A]++):O&(i|u)&&(x===h||x===g)&&E[A]--:S&(o|u)&&(x===h||x===g)&&E[A]--,x=E[H]=G,S=O,A=H,V>65535&&H++)}return E}function v(w,E){const S=[];for(let A=0;A<E.length;A++){const H=E.codePointAt(A);H>65535&&A++,S.push(t.U.codeToGlyph(w,H))}const x=w.GSUB;if(x){const{lookupList:A,featureList:H}=x;let V;const O=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,G=[];H.forEach(q=>{if(O.test(q.tag))for(let Y=0;Y<q.tab.length;Y++){if(G[q.tab[Y]])continue;G[q.tab[Y]]=!0;const I=A[q.tab[Y]],B=/^(isol|init|fina|medi)$/.test(q.tag);B&&!V&&(V=m(E));for(let F=0;F<S.length;F++)(!V||!B||y[V[F]]===q.tag)&&t.U._applySubs(S,F,I,A)}})}return S}function b(...w){for(let E=0;E<w.length;E++)if(typeof w[E]=="number")return w[E]}function _(w){const E=Object.create(null),S=w["OS/2"],x=w.hhea,A=w.head.unitsPerEm,H=b(S&&S.sTypoAscender,x&&x.ascender,A),V={unitsPerEm:A,ascender:H,descender:b(S&&S.sTypoDescender,x&&x.descender,0),capHeight:b(S&&S.sCapHeight,H),xHeight:b(S&&S.sxHeight,H),lineGap:b(S&&S.sTypoLineGap,x&&x.lineGap),forEachGlyph(O,G,q,Y){let I=0;const B=1/V.unitsPerEm*G,F=v(w,O);let z=0,j=-1;return F.forEach((U,k)=>{if(U!==-1){let M=E[U];if(!M){const{cmds:T,crds:P}=t.U.glyphToPath(w,U);let $="",C=0;for(let N=0,ie=T.length;N<ie;N++){const ne=n[T[N]];$+=T[N];for(let Z=1;Z<=ne;Z++)$+=(Z>1?",":"")+P[C++]}let W,te,Q,X;if(P.length){W=te=1/0,Q=X=-1/0;for(let N=0,ie=P.length;N<ie;N+=2){let ne=P[N],Z=P[N+1];ne<W&&(W=ne),Z<te&&(te=Z),ne>Q&&(Q=ne),Z>X&&(X=Z)}}else W=Q=te=X=0;M=E[U]={index:U,advanceWidth:w.hmtx.aWidth[U],xMin:W,yMin:te,xMax:Q,yMax:X,path:$,pathCommandCount:T.length}}j!==-1&&(I+=t.U.getPairAdjustment(w,j,U)*B),Y.call(null,M,I,z),M.advanceWidth&&(I+=M.advanceWidth*B),q&&(I+=q*G),j=U}z+=O.codePointAt(z)>65535?2:1}),I}};return V}return function(E){const S=new Uint8Array(E,0,4),x=t._bin.readASCII(S,0,4);if(x==="wOFF")E=e(E);else if(x==="wOF2")throw new Error("woff2 fonts not supported");return _(t.parse(E)[0])}}const O2=xo({name:"Typr Font Parser",dependencies:[S2,A2,k2],init(t,e,n){const r=t(),i=e();return n(r,i)}}),Mr={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},D2=new Kt;function Tr(){return(self.performance||Date).now()}const Td=Object.create(null);function Mm(t,e){t=P2({},t);const n=Tr();if(t.font=R2(t.font||Mr.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Mr.sdfGlyphSize,t.colorRanges!=null){let f={};for(let d in t.colorRanges)if(t.colorRanges.hasOwnProperty(d)){let h=t.colorRanges[d];typeof h!="number"&&(h=D2.set(h).getHex()),f[d]=h}t.colorRanges=f}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=Mr,{sdfGlyphSize:o}=t,a=r/o*4;let s=Td[o];if(!s){const f=document.createElement("canvas");f.width=r,f.height=o*256/a,s=Td[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:f,sdfTexture:new Og(f,void 0,void 0,void 0,yl,yl),contextLost:!1,glyphsByFont:new Map},s.sdfTexture.generateMipmaps=!1,C2(s)}const{sdfTexture:l,sdfCanvas:u}=s;let c=s.glyphsByFont.get(t.font);c||s.glyphsByFont.set(t.font,c=new Map),L2(t).then(f=>{const{glyphIds:d,glyphPositions:h,fontSize:p,unitsPerEm:g,timings:y}=f,m=[],v=new Float32Array(d.length*4),b=p/g;let _=0,w=0;const E=Tr();d.forEach((V,O)=>{let G=c.get(V);if(!G){const{path:B,pathBounds:F}=f.glyphData[V],z=Math.max(F[2]-F[0],F[3]-F[1])/o*(Mr.sdfMargin*o+.5),j=s.glyphCount++,U=[F[0]-z,F[1]-z,F[2]+z,F[3]+z];c.set(V,G={path:B,atlasIndex:j,sdfViewBox:U}),m.push(G)}const{sdfViewBox:q}=G,Y=h[w++],I=h[w++];v[_++]=Y+q[0]*b,v[_++]=I+q[1]*b,v[_++]=Y+q[2]*b,v[_++]=I+q[3]*b,d[O]=G.atlasIndex}),y.quads=(y.quads||0)+(Tr()-E);const S=Tr();y.sdf={};const x=u.height,A=Math.ceil(s.glyphCount/a),H=Math.pow(2,Math.ceil(Math.log2(A*o)));H>x&&(console.info(`Increasing SDF texture size ${x}->${H}`),T2(u,r,H),l.dispose()),Promise.all(m.map(V=>Pm(V,s,t.gpuAccelerateSDF).then(({timing:O})=>{y.sdf[V.atlasIndex]=O}))).then(()=>{m.length&&!s.contextLost&&(Rm(s),l.needsUpdate=!0),y.sdfTotal=Tr()-S,y.total=Tr()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:o,sdfExponent:i,glyphBounds:v,glyphAtlasIndices:d,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{s.contextLost||E2(u)})}function Pm({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=Mr,u=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(e/4),f=c%(s/r)*r,d=Math.floor(c/(s/r))*r,h=e%4;return y2(r,r,t,n,u,l,i,f,d,h,a)}function C2(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(o=>{r.push(Pm(o,t,!0))})}),Promise.all(r).then(()=>{Rm(t),t.sdfTexture.needsUpdate=!0})})}function M2({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;Mm({font:t,sdfGlyphSize:n,text:i},r)}function P2(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let Yo;function R2(t){return Yo||(Yo=typeof document>"u"?{}:document.createElement("a")),Yo.href=t,Yo.href}function Rm(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,o=t.sdfCanvas.getContext("webgl");let a=n.image.data;(!a||a.length!==r*i*4)&&(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const I2=xo({name:"Typesetter",dependencies:[Mr,O2,g2,l2],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),L2=xo({name:"Typesetter",dependencies:[I2],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),Sd={};function U2(t){let e=Sd[t];if(!e){const n=new ou(1,1,t,t),r=n.clone(),i=n.attributes,o=r.attributes,a=new nu,s=i.uv.count;for(let l=0;l<s;l++)o.position.array[l*3]*=-1,o.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{a.setAttribute(l,new na([...i[l].array,...o[l].array],i[l].itemSize))}),a.setIndex([...n.index.array,...r.index.array.map(l=>l+s)]),a.translate(.5,.5,0),e=Sd[t]=a}return e}const V2="aTroikaGlyphBounds",Ad="aTroikaGlyphIndex",F2="aTroikaGlyphColor";class G2 extends Dg{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new th,this.boundingBox=new iu}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Cg?n/2:0,e===bt?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=U2(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,o){al(this,V2,e,4),al(this,Ad,n,1),al(this,F2,o,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:o,min:a,max:s,sin:l,cos:u}=Math,c=i/2,f=i*2,d=Math.abs(n),h=e[0]/d,p=e[2]/d,g=o((h+c)/f)!==o((p+c)/f)?-d:a(l(h)*d,l(p)*d),y=o((h-c)/f)!==o((p-c)/f)?d:s(l(h)*d,l(p)*d),m=o((h+i)/f)!==o((p+i)/f)?d*2:s(d-u(h)*d,d-u(p)*d);r.min.set(g,e[1],n<0?-m:0),r.max.set(y,e[3],n<0?0:m)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(Ad).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let o=r[i].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=n}}function al(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new Mg(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const z2=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,j2=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,N2=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,q2=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function B2(t){const e=Wl(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Oe},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new vl(0,0,0,0)},uTroikaClipRect:{value:new vl(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Oe},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Kt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new ar},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:z2,vertexTransform:j2,fragmentDefs:N2,fragmentColorTransform:q2,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(Dm,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const oc=new Pg({color:16777215,side:bt,transparent:!0}),kd=8421504,Od=new nh,Xo=new _e,sl=new _e,Di=[],$2=new _e,ll="+x+y";function Dd(t){return Array.isArray(t)?t[0]:t}let Im=()=>{const t=new Pr(new ou(1,1),oc);return Im=()=>t,t},Lm=()=>{const t=new Pr(new ou(1,1,32,1),oc);return Lm=()=>t,t};const W2={type:"syncstart"},H2={type:"synccomplete"},Um=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Y2=Um.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Vm=class extends Pr{constructor(){const e=new G2;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=kd,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=ll,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(W2),Mm({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(H2),e&&e()})))}onBeforeRender(e,n,r,i,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=kg}onAfterRender(e,n,r,i,o,a){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=oc.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=B2(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return Dd(this.material).getDepthMaterial()}get customDistanceMaterial(){return Dd(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:s,blockBounds:l}=i;r.uTroikaSDFTexture.value=s,r.uTroikaSDFTextureSize.value.set(s.image.width,s.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let u=0,c=0,f=0,d,h,p,g=0,y=0;if(n){let{outlineWidth:v,outlineOffsetX:b,outlineOffsetY:_,outlineBlur:w,outlineOpacity:E}=this;u=this._parsePercent(v)||0,c=Math.max(0,this._parsePercent(w)||0),d=E,g=this._parsePercent(b)||0,y=this._parsePercent(_)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,r.uTroikaStrokeColor.value.set(p??kd),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(g,y),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=h,r.uTroikaFillOpacity.value=d??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let m=this.clipRect;if(m&&Array.isArray(m)&&m.length===4)r.uTroikaClipRect.value.fromArray(m);else{const v=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-v,l[1]-v,l[2]+v,l[3]+v)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=n?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const s=e.hasOwnProperty("color")?e.color:e.color=new Kt;(o!==s._input||typeof o=="object")&&s.set(s._input=o)}let a=this.orientation||ll;if(a!==e._orientation){let s=r.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let l=a!==ll&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,c,f,d]=l;Xo.set(0,0,0)[c]=u==="-"?1:-1,sl.set(0,0,0)[d]=f==="-"?-1:1,Od.lookAt($2,Xo.cross(sl),sl),s.setFromMatrix4(Od)}else s.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new Oe){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new Oe){return Xo.copy(e),this.localPositionToTextCoords(this.worldToLocal(Xo),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const o=r.blockBounds,a=i?Lm():Im(),s=a.geometry,{position:l,uv:u}=s.attributes;for(let c=0;c<u.count;c++){let f=o[0]+u.getX(c)*(o[2]-o[0]);const d=o[1]+u.getY(c)*(o[3]-o[1]);let h=0;i&&(h=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(c,f,d,h)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Di.length=0,a.raycast(e,Di);for(let c=0;c<Di.length;c++)Di[c].object=this,n.push(Di[c])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,Y2.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};Um.forEach(t=>{const e="_private_"+t;Object.defineProperty(Vm.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const X2=R.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:o,characters:a,onSync:s,...l},u)=>{const c=lt(({invalidate:p})=>p),[f]=R.useState(()=>new Vm),[d,h]=R.useMemo(()=>{const p=[];let g="";return R.Children.forEach(o,y=>{typeof y=="string"||typeof y=="number"?g+=y:p.push(y)}),[p,g]},[o]);return Rg(()=>new Promise(p=>M2({font:r,characters:a},p)),["troika-text",r,a]),R.useLayoutEffect(()=>void f.sync(()=>{c(),s&&s(f)})),R.useEffect(()=>()=>f.dispose(),[f]),R.createElement("primitive",bn({object:f,ref:u,font:r,text:h,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),d)}),K2=R.forwardRef(function({src:e,skipFill:n,skipStrokes:r,fillMaterial:i,strokeMaterial:o,fillMeshProps:a,strokeMeshProps:s,...l},u){const c=Ig(qi,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),f=R.useMemo(()=>r?[]:c.paths.map(d=>{var h;return((h=d.userData)==null?void 0:h.style.stroke)===void 0||d.userData.style.stroke==="none"?null:d.subPaths.map(p=>qi.pointsToStroke(p.getPoints(),d.userData.style))}),[c,r]);return R.useEffect(()=>()=>f.forEach(d=>d&&d.map(h=>h.dispose())),[f]),R.createElement("object3D",bn({ref:u},l),R.createElement("object3D",{scale:[1,-1,1]},c.paths.map((d,h)=>{var p,g;return R.createElement(R.Fragment,{key:h},!n&&((p=d.userData)==null?void 0:p.style.fill)!==void 0&&d.userData.style.fill!=="none"&&qi.createShapes(d).map((y,m)=>R.createElement("mesh",bn({key:m},a),R.createElement("shapeGeometry",{args:[y]}),R.createElement("meshBasicMaterial",bn({color:d.userData.style.fill,opacity:d.userData.style.fillOpacity,transparent:!0,side:bt,depthWrite:!1},i)))),!r&&((g=d.userData)==null?void 0:g.style.stroke)!==void 0&&d.userData.style.stroke!=="none"&&d.subPaths.map((y,m)=>R.createElement("mesh",bn({key:m,geometry:f[h][m]},s),R.createElement("meshBasicMaterial",bn({color:d.userData.style.stroke,opacity:d.userData.style.strokeOpacity,transparent:!0,side:bt,depthWrite:!1},o)))))})))});/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Ke={LEFT:1,RIGHT:2,MIDDLE:4},ee=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Sr={NONE:0,IN:1,OUT:-1};function rr(t){return t.isPerspectiveCamera}function qn(t){return t.isOrthographicCamera}const Ar=Math.PI*2,Cd=Math.PI/2,Fm=1e-5,Ci=Math.PI/180;function sn(t,e,n){return Math.max(e,Math.min(n,t))}function We(t,e=Fm){return Math.abs(t)<e}function Ve(t,e,n=Fm){return We(t-e,n)}function Md(t,e){return Math.round(t/e)*e}function Mi(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Pi(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function Ko(t,e,n,r,i=1/0,o){r=Math.max(1e-4,r);const a=2/r,s=a*o,l=1/(1+s+.48*s*s+.235*s*s*s);let u=t-e;const c=e,f=i*r;u=sn(u,-f,f),e=t-u;const d=(n.value+a*u)*o;n.value=(n.value-a*d)*l;let h=e+(u+d)*l;return c-t>0==h>c&&(h=c,n.value=(h-c)/o),h}function Pd(t,e,n,r,i=1/0,o,a){r=Math.max(1e-4,r);const s=2/r,l=s*o,u=1/(1+l+.48*l*l+.235*l*l*l);let c=e.x,f=e.y,d=e.z,h=t.x-c,p=t.y-f,g=t.z-d;const y=c,m=f,v=d,b=i*r,_=b*b,w=h*h+p*p+g*g;if(w>_){const Y=Math.sqrt(w);h=h/Y*b,p=p/Y*b,g=g/Y*b}c=t.x-h,f=t.y-p,d=t.z-g;const E=(n.x+s*h)*o,S=(n.y+s*p)*o,x=(n.z+s*g)*o;n.x=(n.x-s*E)*u,n.y=(n.y-s*S)*u,n.z=(n.z-s*x)*u,a.x=c+(h+E)*u,a.y=f+(p+S)*u,a.z=d+(g+x)*u;const A=y-t.x,H=m-t.y,V=v-t.z,O=a.x-y,G=a.y-m,q=a.z-v;return A*O+H*G+V*q>0&&(a.x=y,a.y=m,a.z=v,n.x=(a.x-y)/o,n.y=(a.y-m)/o,n.z=(a.z-v)/o),a}function ul(t,e){e.set(0,0),t.forEach(n=>{e.x+=n.clientX,e.y+=n.clientY}),e.x/=t.length,e.y/=t.length}function cl(t,e){return qn(t)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}let Z2=class{constructor(){this._listeners={}}addEventListener(e,n){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e)}}};var fl;const Q2="2.8.3",Zo=1/8,J2=/Mac/.test((fl=globalThis==null?void 0:globalThis.navigator)===null||fl===void 0?void 0:fl.platform);let ve,Rd,Qo,dl,Dt,Ee,Me,kr,Ri,mn,gn,ir,Id,Ld,Nt,Ii,Or,Ud,hl,Vd,pl,ml,Jo,Ct=class Yl extends Z2{static install(e){ve=e.THREE,Rd=Object.freeze(new ve.Vector3(0,0,0)),Qo=Object.freeze(new ve.Vector3(0,1,0)),dl=Object.freeze(new ve.Vector3(0,0,1)),Dt=new ve.Vector2,Ee=new ve.Vector3,Me=new ve.Vector3,kr=new ve.Vector3,Ri=new ve.Vector3,mn=new ve.Vector3,gn=new ve.Vector3,ir=new ve.Vector3,Id=new ve.Vector3,Ld=new ve.Vector3,Nt=new ve.Spherical,Ii=new ve.Spherical,Or=new ve.Box3,Ud=new ve.Box3,hl=new ve.Sphere,Vd=new ve.Quaternion,pl=new ve.Quaternion,ml=new ve.Matrix4,Jo=new ve.Raycaster}static get ACTION(){return ee}constructor(e,n){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ee.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Sr.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new ve.Vector3,this._focalOffsetVelocity=new ve.Vector3,this._zoomVelocity={value:0},this._truckInternal=(m,v,b)=>{let _,w;if(rr(this._camera)){const E=Ee.copy(this._camera.position).sub(this._target),S=this._camera.getEffectiveFOV()*Ci,x=E.length()*Math.tan(S*.5);_=this.truckSpeed*m*x/this._elementRect.height,w=this.truckSpeed*v*x/this._elementRect.height}else if(qn(this._camera)){const E=this._camera;_=m*(E.right-E.left)/E.zoom/this._elementRect.width,w=v*(E.top-E.bottom)/E.zoom/this._elementRect.height}else return;this.verticalDragToForward?(b?this.setFocalOffset(this._focalOffsetEnd.x+_,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(_,0,!0),this.forward(-w,!0)):b?this.setFocalOffset(this._focalOffsetEnd.x+_,this._focalOffsetEnd.y+w,this._focalOffsetEnd.z,!0):this.truck(_,w,!0)},this._rotateInternal=(m,v)=>{const b=Ar*this.azimuthRotateSpeed*m/this._elementRect.height,_=Ar*this.polarRotateSpeed*v/this._elementRect.height;this.rotate(b,_,!0)},this._dollyInternal=(m,v,b)=>{const _=Math.pow(.95,-m*this.dollySpeed),w=this._sphericalEnd.radius,E=this._sphericalEnd.radius*_,S=sn(E,this.minDistance,this.maxDistance),x=S-E;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(E,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(x,!0),this._dollyToNoClamp(S,!0)):this._dollyToNoClamp(S,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?E:S)-w,this._dollyControlCoord.set(v,b)),this._lastDollyDirection=Math.sign(-m)},this._zoomInternal=(m,v,b)=>{const _=Math.pow(.95,m*this.dollySpeed),w=this._zoom,E=this._zoom*_;this.zoomTo(E,!0),this.dollyToCursor&&(this._changedZoom+=E-w,this._dollyControlCoord.set(v,b))},typeof ve>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new ve.Quaternion().setFromUnitVectors(this._camera.up,Qo),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ee.NONE,this._target=new ve.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new ve.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new ve.Spherical().setFromVector3(Ee.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new ve.Vector3,new ve.Vector3,new ve.Vector3,new ve.Vector3],this._updateNearPlaneCorners(),this._boundary=new ve.Box3(new ve.Vector3(-1/0,-1/0,-1/0),new ve.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new ve.Vector2,this.mouseButtons={left:ee.ROTATE,middle:ee.DOLLY,right:ee.TRUCK,wheel:rr(this._camera)?ee.DOLLY:qn(this._camera)?ee.ZOOM:ee.NONE},this.touches={one:ee.TOUCH_ROTATE,two:rr(this._camera)?ee.TOUCH_DOLLY_TRUCK:qn(this._camera)?ee.TOUCH_ZOOM_TRUCK:ee.NONE,three:ee.TOUCH_TRUCK};const r=new ve.Vector2,i=new ve.Vector2,o=new ve.Vector2,a=m=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const _=this._domElement.getBoundingClientRect(),w=m.clientX/_.width,E=m.clientY/_.height;if(w<this._interactiveArea.left||w>this._interactiveArea.right||E<this._interactiveArea.top||E>this._interactiveArea.bottom)return}const v=m.pointerType!=="mouse"?null:(m.buttons&Ke.LEFT)===Ke.LEFT?Ke.LEFT:(m.buttons&Ke.MIDDLE)===Ke.MIDDLE?Ke.MIDDLE:(m.buttons&Ke.RIGHT)===Ke.RIGHT?Ke.RIGHT:null;if(v!==null){const _=this._findPointerByMouseButton(v);_&&this._disposePointer(_)}if((m.buttons&Ke.LEFT)===Ke.LEFT&&this._lockedPointer)return;const b={pointerId:m.pointerId,clientX:m.clientX,clientY:m.clientY,deltaX:0,deltaY:0,mouseButton:v};this._activePointers.push(b),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,d(m)},s=m=>{m.cancelable&&m.preventDefault();const v=m.pointerId,b=this._lockedPointer||this._findPointerById(v);if(b){if(b.clientX=m.clientX,b.clientY=m.clientY,b.deltaX=m.movementX,b.deltaY=m.movementY,this._state=0,m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(m.buttons&Ke.LEFT)===Ke.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(m.buttons&Ke.MIDDLE)===Ke.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(m.buttons&Ke.RIGHT)===Ke.RIGHT&&(this._state=this._state|this.mouseButtons.right);h()}},l=m=>{const v=this._findPointerById(m.pointerId);if(!(v&&v===this._lockedPointer)){if(v&&this._disposePointer(v),m.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ee.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ee.NONE;p()}};let u=-1;const c=m=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ee.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),S=m.clientX/E.width,x=m.clientY/E.height;if(S<this._interactiveArea.left||S>this._interactiveArea.right||x<this._interactiveArea.top||x>this._interactiveArea.bottom)return}if(m.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ee.ROTATE||this.mouseButtons.wheel===ee.TRUCK){const E=performance.now();u-E<1e3&&this._getClientRect(this._elementRect),u=E}const v=J2?-1:-3,b=m.deltaMode===1?m.deltaY/v:m.deltaY/(v*10),_=this.dollyToCursor?(m.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,w=this.dollyToCursor?(m.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ee.ROTATE:{this._rotateInternal(m.deltaX,m.deltaY),this._isUserControllingRotate=!0;break}case ee.TRUCK:{this._truckInternal(m.deltaX,m.deltaY,!1),this._isUserControllingTruck=!0;break}case ee.OFFSET:{this._truckInternal(m.deltaX,m.deltaY,!0),this._isUserControllingOffset=!0;break}case ee.DOLLY:{this._dollyInternal(-b,_,w),this._isUserControllingDolly=!0;break}case ee.ZOOM:{this._zoomInternal(-b,_,w),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},f=m=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Yl.ACTION.NONE){const v=m instanceof PointerEvent?m.pointerId:0,b=this._findPointerById(v);b&&this._disposePointer(b),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}m.preventDefault()}},d=m=>{if(!this._enabled)return;if(ul(this._activePointers,Dt),this._getClientRect(this._elementRect),r.copy(Dt),i.copy(Dt),this._activePointers.length>=2){const b=Dt.x-this._activePointers[1].clientX,_=Dt.y-this._activePointers[1].clientY,w=Math.sqrt(b*b+_*_);o.set(0,w);const E=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,S=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(E,S)}if(this._state=0,!m)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in m&&m.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(m.buttons&Ke.LEFT)===Ke.LEFT&&(this._state=this._state|this.mouseButtons.left),(m.buttons&Ke.MIDDLE)===Ke.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(m.buttons&Ke.RIGHT)===Ke.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ee.ROTATE)===ee.ROTATE||(this._state&ee.TOUCH_ROTATE)===ee.TOUCH_ROTATE||(this._state&ee.TOUCH_DOLLY_ROTATE)===ee.TOUCH_DOLLY_ROTATE||(this._state&ee.TOUCH_ZOOM_ROTATE)===ee.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ee.TRUCK)===ee.TRUCK||(this._state&ee.TOUCH_TRUCK)===ee.TOUCH_TRUCK||(this._state&ee.TOUCH_DOLLY_TRUCK)===ee.TOUCH_DOLLY_TRUCK||(this._state&ee.TOUCH_ZOOM_TRUCK)===ee.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ee.DOLLY)===ee.DOLLY||(this._state&ee.TOUCH_DOLLY)===ee.TOUCH_DOLLY||(this._state&ee.TOUCH_DOLLY_TRUCK)===ee.TOUCH_DOLLY_TRUCK||(this._state&ee.TOUCH_DOLLY_OFFSET)===ee.TOUCH_DOLLY_OFFSET||(this._state&ee.TOUCH_DOLLY_ROTATE)===ee.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ee.ZOOM)===ee.ZOOM||(this._state&ee.TOUCH_ZOOM)===ee.TOUCH_ZOOM||(this._state&ee.TOUCH_ZOOM_TRUCK)===ee.TOUCH_ZOOM_TRUCK||(this._state&ee.TOUCH_ZOOM_OFFSET)===ee.TOUCH_ZOOM_OFFSET||(this._state&ee.TOUCH_ZOOM_ROTATE)===ee.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ee.OFFSET)===ee.OFFSET||(this._state&ee.TOUCH_OFFSET)===ee.TOUCH_OFFSET||(this._state&ee.TOUCH_DOLLY_OFFSET)===ee.TOUCH_DOLLY_OFFSET||(this._state&ee.TOUCH_ZOOM_OFFSET)===ee.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},h=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,ul(this._activePointers,Dt);const v=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,b=v?-v.deltaX:i.x-Dt.x,_=v?-v.deltaY:i.y-Dt.y;if(i.copy(Dt),((this._state&ee.ROTATE)===ee.ROTATE||(this._state&ee.TOUCH_ROTATE)===ee.TOUCH_ROTATE||(this._state&ee.TOUCH_DOLLY_ROTATE)===ee.TOUCH_DOLLY_ROTATE||(this._state&ee.TOUCH_ZOOM_ROTATE)===ee.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(b,_),this._isUserControllingRotate=!0),(this._state&ee.DOLLY)===ee.DOLLY||(this._state&ee.ZOOM)===ee.ZOOM){const w=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,E=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,S=this.dollyDragInverted?-1:1;(this._state&ee.DOLLY)===ee.DOLLY?(this._dollyInternal(S*_*Zo,w,E),this._isUserControllingDolly=!0):(this._zoomInternal(S*_*Zo,w,E),this._isUserControllingZoom=!0)}if((this._state&ee.TOUCH_DOLLY)===ee.TOUCH_DOLLY||(this._state&ee.TOUCH_ZOOM)===ee.TOUCH_ZOOM||(this._state&ee.TOUCH_DOLLY_TRUCK)===ee.TOUCH_DOLLY_TRUCK||(this._state&ee.TOUCH_ZOOM_TRUCK)===ee.TOUCH_ZOOM_TRUCK||(this._state&ee.TOUCH_DOLLY_OFFSET)===ee.TOUCH_DOLLY_OFFSET||(this._state&ee.TOUCH_ZOOM_OFFSET)===ee.TOUCH_ZOOM_OFFSET||(this._state&ee.TOUCH_DOLLY_ROTATE)===ee.TOUCH_DOLLY_ROTATE||(this._state&ee.TOUCH_ZOOM_ROTATE)===ee.TOUCH_ZOOM_ROTATE){const w=Dt.x-this._activePointers[1].clientX,E=Dt.y-this._activePointers[1].clientY,S=Math.sqrt(w*w+E*E),x=o.y-S;o.set(0,S);const A=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,H=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ee.TOUCH_DOLLY)===ee.TOUCH_DOLLY||(this._state&ee.TOUCH_DOLLY_ROTATE)===ee.TOUCH_DOLLY_ROTATE||(this._state&ee.TOUCH_DOLLY_TRUCK)===ee.TOUCH_DOLLY_TRUCK||(this._state&ee.TOUCH_DOLLY_OFFSET)===ee.TOUCH_DOLLY_OFFSET?(this._dollyInternal(x*Zo,A,H),this._isUserControllingDolly=!0):(this._zoomInternal(x*Zo,A,H),this._isUserControllingZoom=!0)}((this._state&ee.TRUCK)===ee.TRUCK||(this._state&ee.TOUCH_TRUCK)===ee.TOUCH_TRUCK||(this._state&ee.TOUCH_DOLLY_TRUCK)===ee.TOUCH_DOLLY_TRUCK||(this._state&ee.TOUCH_ZOOM_TRUCK)===ee.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(b,_,!1),this._isUserControllingTruck=!0),((this._state&ee.OFFSET)===ee.OFFSET||(this._state&ee.TOUCH_OFFSET)===ee.TOUCH_OFFSET||(this._state&ee.TOUCH_DOLLY_OFFSET)===ee.TOUCH_DOLLY_OFFSET||(this._state&ee.TOUCH_ZOOM_OFFSET)===ee.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(b,_,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},p=()=>{ul(this._activePointers,Dt),i.copy(Dt),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",g),this._domElement.ownerDocument.addEventListener("pointerlockerror",y),this._domElement.ownerDocument.addEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),d())},this.unlockPointer=()=>{var m,v,b;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(m=this._domElement)===null||m===void 0||m.ownerDocument.exitPointerLock(),(v=this._domElement)===null||v===void 0||v.ownerDocument.removeEventListener("pointerlockchange",g),(b=this._domElement)===null||b===void 0||b.ownerDocument.removeEventListener("pointerlockerror",y),this.cancel()};const g=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},y=()=>{this.unlockPointer()};this._addAllEventListeners=m=>{this._domElement=m,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",c,{passive:!1}),this._domElement.addEventListener("contextmenu",f)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",c,{passive:!1}),this._domElement.removeEventListener("contextmenu",f),this._domElement.ownerDocument.removeEventListener("pointermove",s,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",g),this._domElement.ownerDocument.removeEventListener("pointerlockerror",y))},this.cancel=()=>{this._state!==ee.NONE&&(this._state=ee.NONE,this._activePointers.length=0,p())},n&&this.connect(n),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=sn(e.width,0,1),this._interactiveArea.height=sn(e.height,0,1),this._interactiveArea.x=sn(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=sn(e.y,0,1-this._interactiveArea.height)}addEventListener(e,n){super.addEventListener(e,n)}removeEventListener(e,n){super.removeEventListener(e,n)}rotate(e,n,r=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+n,r)}rotateAzimuthTo(e,n=!1){return this.rotateTo(e,this._sphericalEnd.phi,n)}rotatePolarTo(e,n=!1){return this.rotateTo(this._sphericalEnd.theta,e,n)}rotateTo(e,n,r=!1){this._isUserControllingRotate=!1;const i=sn(e,this.minAzimuthAngle,this.maxAzimuthAngle),o=sn(n,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!r||Ve(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ve(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(e,n=!1){return this.dollyTo(this._sphericalEnd.radius-e,n)}dollyTo(e,n=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Sr.NONE,this._changedDolly=0,this._dollyToNoClamp(sn(e,this.minDistance,this.maxDistance),n)}_dollyToNoClamp(e,n=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),s=Ve(a,this._spherical.radius);if(!(r>e)&&s)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,a)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,n||(this._spherical.radius=this._sphericalEnd.radius);const o=!n||Ve(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(o)}dollyInFixed(e,n=!1){this._targetEnd.add(this._getCameraDirection(Ri).multiplyScalar(e)),n||this._target.copy(this._targetEnd);const r=!n||Ve(this._target.x,this._targetEnd.x,this.restThreshold)&&Ve(this._target.y,this._targetEnd.y,this.restThreshold)&&Ve(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(e,n=!1){return this.zoomTo(this._zoomEnd+e,n)}zoomTo(e,n=!1){this._isUserControllingZoom=!1,this._zoomEnd=sn(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,n||(this._zoom=this._zoomEnd);const r=!n||Ve(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(e,n,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,n,r)}truck(e,n,r=!1){this._camera.updateMatrix(),mn.setFromMatrixColumn(this._camera.matrix,0),gn.setFromMatrixColumn(this._camera.matrix,1),mn.multiplyScalar(e),gn.multiplyScalar(-n);const i=Ee.copy(mn).add(gn),o=Me.copy(this._targetEnd).add(i);return this.moveTo(o.x,o.y,o.z,r)}forward(e,n=!1){Ee.setFromMatrixColumn(this._camera.matrix,0),Ee.crossVectors(this._camera.up,Ee),Ee.multiplyScalar(e);const r=Me.copy(this._targetEnd).add(Ee);return this.moveTo(r.x,r.y,r.z,n)}elevate(e,n=!1){return Ee.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Ee.x,this._targetEnd.y+Ee.y,this._targetEnd.z+Ee.z,n)}moveTo(e,n,r,i=!1){this._isUserControllingTruck=!1;const o=Ee.set(e,n,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,o,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const a=!i||Ve(this._target.x,this._targetEnd.x,this.restThreshold)&&Ve(this._target.y,this._targetEnd.y,this.restThreshold)&&Ve(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(e,n,r,i=!1){const s=Ee.set(e,n,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(s.x,s.y,s.z,i)}fitToBox(e,n,{cover:r=!1,paddingLeft:i=0,paddingRight:o=0,paddingBottom:a=0,paddingTop:s=0}={}){const l=[],u=e.isBox3?Or.copy(e):Or.setFromObject(e);u.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const c=Md(this._sphericalEnd.theta,Cd),f=Md(this._sphericalEnd.phi,Cd);l.push(this.rotateTo(c,f,n));const d=Ee.setFromSpherical(this._sphericalEnd).normalize(),h=Vd.setFromUnitVectors(d,dl),p=Ve(Math.abs(d.y),1);p&&h.multiply(pl.setFromAxisAngle(Qo,c)),h.multiply(this._yAxisUpSpaceInverse);const g=Ud.makeEmpty();Me.copy(u.min).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.min).setX(u.max.x).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.min).setY(u.max.y).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.max).setZ(u.min.z).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.min).setZ(u.max.z).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.max).setY(u.min.y).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.max).setX(u.min.x).applyQuaternion(h),g.expandByPoint(Me),Me.copy(u.max).applyQuaternion(h),g.expandByPoint(Me),g.min.x-=i,g.min.y-=a,g.max.x+=o,g.max.y+=s,h.setFromUnitVectors(dl,d),p&&h.premultiply(pl.invert()),h.premultiply(this._yAxisUpSpace);const y=g.getSize(Ee),m=g.getCenter(Me).applyQuaternion(h);if(rr(this._camera)){const v=this.getDistanceToFitBox(y.x,y.y,y.z,r);l.push(this.moveTo(m.x,m.y,m.z,n)),l.push(this.dollyTo(v,n)),l.push(this.setFocalOffset(0,0,0,n))}else if(qn(this._camera)){const v=this._camera,b=v.right-v.left,_=v.top-v.bottom,w=r?Math.max(b/y.x,_/y.y):Math.min(b/y.x,_/y.y);l.push(this.moveTo(m.x,m.y,m.z,n)),l.push(this.zoomTo(w,n)),l.push(this.setFocalOffset(0,0,0,n))}return Promise.all(l)}fitToSphere(e,n){const r=[],o=e instanceof ve.Sphere?hl.copy(e):Yl.createBoundingSphere(e,hl);if(r.push(this.moveTo(o.center.x,o.center.y,o.center.z,n)),rr(this._camera)){const a=this.getDistanceToFitSphere(o.radius);r.push(this.dollyTo(a,n))}else if(qn(this._camera)){const a=this._camera.right-this._camera.left,s=this._camera.top-this._camera.bottom,l=2*o.radius,u=Math.min(a/l,s/l);r.push(this.zoomTo(u,n))}return r.push(this.setFocalOffset(0,0,0,n)),Promise.all(r)}setLookAt(e,n,r,i,o,a,s=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Sr.NONE,this._changedDolly=0;const l=Me.set(i,o,a),u=Ee.set(e,n,r);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(u.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,s||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const c=!s||Ve(this._target.x,this._targetEnd.x,this.restThreshold)&&Ve(this._target.y,this._targetEnd.y,this.restThreshold)&&Ve(this._target.z,this._targetEnd.z,this.restThreshold)&&Ve(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ve(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ve(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(e,n,r,i,o,a,s,l,u,c,f,d,h,p=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Sr.NONE,this._changedDolly=0;const g=Ee.set(i,o,a),y=Me.set(e,n,r);Nt.setFromVector3(y.sub(g).applyQuaternion(this._yAxisUpSpace));const m=kr.set(c,f,d),v=Me.set(s,l,u);Ii.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(g.lerp(m,h));const b=Ii.theta-Nt.theta,_=Ii.phi-Nt.phi,w=Ii.radius-Nt.radius;this._sphericalEnd.set(Nt.radius+w*h,Nt.phi+_*h,Nt.theta+b*h),this.normalizeRotations(),this._needsUpdate=!0,p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const E=!p||Ve(this._target.x,this._targetEnd.x,this.restThreshold)&&Ve(this._target.y,this._targetEnd.y,this.restThreshold)&&Ve(this._target.z,this._targetEnd.z,this.restThreshold)&&Ve(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Ve(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Ve(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(E)}setPosition(e,n,r,i=!1){return this.setLookAt(e,n,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(e,n,r,i=!1){const o=this.getPosition(Ee),a=this.setLookAt(o.x,o.y,o.z,e,n,r,i);return this._sphericalEnd.phi=sn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(e,n,r,i=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,n,r),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);const o=!i||Ve(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Ve(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Ve(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}setOrbitPoint(e,n,r){this._camera.updateMatrixWorld(),mn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),gn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),ir.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=Ee.set(e,n,r),o=i.distanceTo(this._camera.position),a=i.sub(this._camera.position);mn.multiplyScalar(a.x),gn.multiplyScalar(a.y),ir.multiplyScalar(a.z),Ee.copy(mn).add(gn).add(ir),Ee.z=Ee.z+o,this.dollyTo(o,!1),this.setFocalOffset(-Ee.x,Ee.y,-Ee.z,!1),this.moveTo(e,n,r,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,n,r,i){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new ve.Vector4,typeof e=="number"?this._viewport.set(e,n,r,i):this._viewport.copy(e)}getDistanceToFitBox(e,n,r,i=!1){if(cl(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const o=e/n,a=this._camera.getEffectiveFOV()*Ci,s=this._camera.aspect;return((i?o>s:o<s)?n:e/s)*.5/Math.tan(a*.5)+r*.5}getDistanceToFitSphere(e){if(cl(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const n=this._camera.getEffectiveFOV()*Ci,r=Math.atan(Math.tan(n*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?n:r;return e/Math.sin(i*.5)}getTarget(e,n=!0){return(e&&e.isVector3?e:new ve.Vector3).copy(n?this._targetEnd:this._target)}getPosition(e,n=!0){return(e&&e.isVector3?e:new ve.Vector3).setFromSpherical(n?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(n?this._targetEnd:this._target)}getSpherical(e,n=!0){return(e&&e instanceof ve.Spherical?e:new ve.Spherical).copy(n?this._sphericalEnd:this._spherical)}getFocalOffset(e,n=!0){return(e&&e.isVector3?e:new ve.Vector3).copy(n?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Ar,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Ar),this._spherical.theta+=Ar*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Ar)}reset(e=!1){if(!Ve(this._camera.up.x,this._cameraUp0.x)||!Ve(this._camera.up.y,this._cameraUp0.y)||!Ve(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(Ee);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const n=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(n)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Qo),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Ee.subVectors(this._target,this._camera.position).normalize(),n=Me.crossVectors(e,this._camera.up);this._camera.up.crossVectors(n,e).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(Ee);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(e){const n=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,o=Id.subVectors(this._targetEnd,this._target),a=Ld.subVectors(this._focalOffsetEnd,this._focalOffset),s=this._zoomEnd-this._zoom;if(We(n))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Ko(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,f,1/0,e),this._needsUpdate=!0}if(We(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const f=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Ko(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,f,1/0,e),this._needsUpdate=!0}if(We(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const f=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Ko(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,f,this.maxSpeed,e),this._needsUpdate=!0}if(We(o.x)&&We(o.y)&&We(o.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const f=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Pd(this._target,this._targetEnd,this._targetVelocity,f,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(We(a.x)&&We(a.y)&&We(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const f=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Pd(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,f,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(We(s))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const f=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Ko(this._zoom,this._zoomEnd,this._zoomVelocity,f,1/0,e)}if(this.dollyToCursor){if(rr(this._camera)&&this._changedDolly!==0){const f=this._spherical.radius-this._lastDistance,d=this._camera,h=this._getCameraDirection(Ri),p=Ee.copy(h).cross(d.up).normalize();p.lengthSq()===0&&(p.x=1);const g=Me.crossVectors(p,h),y=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*Ci*.5),v=(this._sphericalEnd.radius-f-this._sphericalEnd.radius)/this._sphericalEnd.radius,b=kr.copy(this._targetEnd).add(p.multiplyScalar(this._dollyControlCoord.x*y*d.aspect)).add(g.multiplyScalar(this._dollyControlCoord.y*y)),_=Ee.copy(this._targetEnd).lerp(b,v),w=this._lastDollyDirection===Sr.IN&&this._spherical.radius<=this.minDistance,E=this._lastDollyDirection===Sr.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(w||E)){this._sphericalEnd.radius-=f,this._spherical.radius-=f;const x=Me.copy(h).multiplyScalar(-f);_.add(x)}this._boundary.clampPoint(_,_);const S=Me.subVectors(_,this._targetEnd);this._targetEnd.copy(_),this._target.add(S),this._changedDolly-=f,We(this._changedDolly)&&(this._changedDolly=0)}else if(qn(this._camera)&&this._changedZoom!==0){const f=this._zoom-this._lastZoom,d=this._camera,h=Ee.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),p=Me.set(0,0,-1).applyQuaternion(d.quaternion),g=kr.copy(h).add(p.multiplyScalar(-h.dot(d.up))),m=-(this._zoom-f-this._zoom)/this._zoom,v=this._getCameraDirection(Ri),b=this._targetEnd.dot(v),_=Ee.copy(this._targetEnd).lerp(g,m),w=_.dot(v),E=v.multiplyScalar(w-b);_.sub(E),this._boundary.clampPoint(_,_);const S=Me.subVectors(_,this._targetEnd);this._targetEnd.copy(_),this._target.add(S),this._changedZoom-=f,We(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!We(this._focalOffset.x)||!We(this._focalOffset.y)||!We(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),mn.setFromMatrixColumn(this._camera.matrix,0),gn.setFromMatrixColumn(this._camera.matrix,1),ir.setFromMatrixColumn(this._camera.matrix,2),mn.multiplyScalar(this._focalOffset.x),gn.multiplyScalar(-this._focalOffset.y),ir.multiplyScalar(this._focalOffset.z),Ee.copy(mn).add(gn).add(ir),this._camera.position.add(Ee)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Ee.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const c=this._needsUpdate;return c&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):c?(this.dispatchEvent({type:"update"}),We(n,this.restThreshold)&&We(r,this.restThreshold)&&We(i,this.restThreshold)&&We(o.x,this.restThreshold)&&We(o.y,this.restThreshold)&&We(o.z,this.restThreshold)&&We(a.x,this.restThreshold)&&We(a.y,this.restThreshold)&&We(a.z,this.restThreshold)&&We(s,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!c&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=c,this._needsUpdate=!1,c}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Mi(this.maxDistance),minZoom:this.minZoom,maxZoom:Mi(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Mi(this.maxPolarAngle),minAzimuthAngle:Mi(this.minAzimuthAngle),maxAzimuthAngle:Mi(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Ee.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,n=!1){const r=JSON.parse(e);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=Pi(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=Pi(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=Pi(r.maxPolarAngle),this.minAzimuthAngle=Pi(r.minAzimuthAngle),this.maxAzimuthAngle=Pi(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this.verticalDragToForward=r.verticalDragToForward,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],n),Nt.setFromVector3(Ee.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Nt.theta,Nt.phi,n),this.dollyTo(Nt.radius,n),this.zoomTo(r.zoom,n),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],n),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",Q2),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(n=>n.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(n=>n.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,n,r){const i=n.lengthSq();if(i===0)return e;const o=Me.copy(n).add(e),s=this._boundary.clampPoint(o,kr).sub(o),l=s.lengthSq();if(l===0)return e.add(n);if(l===i)return e;if(r===0)return e.add(n).add(s);{const u=1+r*l/n.dot(s);return e.add(Me.copy(n).multiplyScalar(u)).add(s.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(rr(this._camera)){const e=this._camera,n=e.near,r=e.getEffectiveFOV()*Ci,i=Math.tan(r*.5)*n,o=i*e.aspect;this._nearPlaneCorners[0].set(-o,-i,0),this._nearPlaneCorners[1].set(o,-i,0),this._nearPlaneCorners[2].set(o,i,0),this._nearPlaneCorners[3].set(-o,i,0)}else if(qn(this._camera)){const e=this._camera,n=1/e.zoom,r=e.left*n,i=e.right*n,o=e.top*n,a=e.bottom*n;this._nearPlaneCorners[0].set(r,o,0),this._nearPlaneCorners[1].set(i,o,0),this._nearPlaneCorners[2].set(i,a,0),this._nearPlaneCorners[3].set(r,a,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||cl(this._camera,"_collisionTest"))return e;const r=this._getTargetDirection(Ri);ml.lookAt(Rd,r,this._camera.up);for(let i=0;i<4;i++){const o=Me.copy(this._nearPlaneCorners[i]);o.applyMatrix4(ml);const a=kr.addVectors(this._target,o);Jo.set(a,r),Jo.far=this._spherical.radius+1;const s=Jo.intersectObjects(this.colliderMeshes);s.length!==0&&s[0].distance<e&&(e=s[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const n=this._domElement.getBoundingClientRect();return e.x=n.left,e.y=n.top,this._viewport?(e.x+=this._viewport.x,e.y+=n.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=n.width,e.height=n.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(n=>{const r=()=>{this.removeEventListener("rest",r),n()};this.addEventListener("rest",r)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,n=new ve.Sphere){const r=n,i=r.center;Or.makeEmpty(),e.traverseVisible(a=>{a.isMesh&&Or.expandByObject(a)}),Or.getCenter(i);let o=0;return e.traverseVisible(a=>{if(!a.isMesh)return;const s=a,l=s.geometry.clone();l.applyMatrix4(s.matrixWorld);const c=l.attributes.position;for(let f=0,d=c.count;f<d;f++)Ee.fromBufferAttribute(c,f),o=Math.max(o,i.distanceToSquared(Ee))}),r.radius=Math.sqrt(o),r}};var cs={exports:{}},Fd={ellipse:"",chars:[" ","-"],max:140,truncate:!0};function Gm(t,e,n,r){if(t<=e)return t;if(e<2)return t.slice(0,e-n.length)+n;for(var i=e-n.length,o=Math.floor(i/2),a=o,s=t.length-o,l=0;l<o;l++){var u=t.charAt(l),c=t.length-l,f=t.charAt(c);r.indexOf(u)!==-1&&(a=l),r.indexOf(f)!==-1&&(s=c)}return t.slice(0,a)+n+t.slice(s)}function zm(t,e,n,r,i){if(t.length<=e)return t;for(var o=e-n.length,a=o,s=0;s<=o;s++){var l=t.charAt(s);r.indexOf(l)!==-1&&(a=s)}return!i&&a==o?"":t.slice(0,a)+n}cs.exports=function(t,e,n){if(typeof t!="string"||t.length===0||e===0)return"";n=n||{};for(var r in Fd)(n[r]===null||typeof n[r]>"u")&&(n[r]=Fd[r]);return n.max=e||n.max,n.truncate=="middle"?Gm(t,n.max,n.ellipse,n.chars):zm(t,n.max,n.ellipse,n.chars,n.truncate)};cs.exports.ellipsizeMiddle=Gm;cs.exports.ellipsize=zm;var eT=cs.exports;const tT=Qt(eT),Xn=({text:t,fontSize:e,fontUrl:n,color:r,opacity:i,stroke:o,active:a,ellipsis:s})=>{const l=s&&!a?tT(t,s):t,u=R.useMemo(()=>new Kt(r),[r]),c=R.useMemo(()=>o?new Kt(o):void 0,[o]);return ae.jsx(ic,{position:[0,0,1],children:ae.jsx(X2,{font:n,fontSize:e,color:u,fillOpacity:i,textAlign:"center",outlineWidth:o?1:0,outlineColor:c,depthOffset:0,maxWidth:100,overflowWrap:"break-word",children:l})})};Xn.defaultProps={opacity:1,fontSize:7,color:"#2A6475",ellipsis:75};try{Xn.displayName="Label",Xn.__docgenInfo={description:"",displayName:"Label",props:{text:{defaultValue:null,description:"Text to render.",name:"text",required:!0,type:{name:"string"}},fontUrl:{defaultValue:null,description:`Font URL.
Reference: https://github.com/reaviz/reagraph/issues/23`,name:"fontUrl",required:!1,type:{name:"string"}},fontSize:{defaultValue:{value:"7"},description:"Size of the font.",name:"fontSize",required:!1,type:{name:"number"}},color:{defaultValue:{value:"#2A6475"},description:"Color of the text.",name:"color",required:!1,type:{name:"ColorRepresentation"}},stroke:{defaultValue:null,description:"Stroke of the text.",name:"stroke",required:!1,type:{name:"ColorRepresentation"}},opacity:{defaultValue:{value:"1"},description:"Opacity for the label.",name:"opacity",required:!1,type:{name:"number"}},ellipsis:{defaultValue:{value:"75"},description:"The lenth of which to start the ellipsis.",name:"ellipsis",required:!1,type:{name:"number"}},active:{defaultValue:null,description:"Whether the label is active ( dragging, hover, focus ).",name:"active",required:!1,type:{name:"boolean"}}}}}catch{}const Br=({color:t,id:e,size:n,opacity:r,animated:i})=>{const{scale:o,nodeOpacity:a}=Vt({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[n,n,n],nodeOpacity:r},config:{...Ut,duration:i?void 0:0}}),s=R.useMemo(()=>new Kt(t),[t]);return ae.jsxs(Je.mesh,{userData:{id:e,type:"node"},scale:o,children:[ae.jsx("sphereGeometry",{attach:"geometry",args:[1,25,25]}),ae.jsx(Je.meshPhongMaterial,{attach:"material",side:bt,transparent:!0,fog:!0,opacity:a,color:s})]})};Br.defaultProps={opacity:1,active:!1};try{Br.displayName="Sphere",Br.__docgenInfo={description:"",displayName:"Sphere",props:{color:{defaultValue:null,description:"Color of the node. Handles selected/etc.",name:"color",required:!0,type:{name:"ColorRepresentation"}},node:{defaultValue:null,description:"The internal node model.",name:"node",required:!0,type:{name:"InternalGraphNode"}},size:{defaultValue:null,description:"Size of the node.",name:"size",required:!0,type:{name:"number"}},active:{defaultValue:{value:"false"},description:"Whether the node is active or not.",name:"active",required:!1,type:{name:"boolean"}},opacity:{defaultValue:{value:"1"},description:"Opacity of the node. Mainly used for selection.",name:"opacity",required:!1,type:{name:"number"}},animated:{defaultValue:null,description:"Animation of the node.",name:"animated",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"ID of the node.",name:"id",required:!0,type:{name:"string"}}}}}catch{}const Ia=({color:t,size:e,opacity:n,animated:r,strokeWidth:i})=>{const o=R.useMemo(()=>new Kt(t),[t]),{ringSize:a,ringOpacity:s}=Vt({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:n,ringSize:[e/2,e/2,1]},config:{...Ut,duration:r?void 0:0}}),l=i/10;return ae.jsx(ic,{position:[0,0,1],children:ae.jsxs(Je.mesh,{scale:a,children:[ae.jsx("ringGeometry",{attach:"geometry",args:[4,4+l,25]}),ae.jsx(Je.meshBasicMaterial,{attach:"material",color:o,transparent:!0,depthTest:!1,opacity:s,side:bt,fog:!0})]})})};Ia.defaultProps={color:"#D8E6EA",size:1,opacity:.5,strokeWidth:5};try{Ia.displayName="Ring",Ia.__docgenInfo={description:"",displayName:"Ring",props:{color:{defaultValue:{value:"#D8E6EA"},description:"The color of the ring.",name:"color",required:!1,type:{name:"ColorRepresentation"}},animated:{defaultValue:null,description:"Whether the ring should be animated.",name:"animated",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"1"},description:"The size of the ring.",name:"size",required:!1,type:{name:"number"}},opacity:{defaultValue:{value:"0.5"},description:"The opacity of the ring.",name:"opacity",required:!1,type:{name:"number"}},strokeWidth:{defaultValue:{value:"5"},description:"The stroke width of the ring.",name:"strokeWidth",required:!1,type:{name:"number"}}}}}catch{}const jm=R.createContext({controls:null,resetControls:()=>{},zoomIn:()=>{},zoomOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{}}),ac=()=>{const t=R.useContext(jm);if(t===void 0)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return t},Nm=["ctrl","alt","meta","shift"],qm="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");qm[1]="_";const sc={};for(const[t,e]of qm.entries())sc[e]=t;const nT={space:" ",plus:"+",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",esc:"escape"},lc=4,rT=9,uc=rT+lc,iT=2**lc,Bm=2**uc,oT=2**(2*uc),aT=2**(3*uc);function sT(t){let e;return t==="+"?["+"]:(t.slice(-1)=="+"?(e=t.slice(0,-2).split("+"),e.push("+")):e=t.split("+"),e.map(n=>nT[n]||n))}function lT(t){const e=new Set(t);let n=sc[t[t.length-1].toLowerCase()]||0;for(const r of Nm)n=2*n+(e.has(r)?1:0);return n}function Gd(t){return t>>lc}function gl(t){return t%iT}function uT(t,e){if(t===void 0||Gd(t)>0)return!1;const n=gl(t),r=gl(e);return n===r&&Gd(e)===0?!1:(n&gl(e))===n}function cT(t){let e=sc[t.key.toLowerCase()]||0;for(const n of Nm)e=2*e+(t[`${n}Key`]?1:0);return e}function fs(t){return t.map(sT)}function ds(t){if(t.length>4)throw"Can't encode sequence of more than 4 keys!";let e=0;for(const n of t)e=e*Bm+lT(n);return e}function fT(t){return t<Bm?1:t<oT?2:t<aT?3:4}function dT(t){const e=[];let n=0,r=0;for(let i=t.length-1;i>=0;i--)n=2**r*t[i]+n,r=r+13,e.push(n);return e}function hT(t={}){return{history:[],historySize:0,bindings:new Map,disabledSequenceCodes:new Set,...t}}function pT(t,e,n){const r=ds(fs(e));return t.bindings.has(r)||t.bindings.set(r,new Set),t.bindings.get(r).add(n),$m(t)}function mT(t,e,n){const r=ds(fs(e)),i=t.bindings.get(r);return i&&(i.delete(n),i.size==0&&t.bindings.delete(r)),$m(t)}function gT(t,e){const n=ds(fs(e));return t.disabledSequenceCodes.delete(n),t}function yT(t,e){const n=ds(fs(e));return t.disabledSequenceCodes.add(n),t}function vT(t,e){const n=cT(e),r=t.history.at(-1);return uT(r,n)&&t.history.pop(),t.history.push(n),t.history.length>t.historySize&&t.history.shift(),t}function bT(t){const e=[];for(const n of dT(t.history))t.disabledSequenceCodes.has(n)||e.push(...t.bindings.get(n)||[]);return e}function _T(t,e){t=vT(t,e);const n=bT(t);for(const r of n)r(e);return[t,n]}function $m(t){t.historySize=0;for(const e of t.bindings.keys())t.historySize=Math.max(t.historySize,fT(e));return t}class wT{add(...e){const n=e.slice(0,-1),r=e.at(-1);return this.state=pT(this.state,n,r),this}remove(...e){const n=e.slice(0,-1),r=e.at(-1);return this.state=mT(this.state,n,r),this}enable(...e){return this.state=gT(this.state,e),this}disable(...e){return this.state=yT(this.state,e),this}handle(e){const[n,r]=_T(this.state,e);return this.state=n,r.length>0}constructor(e){this.state=e,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.handle=this.handle.bind(this)}}function hs(){return new wT(hT())}let zd=!1;const cc=hs(),fc=hs(),dc=hs(),Wm=new Map;let or=[];const Yn=t=>Array.isArray(t)?t.map(e=>e.toLowerCase()):[t.toLowerCase()],xT=t=>e=>{const n=e.target,r=n.tagName==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(n.type);if(!(n.isContentEditable||(r||n.tagName==="TEXTAREA"||n.tagName==="SELECT")&&!n.readOnly))return t(e)},ET=t=>{(!t.action||t.action==="keypress")&&cc.add(...Yn(t.keys),t.callback),t.action==="keyup"&&fc.add(...Yn(t.keys),t.callback),t.action==="keydown"&&dc.add(...Yn(t.keys),t.callback)},TT=t=>{(!t.action||t.action==="keypress")&&cc.remove(...Yn(t.keys),t.callback),t.action==="keyup"&&fc.remove(...Yn(t.keys),t.callback),t.action==="keydown"&&dc.remove(...Yn(t.keys),t.callback)},ST=t=>{var e,n,r;const i=hs();i.add(...Yn(t.keys),t.callback),(n=(e=t.ref)==null?void 0:e.current)==null||n.addEventListener(t.action??"keypress",i.handle),Wm.set((r=t.ref)==null?void 0:r.current,i)},AT=t=>{var e,n,r,i;if((e=t.ref)!=null&&e.current&&!t.disabled){const o=Wm.get((n=t.ref)==null?void 0:n.current);o.remove(...Yn(t.keys),t.callback),(i=(r=t.ref)==null?void 0:r.current)==null||i.removeEventListener(t.action??"keypress",o.handle)}},Hm=(t=[])=>{const[e,n]=R.useState([]);return R.useLayoutEffect(()=>{!zd&&window!==void 0&&(window.addEventListener("keypress",cc.handle),window.addEventListener("keyup",fc.handle),window.addEventListener("keydown",dc.handle),zd=!0)},[]),R.useLayoutEffect(()=>(t.map(r=>{var i;r.disabled||(r.callback=xT(r.callback),(i=r.ref)!=null&&i.current?(ST(r),or=[...or,r]):r.ref||(ET(r),or=[...or,r]))}),()=>{t.map(r=>{AT(r),TT(r),or=or.filter(i=>r!==i)})}),[t]),R.useEffect(()=>{n(or)},[]),e};let kT=!1;try{navigator&&(kT=navigator.platform.toUpperCase().indexOf("MAC")>=0)}catch(t){console.warn(t)}/*!
 * hold-event
 * https://github.com/yomotsu/hold-event
 * (c) 2020 @yomotsu
 * Released under the MIT License.
 */var Wi;(function(t){t.HOLD_START="holdStart",t.HOLD_END="holdEnd",t.HOLDING="holding"})(Wi||(Wi={}));class OT{constructor(){this._listeners={}}addEventListener(e,n){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}removeEventListener(e,n){const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e)}}}class DT extends OT{constructor(e){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=n=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:Wi.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:n}),this._holding=!0;const r=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(r,this.holdIntervalDelay):window.requestAnimationFrame(r);const i=performance.now();this._deltaTime=i-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:Wi.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:n})};this._intervalId=this.holdIntervalDelay?window.setTimeout(r,this.holdIntervalDelay):window.requestAnimationFrame(r)},this._holdEnd=n=>{if(!this._enabled||!this._holding)return;const r=performance.now();this._deltaTime=r-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:Wi.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:n}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=e}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled||this._holdEnd())}}class ps extends DT{constructor(e,n){super(n),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const r=o=>{CT(o)||o.keyCode===e&&this._holdStart(o)},i=o=>{o.keyCode===e&&this._holdEnd(o)};document.addEventListener("keydown",r),document.addEventListener("keyup",i),window.addEventListener("blur",this._holdEnd)}}function CT(t){const e=t.target;return e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.isContentEditable}var Yd,Xd;Ct.install({THREE:{MOUSE:Lg,Vector2:Oe,Vector3:_e,Vector4:vl,Quaternion:ru,Matrix4:nh,Spherical:Ug,Box3:iu,Sphere:th,Raycaster:Vg,MathUtils:{DEG2RAD:(Yd=bl)==null?void 0:Yd.DEG2RAD,clamp:(Xd=bl)==null?void 0:Xd.clamp}}});Kd({ThreeCameraControls:Ct});const ms={ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40},jd=new ps(ms.ARROW_LEFT,100),Nd=new ps(ms.ARROW_RIGHT,100),qd=new ps(ms.ARROW_UP,100),Bd=new ps(ms.ARROW_DOWN,100),La=R.forwardRef(({mode:t,children:e,animated:n,disabled:r},i)=>{const o=R.useRef(null),a=lt(b=>b.camera),s=lt(b=>b.gl),l=t==="orbit",u=ce(b=>b.setPanning);Ba((b,_)=>{var w,E;(w=o.current)!=null&&w.enabled&&((E=o.current)==null||E.update(_)),l&&(o.current.azimuthAngle+=20*_*bl.DEG2RAD)},-1),R.useEffect(()=>()=>{var b;return(b=o.current)==null?void 0:b.dispose()},[]);const c=R.useCallback(()=>{var b;(b=o.current)==null||b.zoom(a.zoom/2,n)},[n,a.zoom]),f=R.useCallback(()=>{var b;(b=o.current)==null||b.zoom(-a.zoom/2,n)},[n,a.zoom]),d=R.useCallback(b=>{var _;l||(_=o.current)==null||_.truck(-.03*b.deltaTime,0,n)},[n,l]),h=R.useCallback(b=>{var _;l||(_=o.current)==null||_.truck(.03*b.deltaTime,0,n)},[n,l]),p=R.useCallback(b=>{var _;l||(_=o.current)==null||_.truck(0,.03*b.deltaTime,n)},[n,l]),g=R.useCallback(b=>{var _;l||(_=o.current)==null||_.truck(0,-.03*b.deltaTime,n)},[n,l]),y=R.useCallback(b=>{b.code==="Space"&&(t==="rotate"?o.current.mouseButtons.left=Ct.ACTION.TRUCK:o.current.mouseButtons.left=Ct.ACTION.ROTATE)},[t]),m=R.useCallback(b=>{b.code==="Space"&&(t==="rotate"?o.current.mouseButtons.left=Ct.ACTION.ROTATE:o.current.mouseButtons.left=Ct.ACTION.TRUCK)},[t]);R.useEffect(()=>(r||(jd.addEventListener("holding",h),Nd.addEventListener("holding",d),qd.addEventListener("holding",p),Bd.addEventListener("holding",g),typeof window<"u"&&(window.addEventListener("keydown",y),window.addEventListener("keyup",m))),()=>{jd.removeEventListener("holding",h),Nd.removeEventListener("holding",d),qd.removeEventListener("holding",p),Bd.removeEventListener("holding",g),typeof window<"u"&&(window.removeEventListener("keydown",y),window.removeEventListener("keyup",m))}),[r,y,m,g,h,d,p]),R.useEffect(()=>{r?(o.current.mouseButtons.left=Ct.ACTION.NONE,o.current.mouseButtons.middle=Ct.ACTION.NONE,o.current.mouseButtons.wheel=Ct.ACTION.NONE):(o.current.mouseButtons.left=Ct.ACTION.TRUCK,o.current.mouseButtons.middle=Ct.ACTION.TRUCK,o.current.mouseButtons.wheel=Ct.ACTION.DOLLY)},[r]),R.useEffect(()=>{const b=()=>u(!0),_=()=>u(!1),w=o.current;return w&&(w.addEventListener("control",b),w.addEventListener("controlend",_)),()=>{w&&(w.removeEventListener("control",b),w.removeEventListener("controlend",_))}},[o,u]),R.useEffect(()=>{t==="rotate"?o.current.mouseButtons.left=Ct.ACTION.ROTATE:o.current.mouseButtons.left=Ct.ACTION.TRUCK},[t]),Hm([{name:"Zoom In",disabled:r,category:"Graph",keys:"command+shift+i",callback:b=>{b.preventDefault(),c()}},{name:"Zoom Out",category:"Graph",disabled:r,keys:"command+shift+o",callback:b=>{b.preventDefault(),f()}}]);const v=R.useMemo(()=>({controls:o.current,zoomIn:()=>c(),zoomOut:()=>f(),panLeft:(b=100)=>h({deltaTime:b}),panRight:(b=100)=>d({deltaTime:b}),panDown:(b=100)=>g({deltaTime:b}),panUp:(b=100)=>p({deltaTime:b}),resetControls:b=>{var _;return(_=o.current)==null?void 0:_.reset(b)}}),[c,f,h,d,g,p,o.current]);return R.useImperativeHandle(i,()=>v),ae.jsxs(jm.Provider,{value:v,children:[ae.jsx("threeCameraControls",{ref:o,args:[a,s.domElement],smoothTime:.1,minDistance:1e3,dollyToCursor:!0,maxDistance:5e4}),e]})});La.defaultProps={mode:"rotate"};try{La.displayName="CameraControls",La.__docgenInfo={description:"",displayName:"CameraControls",props:{mode:{defaultValue:{value:"rotate"},description:"Mode of the camera.",name:"mode",required:!1,type:{name:"enum",value:[{value:'"pan"'},{value:'"rotate"'},{value:'"orbit"'}]}},children:{defaultValue:null,description:"Children symbols.",name:"children",required:!1,type:{name:"ReactNode"}},animated:{defaultValue:null,description:"Animate transitions to centering.",name:"animated",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Whether the controls are enabled.",name:"disabled",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<CameraControlsContextProps>"}}}}}catch{}function Ym(t,e){const n=e.position.z;t<n?t-=n:t+=n;const r=e.fov/e.zoom*Math.PI/180;return 2*Math.tan(r/2)*Math.abs(t)}function MT(t,e){return Ym(t,e)*e.aspect}function PT(t,e){var o,a,s,l;const n=MT(1,t),r=Ym(1,t),i={x0:((o=t==null?void 0:t.position)==null?void 0:o.x)-n/2,x1:((a=t==null?void 0:t.position)==null?void 0:a.x)+n/2,y0:((s=t==null?void 0:t.position)==null?void 0:s.y)-r/2,y1:((l=t==null?void 0:t.position)==null?void 0:l.y)+r/2};return(e==null?void 0:e.x)>i.x0&&(e==null?void 0:e.x)<i.x1&&(e==null?void 0:e.y)>i.y0&&(e==null?void 0:e.y)<i.y1}function $d(t,e){return e.reduce((n,r)=>Math.abs(r-t%Math.PI)<Math.abs(n-t%Math.PI)?r:n)}function RT(t,e){const n=$d(t,[0,Math.PI]),r=$d(e,[Math.PI/2,3*Math.PI/2]);return{horizontalRotation:n-t%Math.PI,verticalRotation:r-e%Math.PI}}const ea=50,IT=({animated:t,disabled:e,layoutType:n})=>{const r=ce(d=>d.nodes),[i,o]=R.useState(!1),a=lt(d=>d.invalidate),{controls:s}=ac(),l=lt(d=>d.camera),u=R.useRef(!1),c=R.useCallback(async(d,h=!0)=>{if(d!=null&&d.some(p=>!PT(l,p.position))||!u.current){const{minX:p,maxX:g,minY:y,maxY:m,minZ:v,maxZ:b,x:_,y:w,z:E}=wu(d);if(!n.includes("3d")){const{horizontalRotation:S,verticalRotation:x}=RT(s==null?void 0:s.azimuthAngle,s==null?void 0:s.polarAngle);s==null||s.rotate(S,x,!0)}await(s==null?void 0:s.fitToBox(new iu(new _e(p,y,v),new _e(g,m,b)),h,{cover:!1,paddingLeft:ea,paddingRight:ea,paddingBottom:ea,paddingTop:ea})),await s.setTarget(_,w,E,h),i||o(!0),a()}},[a,s,r]),f=R.useCallback(d=>{let h=null;d!=null&&d.length&&(h=d.reduce((p,g)=>{const y=r.find(m=>m.id===g);if(y)p.push(y);else throw new Error(`Attempted to center ${g} but it was not found in the nodes`);return p},[])),c(h||r)},[c,r]);return R.useLayoutEffect(()=>{async function d(){s&&(r!=null&&r.length)&&(u.current?await c(r,t):(await c(r,!1),u.current=!0))}d()},[s,c,r,t]),Hm([{name:"Center",disabled:e,category:"Graph",keys:["command+shift+c"],callback:()=>c(r)}]),{centerNodes:c,centerNodesById:f,isCentered:i}},ao=({image:t,id:e,size:n,opacity:r,animated:i})=>{const o=R.useMemo(()=>new Fg().load(t),[t]),{scale:a,spriteOpacity:s}=Vt({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[n,n,n],spriteOpacity:r},config:{...Ut,duration:i?void 0:0}});return ae.jsx(Je.sprite,{userData:{id:e,type:"node"},scale:a,children:ae.jsx(Je.spriteMaterial,{attach:"material",opacity:s,fog:!0,depthTest:!1,transparent:!0,side:bt,children:ae.jsx("primitive",{attach:"map",object:o,minFilter:yl})})})};ao.defaultProps={opacity:1};try{ao.displayName="Icon",ao.__docgenInfo={description:"",displayName:"Icon",props:{image:{defaultValue:null,description:"The image to display on the icon.",name:"image",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"Color of the node. Handles selected/etc.",name:"color",required:!0,type:{name:"ColorRepresentation"}},node:{defaultValue:null,description:"The internal node model.",name:"node",required:!0,type:{name:"InternalGraphNode"}},size:{defaultValue:null,description:"Size of the node.",name:"size",required:!0,type:{name:"number"}},active:{defaultValue:null,description:"Whether the node is active or not.",name:"active",required:!0,type:{name:"boolean"}},opacity:{defaultValue:{value:"1"},description:"Opacity of the node. Mainly used for selection.",name:"opacity",required:!1,type:{name:"number"}},animated:{defaultValue:null,description:"Animation of the node.",name:"animated",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"ID of the node.",name:"id",required:!0,type:{name:"string"}}}}}catch{}const Xl=({color:t,id:e,size:n,opacity:r,node:i,active:o,animated:a,image:s})=>ae.jsxs(ae.Fragment,{children:[ae.jsx(Br,{id:e,size:n,opacity:r,animated:a,color:t,node:i,active:o}),ae.jsx(ao,{id:e,image:s,size:n+8,opacity:r,animated:a,color:t,node:i,active:o})]});Xl.defaultProps={opacity:1,active:!1};try{Xl.displayName="SphereWithIcon",Xl.__docgenInfo={description:"",displayName:"SphereWithIcon",props:{image:{defaultValue:null,description:"The image to display on the icon.",name:"image",required:!0,type:{name:"string"}},color:{defaultValue:null,description:"Color of the node. Handles selected/etc.",name:"color",required:!0,type:{name:"ColorRepresentation"}},node:{defaultValue:null,description:"The internal node model.",name:"node",required:!0,type:{name:"InternalGraphNode"}},size:{defaultValue:null,description:"Size of the node.",name:"size",required:!0,type:{name:"number"}},active:{defaultValue:{value:"false"},description:"Whether the node is active or not.",name:"active",required:!1,type:{name:"boolean"}},opacity:{defaultValue:{value:"1"},description:"Opacity of the node. Mainly used for selection.",name:"opacity",required:!1,type:{name:"number"}},animated:{defaultValue:null,description:"Animation of the node.",name:"animated",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"ID of the node.",name:"id",required:!0,type:{name:"string"}}}}}catch{}const Ua=({id:t,image:e,color:n,size:r,opacity:i,animated:o,...a})=>{const s=r/25,{scale:l}=Vt({from:{scale:[1e-5,1e-5,1e-5]},to:{scale:[s,s,s]},config:{...Ut,duration:o?void 0:0}}),u=R.useMemo(()=>new Kt(n),[n]);return ae.jsx(Je.group,{userData:{id:t,type:"node"},scale:l,children:ae.jsx(ic,{position:[0,0,1],children:ae.jsx(K2,{...a,src:e,fillMaterial:{fog:!0,depthTest:!1,transparent:!0,color:u,opacity:i,side:bt,...a.fillMaterial||{}},fillMeshProps:{position:[-25,-25,1],...a.fillMeshProps||{}}})})})};Ua.defaultProps={opacity:1};try{Ua.displayName="Svg",Ua.__docgenInfo={description:"",displayName:"Svg",props:{color:{defaultValue:null,description:"Color of the node. Handles selected/etc.",name:"color",required:!0,type:{name:"ColorRepresentation"}},node:{defaultValue:null,description:"The internal node model.",name:"node",required:!0,type:{name:"InternalGraphNode"}},size:{defaultValue:null,description:"Size of the node.",name:"size",required:!0,type:{name:"number"}},active:{defaultValue:null,description:"Whether the node is active or not.",name:"active",required:!0,type:{name:"boolean"}},opacity:{defaultValue:{value:"1"},description:"Opacity of the node. Mainly used for selection.",name:"opacity",required:!1,type:{name:"number"}},animated:{defaultValue:null,description:"Animation of the node.",name:"animated",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"ID of the node.",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"A Read-only _string_ to check `this` object type.\n@remarks This can be used to find a specific type of Object3D in a scene.\n@remarks Sub-classes will update this value.\n@defaultValue `Object3D`",name:"type",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"Vector3"}},rotation:{defaultValue:null,description:"",name:"rotation",required:!1,type:{name:"Euler"}},onContextMenu:{defaultValue:null,description:"",name:"onContextMenu",required:!1,type:{name:"(event: ThreeEvent<MouseEvent>) => void"}},onPointerOver:{defaultValue:null,description:"",name:"onPointerOver",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerOut:{defaultValue:null,description:"",name:"onPointerOut",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(event: ThreeEvent<MouseEvent>) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(event: ThreeEvent<MouseEvent>) => void"}},up:{defaultValue:null,description:"",name:"up",required:!1,type:{name:"Vector3"}},scale:{defaultValue:null,description:"",name:"scale",required:!1,type:{name:"Vector3"}},matrix:{defaultValue:null,description:"",name:"matrix",required:!1,type:{name:"Matrix4"}},quaternion:{defaultValue:null,description:"",name:"quaternion",required:!1,type:{name:"Quaternion"}},layers:{defaultValue:null,description:"",name:"layers",required:!1,type:{name:"Layers"}},dispose:{defaultValue:null,description:"",name:"dispose",required:!1,type:{name:"() => void"}},isObject3D:{defaultValue:null,description:"Flag to check if a given object is of type {@link Object3D}.\n@remarks This is a _constant_ value\n@defaultValue `true`",name:"isObject3D",required:!1,type:{name:"true"}},uuid:{defaultValue:null,description:`{@link http://en.wikipedia.org/wiki/Universally_unique_identifier UUID} of this object instance.
@remarks This gets automatically assigned and shouldn't be edited.`,name:"uuid",required:!1,type:{name:"string"}},name:{defaultValue:null,description:`Optional name of the object
@remarks _(doesn't need to be unique)_.
@defaultValue \`""\``,name:"name",required:!1,type:{name:"string"}},parent:{defaultValue:null,description:"Object's parent in the {@link https://en.wikipedia.org/wiki/Scene_graph scene graph}.\n@remarks An object can have at most one parent.\n@defaultValue `null`",name:"parent",required:!1,type:{name:"Object3D<Event>"}},modelViewMatrix:{defaultValue:null,description:"@defaultValue `new THREE.Matrix4()`",name:"modelViewMatrix",required:!1,type:{name:"Matrix4"}},normalMatrix:{defaultValue:null,description:"@defaultValue `new THREE.Matrix3()`",name:"normalMatrix",required:!1,type:{name:"Matrix3"}},matrixWorld:{defaultValue:null,description:"The global transform of the object.\n@remarks If the {@link Object3D } has no parent, then it's identical to the local transform {@link THREE.Object3D.matrix .matrix}.\n@defaultValue `new THREE.Matrix4()`",name:"matrixWorld",required:!1,type:{name:"Matrix4"}},matrixAutoUpdate:{defaultValue:null,description:"When this is set, it calculates the matrix of position, (rotation or quaternion) and\nscale every frame and also recalculates the matrixWorld property.\n@defaultValue {@link DEFAULT_MATRIX_AUTO_UPDATE } - that is `(true)`.",name:"matrixAutoUpdate",required:!1,type:{name:"boolean"}},matrixWorldAutoUpdate:{defaultValue:null,description:"If set, then the renderer checks every frame if the object and its children need matrix updates.\nWhen it isn't, then you have to maintain all matrices in the object and its children yourself.\n@defaultValue {@link DEFAULT_MATRIX_WORLD_AUTO_UPDATE } - that is `(true)`.",name:"matrixWorldAutoUpdate",required:!1,type:{name:"boolean"}},matrixWorldNeedsUpdate:{defaultValue:null,description:"When this is set, it calculates the matrixWorld in that frame and resets this property to false.\n@defaultValue `false`",name:"matrixWorldNeedsUpdate",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"Object gets rendered if `true`.\n@defaultValue `true`",name:"visible",required:!1,type:{name:"boolean"}},castShadow:{defaultValue:null,description:"Whether the object gets rendered into shadow map.\n@defaultValue `false`",name:"castShadow",required:!1,type:{name:"boolean"}},receiveShadow:{defaultValue:null,description:"Whether the material receives shadows.\n@defaultValue `false`",name:"receiveShadow",required:!1,type:{name:"boolean"}},frustumCulled:{defaultValue:null,description:"When this is set, it checks every frame if the object is in the frustum of the camera before rendering the object.\nIf set to `false` the object gets rendered every frame even if it is not in the frustum of the camera.\n@defaultValue `true`",name:"frustumCulled",required:!1,type:{name:"boolean"}},renderOrder:{defaultValue:null,description:`This value allows the default rendering order of {@link https://en.wikipedia.org/wiki/Scene_graph scene graph}
objects to be overridden although opaque and transparent objects remain sorted independently.
@remarks When this property is set for an instance of {@link Group Group}, all descendants objects will be sorted and rendered together.
@remarks Sorting is from lowest to highest renderOrder.
@defaultValue \`0\``,name:"renderOrder",required:!1,type:{name:"number"}},animations:{defaultValue:null,description:"Array with object's animation clips.\n@defaultValue `[]`",name:"animations",required:!1,type:{name:"AnimationClip[]"}},userData:{defaultValue:{value:"`{}`"},description:`An object that can be used to store custom data about the {@link Object3D}.
@remarks It should not hold references to _functions_ as these **will not** be cloned.`,name:"userData",required:!1,type:{name:"{ [key: string]: any; }"}},customDepthMaterial:{defaultValue:null,description:`Custom depth material to be used when rendering to the depth map.
@remarks Can only be used in context of meshes.
@remarks When shadow-casting with a {@link THREE.DirectionalLight DirectionalLight} or {@link THREE.SpotLight SpotLight},
if you are modifying vertex positions in the vertex shader you must specify a customDepthMaterial for proper shadows.
@defaultValue \`undefined\``,name:"customDepthMaterial",required:!1,type:{name:"Material"}},customDistanceMaterial:{defaultValue:null,description:"Same as {@link customDepthMaterial}, but used with {@link THREE.Object3DPointLight PointLight}.\n@defaultValue `undefined`",name:"customDistanceMaterial",required:!1,type:{name:"Material"}},onBeforeRender:{defaultValue:null,description:`An optional callback that is executed immediately before a 3D object is rendered.
@remarks This function is called with the following parameters: renderer, scene, camera, geometry, material, group.
@remarks Please notice that this callback is only executed for \`renderable\` 3D objects.
Meaning 3D objects which define their visual appearance with geometries and materials like
instances of {@link THREE.Object3DMesh Mesh}, {@link THREE.Object3DLine Line}, {@link THREE.Object3DPoints Points} or {@link THREE.Object3DSprite Sprite}.
Instances of {@link THREE.Object3DObject3D Object3D}, {@link THREE.Object3DGroup Group} or {@link THREE.Object3DBone Bone}are not renderable and thus this callback is not executed for such objects.
@defaultValue \`() => {}\``,name:"onBeforeRender",required:!1,type:{name:"(renderer: WebGLRenderer, scene: Scene, camera: Camera, geometry: BufferGeometry<NormalBufferAttributes>, material: Material, group: Group) => void"}},onAfterRender:{defaultValue:null,description:`An optional callback that is executed immediately after a 3D object is rendered.
@remarks This function is called with the following parameters: renderer, scene, camera, geometry, material, group.
@remarks Please notice that this callback is only executed for \`renderable\` 3D objects.
Meaning 3D objects which define their visual appearance with geometries and materials like
instances of {@link THREE.Object3DMesh Mesh}, {@link THREE.Object3DLine Line}, {@link THREE.Object3DPoints Points} or {@link THREE.Object3DSprite Sprite}.
Instances of {@link THREE.Object3DObject3D Object3D}, {@link THREE.Object3DGroup Group} or {@link THREE.Object3DBone Bone}are not renderable and thus this callback is not executed for such objects.
@defaultValue \`() => {}\``,name:"onAfterRender",required:!1,type:{name:"(renderer: WebGLRenderer, scene: Scene, camera: Camera, geometry: BufferGeometry<NormalBufferAttributes>, material: Material, group: Group) => void"}},applyMatrix4:{defaultValue:null,description:`Applies the matrix transform to the object and updates the object's position, rotation and scale.
@param matrix`,name:"applyMatrix4",required:!1,type:{name:"(matrix: Matrix4) => void"}},applyQuaternion:{defaultValue:null,description:`Applies the rotation represented by the quaternion to the object.
@param quaternion`,name:"applyQuaternion",required:!1,type:{name:"(quaternion: Quaternion) => Object3D<Event>"}},setRotationFromAxisAngle:{defaultValue:null,description:"Calls {@link THREE.Quaternion.setFromAxisAnglesetFromAxisAngle}({@link axis}, {@link angle}) on the {@link quaternion.quaternion}.\n@param axis A normalized vector in object space.\n@param angle Angle in radians. Expects a `Float`",name:"setRotationFromAxisAngle",required:!1,type:{name:"(axis: Vector3, angle: number) => void"}},setRotationFromEuler:{defaultValue:null,description:`Calls {@link THREE.Quaternion.setFromEulersetFromEuler}({@link euler}) on the {@link quaternion.quaternion}.
@param euler Euler angle specifying rotation amount.`,name:"setRotationFromEuler",required:!1,type:{name:"(euler: Euler) => void"}},setRotationFromMatrix:{defaultValue:null,description:`Calls {@link THREE.Quaternion.setFromRotationMatrixsetFromRotationMatrix}({@link m}) on the {@link quaternion.quaternion}.
@remarks Note that this assumes that the upper 3x3 of m is a pure rotation matrix (i.e, unscaled).
@param m Rotate the quaternion by the rotation component of the matrix.`,name:"setRotationFromMatrix",required:!1,type:{name:"(m: Matrix4) => void"}},setRotationFromQuaternion:{defaultValue:null,description:`Copy the given {@link THREE.QuaternionQuaternion} into {@link quaternion.quaternion}.
@param q Normalized Quaternion.`,name:"setRotationFromQuaternion",required:!1,type:{name:"(q: Quaternion) => void"}},rotateOnAxis:{defaultValue:null,description:`Rotate an object along an axis in object space.
@remarks The axis is assumed to be normalized.
@param axis A normalized vector in object space.
@param angle The angle in radians. Expects a \`Float\``,name:"rotateOnAxis",required:!1,type:{name:"(axis: Vector3, angle: number) => Object3D<Event>"}},rotateOnWorldAxis:{defaultValue:null,description:`Rotate an object along an axis in world space.
@remarks The axis is assumed to be normalized
@remarks Method Assumes no rotated parent.
@param axis A normalized vector in world space.
@param angle The angle in radians. Expects a \`Float\``,name:"rotateOnWorldAxis",required:!1,type:{name:"(axis: Vector3, angle: number) => Object3D<Event>"}},rotateX:{defaultValue:null,description:"Rotates the object around _x_ axis in local space.\n@param rad The angle to rotate in radians. Expects a `Float`",name:"rotateX",required:!1,type:{name:"(angle: number) => Object3D<Event>"}},rotateY:{defaultValue:null,description:"Rotates the object around _y_ axis in local space.\n@param rad The angle to rotate in radians. Expects a `Float`",name:"rotateY",required:!1,type:{name:"(angle: number) => Object3D<Event>"}},rotateZ:{defaultValue:null,description:"Rotates the object around _z_ axis in local space.\n@param rad The angle to rotate in radians. Expects a `Float`",name:"rotateZ",required:!1,type:{name:"(angle: number) => Object3D<Event>"}},translateOnAxis:{defaultValue:null,description:`Translate an object by distance along an axis in object space
@remarks The axis is assumed to be normalized.
@param axis A normalized vector in object space.
@param distance The distance to translate. Expects a \`Float\``,name:"translateOnAxis",required:!1,type:{name:"(axis: Vector3, distance: number) => Object3D<Event>"}},translateX:{defaultValue:null,description:"Translates object along x axis in object space by {@link distance} units.\n@param distance Expects a `Float`",name:"translateX",required:!1,type:{name:"(distance: number) => Object3D<Event>"}},translateY:{defaultValue:null,description:"Translates object along _y_ axis in object space by {@link distance} units.\n@param distance Expects a `Float`",name:"translateY",required:!1,type:{name:"(distance: number) => Object3D<Event>"}},translateZ:{defaultValue:null,description:"Translates object along _z_ axis in object space by {@link distance} units.\n@param distance Expects a `Float`",name:"translateZ",required:!1,type:{name:"(distance: number) => Object3D<Event>"}},localToWorld:{defaultValue:null,description:`Converts the vector from this object's local space to world space.
@param vector A vector representing a position in this object's local space.`,name:"localToWorld",required:!1,type:{name:"(vector: Vector3) => Vector3"}},worldToLocal:{defaultValue:null,description:`Converts the vector from world space to this object's local space.
@param vector A vector representing a position in world space.`,name:"worldToLocal",required:!1,type:{name:"(vector: Vector3) => Vector3"}},lookAt:{defaultValue:null,description:"Rotates the object to face a point in world space.\n@remarks This method does not support objects having non-uniformly-scaled parent(s).\n@param vector A vector representing a position in world space to look at.\n@remarks This method does not support objects having non-uniformly-scaled parent(s).\n@param x Expects a `Float`\n@param y Expects a `Float`\n@param z Expects a `Float`",name:"lookAt",required:!1,type:{name:"{ (vector: Vector3): void; (x: number, y: number, z: number): void; }"}},add:{defaultValue:null,description:`Adds another {@link Object3D} as child of this {@link Object3D}.
@remarks An arbitrary number of objects may be added
@remarks Any current parent on an {@link object } passed in here will be removed, since an {@link Object3D } can have at most one parent.
@see {@link attach }
@see {@link THREE.Group Group} for info on manually grouping objects.
@param object`,name:"add",required:!1,type:{name:"(...object: Object3D<Event>[]) => Object3D<Event>"}},remove:{defaultValue:null,description:`Removes a {@link Object3D} as child of this {@link Object3D}.
@remarks An arbitrary number of objects may be removed.
@see {@link THREE.Group Group} for info on manually grouping objects.
@param object`,name:"remove",required:!1,type:{name:"(...object: Object3D<Event>[]) => Object3D<Event>"}},removeFromParent:{defaultValue:null,description:"Removes this object from its current parent.",name:"removeFromParent",required:!1,type:{name:"() => Object3D<Event>"}},clear:{defaultValue:null,description:"Removes all child objects.",name:"clear",required:!1,type:{name:"() => Object3D<Event>"}},getObjectById:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself, and returns the first with a matching id.
@remarks Note that ids are assigned in chronological order: 1, 2, 3, ..., incrementing by one for each new object.
@see {@link id }
@param id Unique number of the object instance. Expects a \`Integer\``,name:"getObjectById",required:!1,type:{name:"(id: number) => Object3D<Event>"}},getObjectByName:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself, and returns the first with a matching name.
@remarks Note that for most objects the name is an empty string by default
@remarks You will have to set it manually to make use of this method.
@param name String to match to the children's Object3D.name property.`,name:"getObjectByName",required:!1,type:{name:"(name: string) => Object3D<Event>"}},getObjectByProperty:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself,
and returns the first with a property that matches the value given.
@param name - the property name to search for.
@param value - value of the given property.`,name:"getObjectByProperty",required:!1,type:{name:"(name: string, value: any) => Object3D<Event>"}},getObjectsByProperty:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself,
and returns the first with a property that matches the value given.
@param name The property name to search for.
@param value Value of the given property.`,name:"getObjectsByProperty",required:!1,type:{name:"(name: string, value: any) => Object3D<Event>[]"}},getWorldPosition:{defaultValue:null,description:`Returns a vector representing the position of the object in world space.
@param target The result will be copied into this Vector3.`,name:"getWorldPosition",required:!1,type:{name:"(target: Vector3) => Vector3"}},getWorldQuaternion:{defaultValue:null,description:`Returns a quaternion representing the rotation of the object in world space.
@param target The result will be copied into this Quaternion.`,name:"getWorldQuaternion",required:!1,type:{name:"(target: Quaternion) => Quaternion"}},getWorldScale:{defaultValue:null,description:`Returns a vector of the scaling factors applied to the object for each axis in world space.
@param target The result will be copied into this Vector3.`,name:"getWorldScale",required:!1,type:{name:"(target: Vector3) => Vector3"}},getWorldDirection:{defaultValue:null,description:`Returns a vector representing the direction of object's positive z-axis in world space.
@param target The result will be copied into this Vector3.`,name:"getWorldDirection",required:!1,type:{name:"(target: Vector3) => Vector3"}},raycast:{defaultValue:null,description:`Abstract (empty) method to get intersections between a casted ray and this object
@remarks Subclasses such as {@link THREE.Mesh Mesh}, {@link THREE.Line Line}, and {@link THREE.Points Points} implement this method in order to use raycasting.
@see {@link THREE.Raycaster Raycaster}
@param raycaster
@param intersects
@defaultValue \`() => {}\``,name:"raycast",required:!1,type:{name:"(raycaster: Raycaster, intersects: Intersection<Object3D<Event>>[]) => void"}},traverse:{defaultValue:null,description:`Executes the callback on this object and all descendants.
@remarks Note: Modifying the scene graph inside the callback is discouraged.
@param callback A function with as first argument an {@link Object3D } object.`,name:"traverse",required:!1,type:{name:"(callback: (object: Object3D<Event>) => any) => void"}},traverseVisible:{defaultValue:null,description:`Like traverse, but the callback will only be executed for visible objects
@remarks Descendants of invisible objects are not traversed.
@remarks Note: Modifying the scene graph inside the callback is discouraged.
@param callback A function with as first argument an {@link Object3D } object.`,name:"traverseVisible",required:!1,type:{name:"(callback: (object: Object3D<Event>) => any) => void"}},traverseAncestors:{defaultValue:null,description:`Executes the callback on all ancestors.
@remarks Note: Modifying the scene graph inside the callback is discouraged.
@param callback A function with as first argument an {@link Object3D } object.`,name:"traverseAncestors",required:!1,type:{name:"(callback: (object: Object3D<Event>) => any) => void"}},updateMatrix:{defaultValue:null,description:"Updates local transform.",name:"updateMatrix",required:!1,type:{name:"() => void"}},updateMatrixWorld:{defaultValue:null,description:"Updates the global transform of the object.\nAnd will update the object descendants if {@link matrixWorldNeedsUpdate.matrixWorldNeedsUpdate} is set to true or if the {@link force} parameter is set to `true`.\n@param force A boolean that can be used to bypass {@link matrixWorldAutoUpdate .matrixWorldAutoUpdate}, to recalculate the world matrix of the object and descendants on the current frame.\nUseful if you cannot wait for the renderer to update it on the next frame, assuming {@link matrixWorldAutoUpdate .matrixWorldAutoUpdate} set to `true`.",name:"updateMatrixWorld",required:!1,type:{name:"(force?: boolean) => void"}},updateWorldMatrix:{defaultValue:null,description:`Updates the global transform of the object.
@param updateParents Recursively updates global transform of ancestors.
@param updateChildren Recursively updates global transform of descendants.`,name:"updateWorldMatrix",required:!1,type:{name:"(updateParents: boolean, updateChildren: boolean) => void"}},toJSON:{defaultValue:null,description:`Convert the object to three.js {@link https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4 JSON Object/Scene format}.
@param meta Object containing metadata such as materials, textures or images for the object.`,name:"toJSON",required:!1,type:{name:"(meta?: { geometries: any; materials: any; textures: any; images: any; }) => any"}},clone:{defaultValue:null,description:"Returns a clone of `this` object and optionally all descendants.\n@param recursive If true, descendants of the object are also cloned. Default `true`",name:"clone",required:!1,type:{name:"(recursive?: boolean) => Object3D<Event>"}},copy:{defaultValue:null,description:`Copy the given object into this object
@remarks Note: event listeners and user-defined callbacks ({@link onAfterRender .onAfterRender} and {@link onBeforeRender .onBeforeRender}) are not copied.
@param source
@param recursive If true, descendants of the object are also copied. Default \`true\``,name:"copy",required:!1,type:{name:"(source: Object3D<Event>, recursive?: boolean) => Object3D<Event>"}},addEventListener:{defaultValue:null,description:`Adds a listener to an event type.
@param type The type of event to listen to.
@param listener The function that gets called when the event is fired.`,name:"addEventListener",required:!1,type:{name:"<T extends string>(type: T, listener: EventListener<Event, T, Object3D<Event>>) => void"}},hasEventListener:{defaultValue:null,description:`Checks if listener is added to an event type.
@param type The type of event to listen to.
@param listener The function that gets called when the event is fired.`,name:"hasEventListener",required:!1,type:{name:"<T extends string>(type: T, listener: EventListener<Event, T, Object3D<Event>>) => boolean"}},removeEventListener:{defaultValue:null,description:`Removes a listener from an event type.
@param type The type of the listener that gets removed.
@param listener The listener function that gets removed.`,name:"removeEventListener",required:!1,type:{name:"<T extends string>(type: T, listener: EventListener<Event, T, Object3D<Event>>) => void"}},dispatchEvent:{defaultValue:null,description:`Fire an event type.
@param event The event that gets fired.`,name:"dispatchEvent",required:!1,type:{name:"(event: Event) => void"}},onPointerUp:{defaultValue:null,description:"",name:"onPointerUp",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerDown:{defaultValue:null,description:"",name:"onPointerDown",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerEnter:{defaultValue:null,description:"",name:"onPointerEnter",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerLeave:{defaultValue:null,description:"",name:"onPointerLeave",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerMissed:{defaultValue:null,description:"",name:"onPointerMissed",required:!1,type:{name:"(event: MouseEvent) => void"}},onPointerCancel:{defaultValue:null,description:"",name:"onPointerCancel",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onWheel:{defaultValue:null,description:"",name:"onWheel",required:!1,type:{name:"(event: ThreeEvent<WheelEvent>) => void"}},image:{defaultValue:null,description:"The image to display on the icon.",name:"image",required:!0,type:{name:"string"}}}}}catch{}const Kl=({color:t,id:e,size:n,opacity:r,node:i,svgFill:o,active:a,animated:s,image:l,...u})=>ae.jsxs(ae.Fragment,{children:[ae.jsx(Br,{id:e,size:n,opacity:r,animated:s,color:t,node:i,active:a}),ae.jsx(Ua,{...u,id:e,image:l,size:n,opacity:r,animated:s,color:o,node:i,active:a})]});Kl.defaultProps={opacity:1,active:!1};try{Kl.displayName="SphereWithSvg",Kl.__docgenInfo={description:"",displayName:"SphereWithSvg",props:{image:{defaultValue:null,description:"The image to display on the icon.",name:"image",required:!0,type:{name:"string"}},svgFill:{defaultValue:null,description:"The color of the svg fill.",name:"svgFill",required:!1,type:{name:"ColorRepresentation"}},color:{defaultValue:null,description:"Color of the node. Handles selected/etc.",name:"color",required:!0,type:{name:"ColorRepresentation"}},node:{defaultValue:null,description:"The internal node model.",name:"node",required:!0,type:{name:"InternalGraphNode"}},size:{defaultValue:null,description:"Size of the node.",name:"size",required:!0,type:{name:"number"}},active:{defaultValue:{value:"false"},description:"Whether the node is active or not.",name:"active",required:!1,type:{name:"boolean"}},opacity:{defaultValue:{value:"1"},description:"Opacity of the node. Mainly used for selection.",name:"opacity",required:!1,type:{name:"number"}},animated:{defaultValue:null,description:"Animation of the node.",name:"animated",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"ID of the node.",name:"id",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"A Read-only _string_ to check `this` object type.\n@remarks This can be used to find a specific type of Object3D in a scene.\n@remarks Sub-classes will update this value.\n@defaultValue `Object3D`",name:"type",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"Vector3"}},rotation:{defaultValue:null,description:"",name:"rotation",required:!1,type:{name:"Euler"}},onContextMenu:{defaultValue:null,description:"",name:"onContextMenu",required:!1,type:{name:"(event: ThreeEvent<MouseEvent>) => void"}},onPointerOver:{defaultValue:null,description:"",name:"onPointerOver",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerOut:{defaultValue:null,description:"",name:"onPointerOut",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(event: ThreeEvent<MouseEvent>) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(event: ThreeEvent<MouseEvent>) => void"}},up:{defaultValue:null,description:"",name:"up",required:!1,type:{name:"Vector3"}},scale:{defaultValue:null,description:"",name:"scale",required:!1,type:{name:"Vector3"}},matrix:{defaultValue:null,description:"",name:"matrix",required:!1,type:{name:"Matrix4"}},quaternion:{defaultValue:null,description:"",name:"quaternion",required:!1,type:{name:"Quaternion"}},layers:{defaultValue:null,description:"",name:"layers",required:!1,type:{name:"Layers"}},dispose:{defaultValue:null,description:"",name:"dispose",required:!1,type:{name:"() => void"}},isObject3D:{defaultValue:null,description:"Flag to check if a given object is of type {@link Object3D}.\n@remarks This is a _constant_ value\n@defaultValue `true`",name:"isObject3D",required:!1,type:{name:"true"}},uuid:{defaultValue:null,description:`{@link http://en.wikipedia.org/wiki/Universally_unique_identifier UUID} of this object instance.
@remarks This gets automatically assigned and shouldn't be edited.`,name:"uuid",required:!1,type:{name:"string"}},name:{defaultValue:null,description:`Optional name of the object
@remarks _(doesn't need to be unique)_.
@defaultValue \`""\``,name:"name",required:!1,type:{name:"string"}},parent:{defaultValue:null,description:"Object's parent in the {@link https://en.wikipedia.org/wiki/Scene_graph scene graph}.\n@remarks An object can have at most one parent.\n@defaultValue `null`",name:"parent",required:!1,type:{name:"Object3D<Event>"}},modelViewMatrix:{defaultValue:null,description:"@defaultValue `new THREE.Matrix4()`",name:"modelViewMatrix",required:!1,type:{name:"Matrix4"}},normalMatrix:{defaultValue:null,description:"@defaultValue `new THREE.Matrix3()`",name:"normalMatrix",required:!1,type:{name:"Matrix3"}},matrixWorld:{defaultValue:null,description:"The global transform of the object.\n@remarks If the {@link Object3D } has no parent, then it's identical to the local transform {@link THREE.Object3D.matrix .matrix}.\n@defaultValue `new THREE.Matrix4()`",name:"matrixWorld",required:!1,type:{name:"Matrix4"}},matrixAutoUpdate:{defaultValue:null,description:"When this is set, it calculates the matrix of position, (rotation or quaternion) and\nscale every frame and also recalculates the matrixWorld property.\n@defaultValue {@link DEFAULT_MATRIX_AUTO_UPDATE } - that is `(true)`.",name:"matrixAutoUpdate",required:!1,type:{name:"boolean"}},matrixWorldAutoUpdate:{defaultValue:null,description:"If set, then the renderer checks every frame if the object and its children need matrix updates.\nWhen it isn't, then you have to maintain all matrices in the object and its children yourself.\n@defaultValue {@link DEFAULT_MATRIX_WORLD_AUTO_UPDATE } - that is `(true)`.",name:"matrixWorldAutoUpdate",required:!1,type:{name:"boolean"}},matrixWorldNeedsUpdate:{defaultValue:null,description:"When this is set, it calculates the matrixWorld in that frame and resets this property to false.\n@defaultValue `false`",name:"matrixWorldNeedsUpdate",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"Object gets rendered if `true`.\n@defaultValue `true`",name:"visible",required:!1,type:{name:"boolean"}},castShadow:{defaultValue:null,description:"Whether the object gets rendered into shadow map.\n@defaultValue `false`",name:"castShadow",required:!1,type:{name:"boolean"}},receiveShadow:{defaultValue:null,description:"Whether the material receives shadows.\n@defaultValue `false`",name:"receiveShadow",required:!1,type:{name:"boolean"}},frustumCulled:{defaultValue:null,description:"When this is set, it checks every frame if the object is in the frustum of the camera before rendering the object.\nIf set to `false` the object gets rendered every frame even if it is not in the frustum of the camera.\n@defaultValue `true`",name:"frustumCulled",required:!1,type:{name:"boolean"}},renderOrder:{defaultValue:null,description:`This value allows the default rendering order of {@link https://en.wikipedia.org/wiki/Scene_graph scene graph}
objects to be overridden although opaque and transparent objects remain sorted independently.
@remarks When this property is set for an instance of {@link Group Group}, all descendants objects will be sorted and rendered together.
@remarks Sorting is from lowest to highest renderOrder.
@defaultValue \`0\``,name:"renderOrder",required:!1,type:{name:"number"}},animations:{defaultValue:null,description:"Array with object's animation clips.\n@defaultValue `[]`",name:"animations",required:!1,type:{name:"AnimationClip[]"}},userData:{defaultValue:{value:"`{}`"},description:`An object that can be used to store custom data about the {@link Object3D}.
@remarks It should not hold references to _functions_ as these **will not** be cloned.`,name:"userData",required:!1,type:{name:"{ [key: string]: any; }"}},customDepthMaterial:{defaultValue:null,description:`Custom depth material to be used when rendering to the depth map.
@remarks Can only be used in context of meshes.
@remarks When shadow-casting with a {@link THREE.DirectionalLight DirectionalLight} or {@link THREE.SpotLight SpotLight},
if you are modifying vertex positions in the vertex shader you must specify a customDepthMaterial for proper shadows.
@defaultValue \`undefined\``,name:"customDepthMaterial",required:!1,type:{name:"Material"}},customDistanceMaterial:{defaultValue:null,description:"Same as {@link customDepthMaterial}, but used with {@link THREE.Object3DPointLight PointLight}.\n@defaultValue `undefined`",name:"customDistanceMaterial",required:!1,type:{name:"Material"}},onBeforeRender:{defaultValue:null,description:`An optional callback that is executed immediately before a 3D object is rendered.
@remarks This function is called with the following parameters: renderer, scene, camera, geometry, material, group.
@remarks Please notice that this callback is only executed for \`renderable\` 3D objects.
Meaning 3D objects which define their visual appearance with geometries and materials like
instances of {@link THREE.Object3DMesh Mesh}, {@link THREE.Object3DLine Line}, {@link THREE.Object3DPoints Points} or {@link THREE.Object3DSprite Sprite}.
Instances of {@link THREE.Object3DObject3D Object3D}, {@link THREE.Object3DGroup Group} or {@link THREE.Object3DBone Bone}are not renderable and thus this callback is not executed for such objects.
@defaultValue \`() => {}\``,name:"onBeforeRender",required:!1,type:{name:"(renderer: WebGLRenderer, scene: Scene, camera: Camera, geometry: BufferGeometry<NormalBufferAttributes>, material: Material, group: Group) => void"}},onAfterRender:{defaultValue:null,description:`An optional callback that is executed immediately after a 3D object is rendered.
@remarks This function is called with the following parameters: renderer, scene, camera, geometry, material, group.
@remarks Please notice that this callback is only executed for \`renderable\` 3D objects.
Meaning 3D objects which define their visual appearance with geometries and materials like
instances of {@link THREE.Object3DMesh Mesh}, {@link THREE.Object3DLine Line}, {@link THREE.Object3DPoints Points} or {@link THREE.Object3DSprite Sprite}.
Instances of {@link THREE.Object3DObject3D Object3D}, {@link THREE.Object3DGroup Group} or {@link THREE.Object3DBone Bone}are not renderable and thus this callback is not executed for such objects.
@defaultValue \`() => {}\``,name:"onAfterRender",required:!1,type:{name:"(renderer: WebGLRenderer, scene: Scene, camera: Camera, geometry: BufferGeometry<NormalBufferAttributes>, material: Material, group: Group) => void"}},applyMatrix4:{defaultValue:null,description:`Applies the matrix transform to the object and updates the object's position, rotation and scale.
@param matrix`,name:"applyMatrix4",required:!1,type:{name:"(matrix: Matrix4) => void"}},applyQuaternion:{defaultValue:null,description:`Applies the rotation represented by the quaternion to the object.
@param quaternion`,name:"applyQuaternion",required:!1,type:{name:"(quaternion: Quaternion) => Object3D<Event>"}},setRotationFromAxisAngle:{defaultValue:null,description:"Calls {@link THREE.Quaternion.setFromAxisAnglesetFromAxisAngle}({@link axis}, {@link angle}) on the {@link quaternion.quaternion}.\n@param axis A normalized vector in object space.\n@param angle Angle in radians. Expects a `Float`",name:"setRotationFromAxisAngle",required:!1,type:{name:"(axis: Vector3, angle: number) => void"}},setRotationFromEuler:{defaultValue:null,description:`Calls {@link THREE.Quaternion.setFromEulersetFromEuler}({@link euler}) on the {@link quaternion.quaternion}.
@param euler Euler angle specifying rotation amount.`,name:"setRotationFromEuler",required:!1,type:{name:"(euler: Euler) => void"}},setRotationFromMatrix:{defaultValue:null,description:`Calls {@link THREE.Quaternion.setFromRotationMatrixsetFromRotationMatrix}({@link m}) on the {@link quaternion.quaternion}.
@remarks Note that this assumes that the upper 3x3 of m is a pure rotation matrix (i.e, unscaled).
@param m Rotate the quaternion by the rotation component of the matrix.`,name:"setRotationFromMatrix",required:!1,type:{name:"(m: Matrix4) => void"}},setRotationFromQuaternion:{defaultValue:null,description:`Copy the given {@link THREE.QuaternionQuaternion} into {@link quaternion.quaternion}.
@param q Normalized Quaternion.`,name:"setRotationFromQuaternion",required:!1,type:{name:"(q: Quaternion) => void"}},rotateOnAxis:{defaultValue:null,description:`Rotate an object along an axis in object space.
@remarks The axis is assumed to be normalized.
@param axis A normalized vector in object space.
@param angle The angle in radians. Expects a \`Float\``,name:"rotateOnAxis",required:!1,type:{name:"(axis: Vector3, angle: number) => Object3D<Event>"}},rotateOnWorldAxis:{defaultValue:null,description:`Rotate an object along an axis in world space.
@remarks The axis is assumed to be normalized
@remarks Method Assumes no rotated parent.
@param axis A normalized vector in world space.
@param angle The angle in radians. Expects a \`Float\``,name:"rotateOnWorldAxis",required:!1,type:{name:"(axis: Vector3, angle: number) => Object3D<Event>"}},rotateX:{defaultValue:null,description:"Rotates the object around _x_ axis in local space.\n@param rad The angle to rotate in radians. Expects a `Float`",name:"rotateX",required:!1,type:{name:"(angle: number) => Object3D<Event>"}},rotateY:{defaultValue:null,description:"Rotates the object around _y_ axis in local space.\n@param rad The angle to rotate in radians. Expects a `Float`",name:"rotateY",required:!1,type:{name:"(angle: number) => Object3D<Event>"}},rotateZ:{defaultValue:null,description:"Rotates the object around _z_ axis in local space.\n@param rad The angle to rotate in radians. Expects a `Float`",name:"rotateZ",required:!1,type:{name:"(angle: number) => Object3D<Event>"}},translateOnAxis:{defaultValue:null,description:`Translate an object by distance along an axis in object space
@remarks The axis is assumed to be normalized.
@param axis A normalized vector in object space.
@param distance The distance to translate. Expects a \`Float\``,name:"translateOnAxis",required:!1,type:{name:"(axis: Vector3, distance: number) => Object3D<Event>"}},translateX:{defaultValue:null,description:"Translates object along x axis in object space by {@link distance} units.\n@param distance Expects a `Float`",name:"translateX",required:!1,type:{name:"(distance: number) => Object3D<Event>"}},translateY:{defaultValue:null,description:"Translates object along _y_ axis in object space by {@link distance} units.\n@param distance Expects a `Float`",name:"translateY",required:!1,type:{name:"(distance: number) => Object3D<Event>"}},translateZ:{defaultValue:null,description:"Translates object along _z_ axis in object space by {@link distance} units.\n@param distance Expects a `Float`",name:"translateZ",required:!1,type:{name:"(distance: number) => Object3D<Event>"}},localToWorld:{defaultValue:null,description:`Converts the vector from this object's local space to world space.
@param vector A vector representing a position in this object's local space.`,name:"localToWorld",required:!1,type:{name:"(vector: Vector3) => Vector3"}},worldToLocal:{defaultValue:null,description:`Converts the vector from world space to this object's local space.
@param vector A vector representing a position in world space.`,name:"worldToLocal",required:!1,type:{name:"(vector: Vector3) => Vector3"}},lookAt:{defaultValue:null,description:"Rotates the object to face a point in world space.\n@remarks This method does not support objects having non-uniformly-scaled parent(s).\n@param vector A vector representing a position in world space to look at.\n@remarks This method does not support objects having non-uniformly-scaled parent(s).\n@param x Expects a `Float`\n@param y Expects a `Float`\n@param z Expects a `Float`",name:"lookAt",required:!1,type:{name:"{ (vector: Vector3): void; (x: number, y: number, z: number): void; }"}},add:{defaultValue:null,description:`Adds another {@link Object3D} as child of this {@link Object3D}.
@remarks An arbitrary number of objects may be added
@remarks Any current parent on an {@link object } passed in here will be removed, since an {@link Object3D } can have at most one parent.
@see {@link attach }
@see {@link THREE.Group Group} for info on manually grouping objects.
@param object`,name:"add",required:!1,type:{name:"(...object: Object3D<Event>[]) => Object3D<Event>"}},remove:{defaultValue:null,description:`Removes a {@link Object3D} as child of this {@link Object3D}.
@remarks An arbitrary number of objects may be removed.
@see {@link THREE.Group Group} for info on manually grouping objects.
@param object`,name:"remove",required:!1,type:{name:"(...object: Object3D<Event>[]) => Object3D<Event>"}},removeFromParent:{defaultValue:null,description:"Removes this object from its current parent.",name:"removeFromParent",required:!1,type:{name:"() => Object3D<Event>"}},clear:{defaultValue:null,description:"Removes all child objects.",name:"clear",required:!1,type:{name:"() => Object3D<Event>"}},getObjectById:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself, and returns the first with a matching id.
@remarks Note that ids are assigned in chronological order: 1, 2, 3, ..., incrementing by one for each new object.
@see {@link id }
@param id Unique number of the object instance. Expects a \`Integer\``,name:"getObjectById",required:!1,type:{name:"(id: number) => Object3D<Event>"}},getObjectByName:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself, and returns the first with a matching name.
@remarks Note that for most objects the name is an empty string by default
@remarks You will have to set it manually to make use of this method.
@param name String to match to the children's Object3D.name property.`,name:"getObjectByName",required:!1,type:{name:"(name: string) => Object3D<Event>"}},getObjectByProperty:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself,
and returns the first with a property that matches the value given.
@param name - the property name to search for.
@param value - value of the given property.`,name:"getObjectByProperty",required:!1,type:{name:"(name: string, value: any) => Object3D<Event>"}},getObjectsByProperty:{defaultValue:null,description:`Searches through an object and its children, starting with the object itself,
and returns the first with a property that matches the value given.
@param name The property name to search for.
@param value Value of the given property.`,name:"getObjectsByProperty",required:!1,type:{name:"(name: string, value: any) => Object3D<Event>[]"}},getWorldPosition:{defaultValue:null,description:`Returns a vector representing the position of the object in world space.
@param target The result will be copied into this Vector3.`,name:"getWorldPosition",required:!1,type:{name:"(target: Vector3) => Vector3"}},getWorldQuaternion:{defaultValue:null,description:`Returns a quaternion representing the rotation of the object in world space.
@param target The result will be copied into this Quaternion.`,name:"getWorldQuaternion",required:!1,type:{name:"(target: Quaternion) => Quaternion"}},getWorldScale:{defaultValue:null,description:`Returns a vector of the scaling factors applied to the object for each axis in world space.
@param target The result will be copied into this Vector3.`,name:"getWorldScale",required:!1,type:{name:"(target: Vector3) => Vector3"}},getWorldDirection:{defaultValue:null,description:`Returns a vector representing the direction of object's positive z-axis in world space.
@param target The result will be copied into this Vector3.`,name:"getWorldDirection",required:!1,type:{name:"(target: Vector3) => Vector3"}},raycast:{defaultValue:null,description:`Abstract (empty) method to get intersections between a casted ray and this object
@remarks Subclasses such as {@link THREE.Mesh Mesh}, {@link THREE.Line Line}, and {@link THREE.Points Points} implement this method in order to use raycasting.
@see {@link THREE.Raycaster Raycaster}
@param raycaster
@param intersects
@defaultValue \`() => {}\``,name:"raycast",required:!1,type:{name:"(raycaster: Raycaster, intersects: Intersection<Object3D<Event>>[]) => void"}},traverse:{defaultValue:null,description:`Executes the callback on this object and all descendants.
@remarks Note: Modifying the scene graph inside the callback is discouraged.
@param callback A function with as first argument an {@link Object3D } object.`,name:"traverse",required:!1,type:{name:"(callback: (object: Object3D<Event>) => any) => void"}},traverseVisible:{defaultValue:null,description:`Like traverse, but the callback will only be executed for visible objects
@remarks Descendants of invisible objects are not traversed.
@remarks Note: Modifying the scene graph inside the callback is discouraged.
@param callback A function with as first argument an {@link Object3D } object.`,name:"traverseVisible",required:!1,type:{name:"(callback: (object: Object3D<Event>) => any) => void"}},traverseAncestors:{defaultValue:null,description:`Executes the callback on all ancestors.
@remarks Note: Modifying the scene graph inside the callback is discouraged.
@param callback A function with as first argument an {@link Object3D } object.`,name:"traverseAncestors",required:!1,type:{name:"(callback: (object: Object3D<Event>) => any) => void"}},updateMatrix:{defaultValue:null,description:"Updates local transform.",name:"updateMatrix",required:!1,type:{name:"() => void"}},updateMatrixWorld:{defaultValue:null,description:"Updates the global transform of the object.\nAnd will update the object descendants if {@link matrixWorldNeedsUpdate.matrixWorldNeedsUpdate} is set to true or if the {@link force} parameter is set to `true`.\n@param force A boolean that can be used to bypass {@link matrixWorldAutoUpdate .matrixWorldAutoUpdate}, to recalculate the world matrix of the object and descendants on the current frame.\nUseful if you cannot wait for the renderer to update it on the next frame, assuming {@link matrixWorldAutoUpdate .matrixWorldAutoUpdate} set to `true`.",name:"updateMatrixWorld",required:!1,type:{name:"(force?: boolean) => void"}},updateWorldMatrix:{defaultValue:null,description:`Updates the global transform of the object.
@param updateParents Recursively updates global transform of ancestors.
@param updateChildren Recursively updates global transform of descendants.`,name:"updateWorldMatrix",required:!1,type:{name:"(updateParents: boolean, updateChildren: boolean) => void"}},toJSON:{defaultValue:null,description:`Convert the object to three.js {@link https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4 JSON Object/Scene format}.
@param meta Object containing metadata such as materials, textures or images for the object.`,name:"toJSON",required:!1,type:{name:"(meta?: { geometries: any; materials: any; textures: any; images: any; }) => any"}},clone:{defaultValue:null,description:"Returns a clone of `this` object and optionally all descendants.\n@param recursive If true, descendants of the object are also cloned. Default `true`",name:"clone",required:!1,type:{name:"(recursive?: boolean) => Object3D<Event>"}},copy:{defaultValue:null,description:`Copy the given object into this object
@remarks Note: event listeners and user-defined callbacks ({@link onAfterRender .onAfterRender} and {@link onBeforeRender .onBeforeRender}) are not copied.
@param source
@param recursive If true, descendants of the object are also copied. Default \`true\``,name:"copy",required:!1,type:{name:"(source: Object3D<Event>, recursive?: boolean) => Object3D<Event>"}},addEventListener:{defaultValue:null,description:`Adds a listener to an event type.
@param type The type of event to listen to.
@param listener The function that gets called when the event is fired.`,name:"addEventListener",required:!1,type:{name:"<T extends string>(type: T, listener: EventListener<Event, T, Object3D<Event>>) => void"}},hasEventListener:{defaultValue:null,description:`Checks if listener is added to an event type.
@param type The type of event to listen to.
@param listener The function that gets called when the event is fired.`,name:"hasEventListener",required:!1,type:{name:"<T extends string>(type: T, listener: EventListener<Event, T, Object3D<Event>>) => boolean"}},removeEventListener:{defaultValue:null,description:`Removes a listener from an event type.
@param type The type of the listener that gets removed.
@param listener The listener function that gets removed.`,name:"removeEventListener",required:!1,type:{name:"<T extends string>(type: T, listener: EventListener<Event, T, Object3D<Event>>) => void"}},dispatchEvent:{defaultValue:null,description:`Fire an event type.
@param event The event that gets fired.`,name:"dispatchEvent",required:!1,type:{name:"(event: Event) => void"}},onPointerUp:{defaultValue:null,description:"",name:"onPointerUp",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerDown:{defaultValue:null,description:"",name:"onPointerDown",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerEnter:{defaultValue:null,description:"",name:"onPointerEnter",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerLeave:{defaultValue:null,description:"",name:"onPointerLeave",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerMove:{defaultValue:null,description:"",name:"onPointerMove",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerMissed:{defaultValue:null,description:"",name:"onPointerMissed",required:!1,type:{name:"(event: MouseEvent) => void"}},onPointerCancel:{defaultValue:null,description:"",name:"onPointerCancel",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onWheel:{defaultValue:null,description:"",name:"onWheel",required:!1,type:{name:"(event: ThreeEvent<WheelEvent>) => void"}}}}}catch{}const Va=({animated:t,disabled:e,id:n,draggable:r,labelFontUrl:i,contextMenu:o,onClick:a,onDoubleClick:s,onPointerOver:l,onDragged:u,onPointerOut:c,onContextMenu:f,renderNode:d})=>{var D,K,oe;const h=ac(),p=ce(re=>re.theme),g=ce(re=>re.nodes.find(J=>J.id===n)),y=ce(re=>re.edges),m=ce(re=>re.draggingId),v=ce(re=>re.collapsedNodeIds),b=ce(re=>re.setDraggingId),_=ce(re=>re.setNodePosition),w=ce(re=>re.setCollapsedNodeIds),E=ce(re=>re.collapsedNodeIds.includes(n)),S=ce(re=>{var J;return(J=re.actives)==null?void 0:J.includes(n)}),x=ce(re=>{var J;return(J=re.selections)==null?void 0:J.includes(n)}),A=ce(re=>{var J;return((J=re.selections)==null?void 0:J.length)>0}),H=ce(re=>re.centerPosition),V=m===n,{position:O,label:G,subLabel:q,size:Y=7,labelVisible:I=!0}=g,B=R.useRef(null),[F,z]=R.useState(!1),[j,U]=R.useState(!1),k=F||x||S,M=A?k?p.node.selectedOpacity:p.node.inactiveOpacity:p.node.opacity,T=R.useMemo(()=>y.filter(J=>J.source===n).length>0||E,[y,n,E]),P=R.useCallback(()=>{T&&w(E?v.filter(re=>re!==n):[...v,n])},[T,v,n,E,w]),[{nodePosition:$,labelPosition:C,subLabelPosition:W}]=Vt(()=>({from:{nodePosition:H?[H.x,H.y,0]:[0,0,0],labelPosition:[0,-(Y+7),2],subLabelPosition:[0,-(Y+14),2]},to:{nodePosition:O?[O.x,O.y,k?O.z+1:O.z]:[0,0,0],labelPosition:[0,-(Y+7),2],subLabelPosition:[0,-(Y+14),2]},config:{...Ut,duration:t&&!m?void 0:0}}),[V,O,t,Y,k]),te=P_({draggable:r,position:O,set:re=>_(n,re),onDragStart:()=>{b(n),z(!0)},onDragEnd:()=>{b(null),z(!1),u==null||u(g)}});Gi(F&&!m&&a!==void 0,"pointer"),Gi(F&&r&&!V&&a===void 0,"grab"),Gi(V,"grabbing");const Q=k||V,X=Q?p.node.activeFill:g.fill||p.node.fill,{pointerOver:N,pointerOut:ie}=xu({disabled:e||V,onPointerOver:()=>{h.controls.truckSpeed=0,z(!0),l==null||l(g)},onPointerOut:()=>{h.controls.truckSpeed=2,z(!1),c==null||c(g)}}),ne=R.useMemo(()=>d?d({id:n,color:X,size:Y,active:Q,opacity:M,animated:t,node:g}):ae.jsx(ae.Fragment,{children:g.icon?ae.jsx(ao,{id:n,image:g.icon||"",size:Y+8,opacity:M,animated:t,color:X,node:g,active:Q}):ae.jsx(Br,{id:n,size:Y,opacity:M,animated:t,color:X,node:g,active:Q})}),[d,n,X,Y,Q,M,t,g]),Z=R.useMemo(()=>{var re,J,he;return(I||x||F)&&G&&ae.jsxs(ae.Fragment,{children:[ae.jsx(Je.group,{position:C,children:ae.jsx(Xn,{text:G,fontUrl:i,opacity:M,stroke:p.node.label.stroke,active:x||F||V||S,color:x||F||V||S?p.node.label.activeColor:p.node.label.color})}),q&&ae.jsx(Je.group,{position:W,children:ae.jsx(Xn,{text:q,fontUrl:i,fontSize:5,opacity:M,stroke:(re=p.node.subLabel)==null?void 0:re.stroke,active:x||F||V||S,color:x||F||V||S?(J=p.node.subLabel)==null?void 0:J.activeColor:(he=p.node.subLabel)==null?void 0:he.color})})]})},[F,S,V,x,G,i,C,I,M,q,W,p.node.label.activeColor,p.node.label.color,p.node.label.stroke,(D=p.node.subLabel)==null?void 0:D.activeColor,(K=p.node.subLabel)==null?void 0:K.color,(oe=p.node.subLabel)==null?void 0:oe.stroke]),L=R.useMemo(()=>j&&o&&ae.jsx(ju,{prepend:!0,center:!0,children:o({data:g,canCollapse:T,isCollapsed:E,onCollapse:P,onClose:()=>U(!1)})}),[j,o,g,T,E,P]);return ae.jsxs(Je.group,{userData:{id:n,type:"node"},ref:B,position:$,onPointerOver:N,onPointerOut:ie,onClick:()=>{!e&&!V&&(a==null||a(g,{canCollapse:T,isCollapsed:E}))},onDoubleClick:()=>{!e&&!V&&(s==null||s(g))},onContextMenu:()=>{e||(U(!0),f==null||f(g,{canCollapse:T,isCollapsed:E,onCollapse:P}))},...te(),children:[ne,ae.jsx(Ia,{opacity:x?.5:0,size:Y,animated:t,color:x||F?p.ring.activeFill:p.ring.fill}),L,Z]})};Va.defaultProps={draggable:!1};try{Va.displayName="Node",Va.__docgenInfo={description:"",displayName:"Node",props:{id:{defaultValue:null,description:"The unique identifier for the node.",name:"id",required:!0,type:{name:"string"}},parents:{defaultValue:null,description:"The parent nodes of the node.",name:"parents",required:!1,type:{name:"string[]"}},disabled:{defaultValue:null,description:"Whether the node is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},animated:{defaultValue:null,description:"Whether the node is animated.",name:"animated",required:!1,type:{name:"boolean"}},draggable:{defaultValue:{value:"false"},description:"Whether the node is draggable.",name:"draggable",required:!1,type:{name:"boolean"}},labelFontUrl:{defaultValue:null,description:"The url for the label font.",name:"labelFontUrl",required:!1,type:{name:"string"}},renderNode:{defaultValue:null,description:"The function to use to render the node.",name:"renderNode",required:!1,type:{name:"NodeRenderer"}},contextMenu:{defaultValue:null,description:"The context menu for the node.",name:"contextMenu",required:!1,type:{name:"(event: ContextMenuEvent) => ReactNode"}},onPointerOver:{defaultValue:null,description:"The function to call when the pointer is over the node.",name:"onPointerOver",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onPointerOut:{defaultValue:null,description:"The function to call when the pointer is out of the node.",name:"onPointerOut",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onClick:{defaultValue:null,description:"The function to call when the node is clicked.",name:"onClick",required:!1,type:{name:"(node: InternalGraphNode, props?: CollapseProps) => void"}},onDoubleClick:{defaultValue:null,description:"The function to call when the node is double clicked.",name:"onDoubleClick",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onContextMenu:{defaultValue:null,description:"The function to call when the node is right clicked.",name:"onContextMenu",required:!1,type:{name:"(node?: InternalGraphNode, props?: NodeContextMenuProps) => void"}},onDragged:{defaultValue:null,description:"Triggered after a node was dragged.",name:"onDragged",required:!1,type:{name:"(node: InternalGraphNode) => void"}}}}}catch{}const Fa=({animated:t,color:e,length:n,opacity:r,position:i,rotation:o,size:a,onActive:s,onContextMenu:l})=>{const u=R.useMemo(()=>new Kt(e),[e]),c=R.useRef(null),f=ce(y=>y.draggingId),d=ce(y=>y.centerPosition),[{pos:h,arrowOpacity:p}]=Vt(()=>({from:{pos:d?[d.x,d.y,d.z]:[0,0,0],arrowOpacity:0},to:{pos:[i.x,i.y,i.z],arrowOpacity:r},config:{...Ut,duration:t&&!f?void 0:0}}),[t,f,r,i]),g=R.useCallback(()=>{var m;const y=new _e(0,1,0);(m=c.current)==null||m.quaternion.setFromUnitVectors(y,o)},[o,c]);return R.useEffect(()=>g(),[g]),ae.jsxs(Je.mesh,{position:h,ref:c,scale:[1,1,1],onPointerOver:()=>s(!0),onPointerOut:()=>s(!1),onPointerDown:y=>{y.nativeEvent.buttons===2&&(y.stopPropagation(),l())},children:[ae.jsx("cylinderGeometry",{args:[0,a,n,20,1,!0],attach:"geometry"}),ae.jsx(Je.meshBasicMaterial,{attach:"material",color:u,depthTest:!1,opacity:p,transparent:!0,side:bt,fog:!0})]})};Fa.defaultProps={size:1,opacity:.5,color:"#D8E6EA"};try{Fa.displayName="Arrow",Fa.__docgenInfo={description:"",displayName:"Arrow",props:{animated:{defaultValue:null,description:"Whether the arrow should be animated.",name:"animated",required:!1,type:{name:"boolean"}},color:{defaultValue:{value:"#D8E6EA"},description:"The color of the arrow.",name:"color",required:!1,type:{name:"ColorRepresentation"}},length:{defaultValue:null,description:"The length of the arrow.",name:"length",required:!0,type:{name:"number"}},opacity:{defaultValue:{value:"0.5"},description:"The opacity of the arrow.",name:"opacity",required:!1,type:{name:"number"}},position:{defaultValue:null,description:"The position of the arrow in 3D space.",name:"position",required:!0,type:{name:"Vector3"}},rotation:{defaultValue:null,description:"The rotation of the arrow in 3D space.",name:"rotation",required:!0,type:{name:"Vector3"}},size:{defaultValue:{value:"1"},description:"The size of the arrow.",name:"size",required:!1,type:{name:"number"}},onContextMenu:{defaultValue:null,description:"A function that is called when the arrow is right-clicked.",name:"onContextMenu",required:!1,type:{name:"() => void"}},onActive:{defaultValue:null,description:"A function that is called when the arrow is selected or deselected.",name:"onActive",required:!1,type:{name:"(state: boolean) => void"}}}}}catch{}const Ga=({curveOffset:t,animated:e,color:n,curve:r,curved:i=!1,id:o,opacity:a,size:s,onContextMenu:l,onClick:u,onPointerOver:c,onPointerOut:f})=>{const d=R.useRef(null),h=ce(v=>v.draggingId),p=R.useMemo(()=>new Kt(n),[n]),g=ce(v=>v.centerPosition),y=R.useRef(!1),{lineOpacity:m}=Vt({from:{lineOpacity:0},to:{lineOpacity:a},config:{...Ut,duration:e?void 0:0}});return Vt(()=>{const v=r.getPoint(0),b=r.getPoint(1);return{from:{fromVertices:y.current?[b==null?void 0:b.x,b==null?void 0:b.y,(b==null?void 0:b.z)||0]:[g==null?void 0:g.x,g==null?void 0:g.y,(g==null?void 0:g.z)||0],toVertices:[v==null?void 0:v.x,v==null?void 0:v.y,(v==null?void 0:v.z)||0]},to:{fromVertices:[v==null?void 0:v.x,v==null?void 0:v.y,(v==null?void 0:v.z)||0],toVertices:[b==null?void 0:b.x,b==null?void 0:b.y,(b==null?void 0:b.z)||0]},onChange:_=>{const{fromVertices:w,toVertices:E}=_.value,S=new _e(...w),x=new _e(...E),A=Qi(S,0,x,0,i,t);d.current.copy(new _l(A,20,s/2,5,!1))},config:{...Ut,duration:e&&!h?void 0:0}}},[e,h,r,s]),R.useEffect(()=>{y.current=!0},[]),ae.jsxs("mesh",{userData:{id:o,type:"edge"},onPointerOver:c,onPointerOut:f,onClick:u,onPointerDown:v=>{v.nativeEvent.buttons===2&&(v.stopPropagation(),l())},children:[ae.jsx("tubeGeometry",{attach:"geometry",ref:d}),ae.jsx(Je.meshBasicMaterial,{attach:"material",opacity:m,fog:!0,transparent:!0,depthTest:!1,color:p})]})};Ga.defaultProps={color:"#000",size:1,opacity:1};try{Ga.displayName="Line",Ga.__docgenInfo={description:"",displayName:"Line",props:{animated:{defaultValue:null,description:"Whether the line should be animated.",name:"animated",required:!1,type:{name:"boolean"}},color:{defaultValue:{value:"#000"},description:"The color of the line.",name:"color",required:!1,type:{name:"ColorRepresentation"}},curved:{defaultValue:{value:"false"},description:"Whether the line should be curved.",name:"curved",required:!1,type:{name:"boolean"}},curve:{defaultValue:null,description:"The curve of the line in 3D space.",name:"curve",required:!0,type:{name:"Curve<Vector3>"}},id:{defaultValue:null,description:"The unique identifier of the line.",name:"id",required:!0,type:{name:"string"}},opacity:{defaultValue:{value:"1"},description:"The opacity of the line.",name:"opacity",required:!1,type:{name:"number"}},size:{defaultValue:{value:"1"},description:"The size of the line.",name:"size",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"A function that is called when the line is clicked.",name:"onClick",required:!1,type:{name:"() => void"}},onContextMenu:{defaultValue:null,description:"A function that is called when the line is right-clicked.",name:"onContextMenu",required:!1,type:{name:"() => void"}},onPointerOver:{defaultValue:null,description:"A function that is called when the mouse pointer is moved over the line.",name:"onPointerOver",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},onPointerOut:{defaultValue:null,description:"A function that is called when the mouse pointer is moved out of the line.",name:"onPointerOut",required:!1,type:{name:"(event: ThreeEvent<PointerEvent>) => void"}},curveOffset:{defaultValue:null,description:"The offset of the curve.",name:"curveOffset",required:!1,type:{name:"number"}}}}}catch{}const Wd=3,za=({animated:t,arrowPlacement:e,contextMenu:n,disabled:r,labelPlacement:i,id:o,interpolation:a,labelFontUrl:s,onContextMenu:l,onClick:u,onPointerOver:c,onPointerOut:f})=>{const d=ce(N=>N.theme),h=ce(N=>N.draggingId),[p,g]=R.useState(!1),[y,m]=R.useState(!1),v=ce(N=>N.edges),b=v.find(N=>N.id===o),{target:_,source:w,label:E,labelVisible:S=!1,size:x=1}=b,A=ce(N=>N.nodes.find(ie=>ie.id===w)),H=ce(N=>N.nodes.find(ie=>ie.id===_)),V=(x+d.edge.label.fontSize)/2,[O,G]=R.useMemo(()=>Jh(x),[x]),{curveOffset:q,curved:Y}=R.useMemo(()=>j1({edge:b,edges:v,curved:a==="curved"}),[b,v,a]),[I,B,F]=R.useMemo(()=>{const N=Ji(A),ie=A.size,ne=Ji(H),Z=H.size;let L=Qi(N,ie,ne,Z,Y,q);const[D,K]=Qh(e,L,O);return e==="end"&&(L=Qi(N,ie,D,0,Y,q)),[L,D,K]},[A,H,Y,q,e,O]),z=R.useMemo(()=>{let N=ep(A.position,H.position,Ih(V,i));if(Y){const ie=new _e().subVectors(N,I.getPoint(.5));switch(i){case"above":ie.y=ie.y-Wd;break;case"below":ie.y=ie.y+Wd;break}N=N.sub(ie)}return N},[A.position,H.position,V,i,Y,I]),j=ce(N=>{var ie;return(ie=N.selections)==null?void 0:ie.includes(o)}),U=ce(N=>{var ie;return(ie=N.selections)==null?void 0:ie.length}),k=ce(N=>{var ie;return(ie=N.actives)==null?void 0:ie.includes(o)}),M=ce(N=>N.centerPosition),T=U?j||k?d.edge.selectedOpacity:d.edge.inactiveOpacity:d.edge.opacity,[{labelPosition:P}]=Vt(()=>({from:{labelPosition:M?[M.x,M.y,M.z]:[0,0,0]},to:{labelPosition:[z.x,z.y,z.z]},config:{...Ut,duration:t&&!h?void 0:0}}),[z,t,h]),$=R.useMemo(()=>new rh(0,0,i==="natural"?0:Math.atan((H.position.y-A.position.y)/(H.position.x-A.position.x))),[H.position.x,H.position.y,A.position.x,A.position.y,i]);Gi(p&&!h&&u!==void 0,"pointer");const{pointerOver:C,pointerOut:W}=xu({disabled:r,onPointerOver:()=>{g(!0),c==null||c(b)},onPointerOut:()=>{g(!1),f==null||f(b)}}),te=R.useMemo(()=>e!=="none"&&ae.jsx(Fa,{animated:t,color:j||p||k?d.arrow.activeFill:d.arrow.fill,length:O,opacity:T,position:B,rotation:F,size:G,onActive:g,onContextMenu:()=>{r||(m(!0),l==null||l(b))}}),[p,t,O,e,B,F,G,r,b,k,j,l,T,d.arrow.activeFill,d.arrow.fill]),Q=R.useMemo(()=>S&&E&&ae.jsx(Je.group,{position:P,rotation:$,children:ae.jsx(Xn,{text:E,ellipsis:15,fontUrl:s,stroke:d.edge.label.stroke,color:j||p||k?d.edge.label.activeColor:d.edge.label.color,opacity:T,fontSize:d.edge.label.fontSize})}),[p,k,j,E,s,P,$,S,T,d.edge.label.activeColor,d.edge.label.color,d.edge.label.fontSize,d.edge.label.stroke]),X=R.useMemo(()=>y&&n&&ae.jsx(ju,{prepend:!0,center:!0,children:n({data:b,onClose:()=>m(!1)})}),[y,n,b]);return ae.jsxs("group",{children:[ae.jsx(Ga,{curveOffset:q,animated:t,color:j||p||k?d.edge.activeFill:d.edge.fill,curve:I,curved:Y,id:o,opacity:T,size:x,onClick:()=>{r||u==null||u(b)},onPointerOver:C,onPointerOut:W,onContextMenu:()=>{r||(m(!0),l==null||l(b))}}),te,Q,X]})};za.defaultProps={labelPlacement:"inline",arrowPlacement:"end"};try{za.displayName="Edge",za.__docgenInfo={description:"",displayName:"Edge",props:{labelFontUrl:{defaultValue:null,description:"The url for the label font.",name:"labelFontUrl",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"The unique identifier of the edge.",name:"id",required:!0,type:{name:"string"}},animated:{defaultValue:null,description:"Whether the edge should be animated.",name:"animated",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Whether the edge should be disabled.",name:"disabled",required:!1,type:{name:"boolean"}},labelPlacement:{defaultValue:{value:"inline"},description:"The placement of the edge label.",name:"labelPlacement",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"above"'},{value:'"inline"'},{value:'"natural"'}]}},arrowPlacement:{defaultValue:{value:"end"},description:"The placement of the edge arrow.",name:"arrowPlacement",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"mid"'},{value:'"end"'}]}},interpolation:{defaultValue:null,description:"The type of interpolation used to draw the edge.",name:"interpolation",required:!0,type:{name:"enum",value:[{value:'"linear"'},{value:'"curved"'}]}},contextMenu:{defaultValue:null,description:"A function that returns the context menu for the edge.",name:"contextMenu",required:!1,type:{name:"(event: Partial<ContextMenuEvent>) => ReactNode"}},onClick:{defaultValue:null,description:"A function that is called when the edge is clicked.",name:"onClick",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onContextMenu:{defaultValue:null,description:"A function that is called when the edge is right-clicked.",name:"onContextMenu",required:!1,type:{name:"(edge?: InternalGraphEdge) => void"}},onPointerOver:{defaultValue:null,description:"A function that is called when the mouse pointer is moved over the edge.",name:"onPointerOver",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onPointerOut:{defaultValue:null,description:"A function that is called when the mouse pointer is moved out of the edge.",name:"onPointerOut",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}}}}}catch{}const Hd=new Gg(0,0,0);function LT(t,e){const n=R.useRef(),r=ce(l=>l.theme);ce(l=>{n.current=l});const i=R.useRef(new Map),o=e==="curved",a=R.useCallback(l=>{const u=[],c=i.current,{nodes:f}=n.current;return l.forEach(d=>{const{target:h,source:p,size:g=1}=d,y=f.find(I=>I.id===p),m=f.find(I=>I.id===h);if(!y||!m)return;const v=`fromX:${y.position.x},fromY:${y.position.y},toX:${m.position.x}},toY:${m.position.y}`;if(c.has(v)){const I=c.get(v);u.push(I);return}const b=Ji(y),_=y.size+r.edge.label.fontSize,w=Ji(m),E=m.size+r.edge.label.fontSize;let S=Qi(b,_,w,E,o),x=new _l(S,20,g/2,5,!1);if(t==="none"){u.push(x),c.set(v,x);return}const[A,H]=Jh(g),[V,O]=Qh(t,S,A),G=new ru;G.setFromUnitVectors(new _e(0,1,0),O);const q=new zg(0,H,A,20,1,!0);if(q.applyQuaternion(G),q.translate(V.x,V.y,V.z),t&&t==="end"){const I=Qi(b,_,V,0,o);x=new _l(I,20,g/2,5,!1)}const Y=Wo([x,q]);u.push(Y),c.set(v,Y)}),u},[t,o,r.edge.label.fontSize]),s=R.useCallback((l,u)=>{const c=a(l),f=a(u);return Wo([f.length?Wo(f):Hd,c.length?Wo(c):Hd],!0)},[a]);return{getGeometries:a,getGeometry:s}}function UT(t,e,n){const{onClick:r,onContextMenu:i,onPointerOut:o,onPointerOver:a}=t,s=ce(p=>p.edgeContextMenus),l=ce(p=>p.setEdgeContextMenus),u=R.useRef(!1),c=R.useCallback(()=>{u.current=!0},[]),f=R.useRef(!1),d=R.useCallback(()=>{f.current=!0},[]),h=R.useCallback((p,g)=>{r&&u.current&&(u.current=!1,n||g.forEach(y=>{r(y)})),(e||i)&&f.current&&(f.current=!1,n||g.forEach(y=>{s.has(y.id)||(l(new Set([...s,y.id])),i==null||i(y))})),a&&g.filter(m=>!p.includes(m)).forEach(m=>{a(m)}),o&&p.filter(m=>!g.includes(m)).forEach(m=>{o(m)})},[e,n,s,l,r,i,a,o]);return{handleClick:c,handleContextMenu:d,handleIntersections:h}}function VT(t,e){const n=R.useRef(t);R.useEffect(()=>{n.current=t},[t]);const r=R.useCallback(()=>{const o=n.current.getAttribute("position"),a=Array.from({length:o.array.length}).fill(0),s=Array.from(o.array);return{from:a,to:s}},[]),i=R.useCallback(o=>{const a=new Float32Array(o),s=new eh(a,3,!1);n.current.setAttribute("position",s),s.needsUpdate=!0},[]);Vt(()=>{if(!e)return null;const o=r();return{from:{positions:o.from},to:{positions:o.to},onChange:a=>{i(a.value.positions)},config:{...Ut,duration:e?void 0:0}}},[e])}function FT(t,e,n){const[{activeOpacity:r,inactiveOpacity:i}]=Vt(()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:e?n.edge.selectedOpacity:n.edge.opacity,inactiveOpacity:e?n.edge.inactiveOpacity:n.edge.opacity},config:{...Ut,duration:t?void 0:0}}),[t,e,n]);return{activeOpacity:r,inactiveOpacity:i}}const ja=({animated:t,color:e,contextMenu:n,edge:r,labelFontUrl:i,labelPlacement:o,opacity:a})=>{const s=ce(x=>x.theme),{target:l,source:u,label:c,labelVisible:f=!1,size:d=1}=r,h=ce(x=>x.nodes),p=h.find(x=>x.id===u),g=h.find(x=>x.id===l),y=ce(x=>x.draggingId),m=(d+s.edge.label.fontSize)/2,v=R.useMemo(()=>ep(p.position,g.position,Ih(m,o)),[p.position,g.position,m,o]),b=ce(x=>x.edgeContextMenus),_=ce(x=>x.setEdgeContextMenus),[{labelPosition:w}]=Vt(()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[v.x,v.y,v.z]},config:{...Ut,duration:t&&!y?void 0:0}}),[v,t,y]),E=R.useCallback(x=>{b.delete(x.id),_(new Set(b.values()))},[b,_]),S=R.useMemo(()=>new rh(0,0,o==="natural"?0:Math.atan((g.position.y-p.position.y)/(g.position.x-p.position.x))),[g.position.x,g.position.y,p.position.x,p.position.y,o]);return ae.jsxs("group",{children:[f&&c&&ae.jsx(Je.group,{position:w,rotation:S,children:ae.jsx(Xn,{text:c,ellipsis:15,fontUrl:i,stroke:s.edge.label.stroke,color:e,opacity:a,fontSize:s.edge.label.fontSize})}),n&&b.has(r.id)&&ae.jsx(ju,{prepend:!0,center:!0,position:v,children:n({data:r,onClose:()=>E(r)})})]})};ja.defaultProps={labelPlacement:"inline"};try{ja.displayName="Edge",ja.__docgenInfo={description:"",displayName:"Edge",props:{animated:{defaultValue:null,description:"Whether the edge should be animated.",name:"animated",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Whether the edge should be disabled.",name:"disabled",required:!1,type:{name:"boolean"}},color:{defaultValue:null,description:"The color of the edge.",name:"color",required:!0,type:{name:"ColorRepresentation"}},contextMenu:{defaultValue:null,description:"A function that returns the context menu for the edge.",name:"contextMenu",required:!1,type:{name:"(event: Partial<ContextMenuEvent>) => ReactNode"}},edge:{defaultValue:null,description:"The edge object.",name:"edge",required:!0,type:{name:"InternalGraphEdge"}},labelFontUrl:{defaultValue:null,description:"The URL of the font for the edge label.",name:"labelFontUrl",required:!1,type:{name:"string"}},labelPlacement:{defaultValue:{value:"inline"},description:"The placement of the edge label.",name:"labelPlacement",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"above"'},{value:'"inline"'},{value:'"natural"'}]}},opacity:{defaultValue:null,description:"The opacity of the edge.",name:"opacity",required:!1,type:{name:"number"}}}}}catch{}const Zl=({interpolation:t="linear",arrowPlacement:e="end",labelPlacement:n="inline",animated:r,contextMenu:i,disabled:o,edges:a,labelFontUrl:s,onClick:l,onContextMenu:u,onPointerOut:c,onPointerOver:f})=>{const d=ce(j=>j.theme),{getGeometries:h,getGeometry:p}=LT(e,t),g=ce(j=>j.draggingId),y=ce(j=>j.edgeMeshes),m=ce(j=>j.setEdgeMeshes),v=ce(j=>j.actives||[]),b=ce(j=>j.selections||[]),[_,w,E,S]=R.useMemo(()=>{const j=[],U=[],k=[],M=[];return a.forEach(T=>{if(g===T.source||g===T.target){b.includes(T.id)||v.includes(T.id)?k.push(T):M.push(T);return}b.includes(T.id)||v.includes(T.id)?j.push(T):U.push(T)}),[j,U,k,M]},[a,v,b,g]),x=!!b.length,A=R.useMemo(()=>p(_,w),[p,_,w]),{activeOpacity:H,inactiveOpacity:V}=FT(r,x,d);VT(A,r),R.useEffect(()=>{if(g===null){const U=h(a).map(k=>new Pr(k));m(U)}},[h,m,a,g]);const O=R.useRef(new Pr),G=R.useRef(new Pr),q=R.useCallback(j=>{if(!j.camera)return[];const U=j.intersectObjects(y);return U.length?U.map(k=>a[y.indexOf(k.object)]):[]},[y,a]),{handleClick:Y,handleContextMenu:I,handleIntersections:B}=UT({onClick:l,onContextMenu:u,onPointerOut:c,onPointerOver:f},i,o),F=R.useRef(null),z=R.useRef([]);return Ba(j=>{if(O.current.geometry=A,o)return;const U=F.current;if((g||g===null&&U!==null)&&(G.current.geometry=p(E,S)),F.current=g,g)return;const k=z.current,M=q(j.raycaster);B(k,M),M.join()!==k.join()&&(G.current.geometry=p(M,[])),z.current=M}),ae.jsxs("group",{onClick:Y,onContextMenu:I,children:[ae.jsxs("mesh",{ref:O,children:[ae.jsx(Je.meshBasicMaterial,{attach:"material-0",color:d.edge.fill,depthTest:!1,fog:!0,opacity:V,side:bt,transparent:!0}),ae.jsx(Je.meshBasicMaterial,{attach:"material-1",color:d.edge.activeFill,depthTest:!1,fog:!0,opacity:H,side:bt,transparent:!0})]}),ae.jsxs("mesh",{ref:G,children:[ae.jsx(Je.meshBasicMaterial,{attach:"material-0",color:d.edge.fill,depthTest:!1,fog:!0,opacity:V,side:bt,transparent:!0}),ae.jsx(Je.meshBasicMaterial,{attach:"material-1",color:d.edge.activeFill,depthTest:!1,fog:!0,opacity:H,side:bt,transparent:!0})]}),a.map(j=>ae.jsx(ja,{animated:r,contextMenu:i,color:d.edge.label.color,disabled:o,edge:j,labelFontUrl:s,labelPlacement:n},j.id))]})};try{Zl.displayName="Edges",Zl.__docgenInfo={description:`Three.js rendering starts to get slower if you have an individual mesh for each edge
and a high number of edges.

Instead, we take the edges and split them into their different render states:

 * - Active (any edges that are marked as "selected" or "active" in the state)
 * - Dragging (any edges that are connected to a node that is being dragged)
 * - Intersecting (any edges that are currently intersected by the ray from the mouse position)
 * - Inactive (any edges that aren't active, dragging, or intersected)

We generate the geometry for each edge in each of these groups, and then merge them
into a single geometry for each group. This merged mesh is rendered as one object
which gives much better performance. This means that we only need to update geometry
and positions when edges move between the different states, rather than updating all
edges whenever any other edge changes.

To get this all working, we have to do a few things outside the`,displayName:"Edges",props:{animated:{defaultValue:null,description:"Whether the edge should be animated.",name:"animated",required:!1,type:{name:"boolean"}},arrowPlacement:{defaultValue:{value:"end"},description:"The placement of the edge arrow.",name:"arrowPlacement",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"mid"'},{value:'"end"'}]}},contextMenu:{defaultValue:null,description:"A function that returns the context menu for the edge.",name:"contextMenu",required:!1,type:{name:"(event: Partial<ContextMenuEvent>) => ReactNode"}},disabled:{defaultValue:null,description:"Whether the edge should be disabled.",name:"disabled",required:!1,type:{name:"boolean"}},edges:{defaultValue:null,description:"The array of edge objects.",name:"edges",required:!0,type:{name:"InternalGraphEdge[]"}},labelFontUrl:{defaultValue:null,description:"The URL of the font for the edge label.",name:"labelFontUrl",required:!1,type:{name:"string"}},labelPlacement:{defaultValue:{value:"inline"},description:"The placement of the edge label.",name:"labelPlacement",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"above"'},{value:'"inline"'},{value:'"natural"'}]}},interpolation:{defaultValue:{value:"linear"},description:"The type of interpolation used to draw the edge.",name:"interpolation",required:!1,type:{name:"enum",value:[{value:'"linear"'},{value:'"curved"'}]}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onContextMenu:{defaultValue:null,description:"",name:"onContextMenu",required:!1,type:{name:"(edge?: InternalGraphEdge) => void"}},onPointerOver:{defaultValue:null,description:"",name:"onPointerOver",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onPointerOut:{defaultValue:null,description:"",name:"onPointerOut",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}}}}}catch{}const Na=({animated:t,position:e,padding:n,labelFontUrl:r,disabled:i,radius:o,nodes:a,label:s,onClick:l,onPointerOver:u,onPointerOut:c})=>{var G,q,Y,I,B;const f=ce(F=>F.theme),d=Math.max(e.width,e.height)/2,h=d-o+n,[p,g]=R.useState(!1),y=ce(F=>F.centerPosition),m=ce(F=>{var z;return(z=F.actives)==null?void 0:z.some(j=>a.some(U=>U.id===j))}),v=ce(F=>{var z;return(z=F.selections)==null?void 0:z.some(j=>a.some(U=>U.id===j))}),_=ce(F=>{var z;return((z=F.selections)==null?void 0:z.length)>0})?v||p||m?(G=f.cluster)==null?void 0:G.selectedOpacity:(q=f.cluster)==null?void 0:q.inactiveOpacity:(Y=f.cluster)==null?void 0:Y.opacity,{circleOpacity:w,circlePosition:E,labelPosition:S}=Vt({from:{circlePosition:[y.x,y.y,-1],circleOpacity:0,labelPosition:[0,-h,2]},to:{labelPosition:[0,-h,2],circlePosition:e?[e.x,e.y,-1]:[0,0,-1],circleOpacity:_},config:{...Ut,duration:t?void 0:0}}),x=R.useMemo(()=>{var F;return new Kt((F=f.cluster)==null?void 0:F.stroke)},[(I=f.cluster)==null?void 0:I.stroke]),A=R.useMemo(()=>{var F;return new Kt((F=f.cluster)==null?void 0:F.fill)},[(B=f.cluster)==null?void 0:B.fill]);Gi(p&&l!==void 0,"pointer");const{pointerOver:H,pointerOut:V}=xu({disabled:i,onPointerOver:()=>{g(!0),u==null||u({nodes:a,label:s})},onPointerOut:()=>{g(!1),c==null||c({nodes:a,label:s})}});return R.useMemo(()=>{var F,z,j;return f.cluster&&ae.jsxs(Je.group,{position:E,onPointerOver:H,onPointerOut:V,onClick:()=>{i||l==null||l({nodes:a,label:s})},children:[ae.jsxs("mesh",{children:[ae.jsx("ringGeometry",{attach:"geometry",args:[h,0,128]}),ae.jsx(Je.meshBasicMaterial,{attach:"material",color:A,transparent:!0,depthTest:!1,opacity:(F=f.cluster)!=null&&F.fill?w:0,side:bt,fog:!0})]}),ae.jsxs("mesh",{children:[ae.jsx("ringGeometry",{attach:"geometry",args:[h,d+n,128]}),ae.jsx(Je.meshBasicMaterial,{attach:"material",color:x,transparent:!0,depthTest:!1,opacity:w,side:bt,fog:!0})]}),((z=f.cluster)==null?void 0:z.label)&&ae.jsx(Je.group,{position:S,children:ae.jsx(Xn,{text:s,opacity:_,fontUrl:r,stroke:f.cluster.label.stroke,active:!1,color:(j=f.cluster)==null?void 0:j.label.color,fontSize:12})})]})},[f.cluster,E,H,V,h,A,w,d,n,x,S,s,_,r,i,l,a])};Na.defaultProps={radius:2,padding:40};try{Na.displayName="Cluster",Na.__docgenInfo={description:"",displayName:"Cluster",props:{animated:{defaultValue:null,description:"Whether the circle should be animated.",name:"animated",required:!1,type:{name:"boolean"}},radius:{defaultValue:{value:"2"},description:"The radius of the circle. Default 1.",name:"radius",required:!1,type:{name:"number"}},padding:{defaultValue:{value:"40"},description:"The padding of the circle. Default 20.",name:"padding",required:!1,type:{name:"number"}},labelFontUrl:{defaultValue:null,description:"The url for the label font.",name:"labelFontUrl",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Whether the node is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"When the cluster was clicked.",name:"onClick",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},onPointerOver:{defaultValue:null,description:"When a cluster recieves a pointer over event.",name:"onPointerOver",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},onPointerOut:{defaultValue:null,description:"When cluster recieves a pointer leave event.",name:"onPointerOut",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"InternalGraphNode[]"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"CenterPositionVector"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}}}}}catch{}const qa=R.forwardRef(({onNodeClick:t,onNodeDoubleClick:e,onNodeContextMenu:n,onEdgeContextMenu:r,onEdgeClick:i,onEdgePointerOver:o,onEdgePointerOut:a,onNodePointerOver:s,onNodePointerOut:l,onClusterClick:u,onNodeDragged:c,onClusterPointerOver:f,onClusterPointerOut:d,contextMenu:h,animated:p,disabled:g,draggable:y,edgeLabelPosition:m,edgeArrowPosition:v,edgeInterpolation:b,labelFontUrl:_,renderNode:w,...E},S)=>{const{layoutType:x,clusterAttribute:A}=E,H=lt(k=>k.gl),V=lt(k=>k.scene),O=lt(k=>k.camera);if(Px(E),A&&!(x==="forceDirected2d"||x==="forceDirected3d"))throw new Error("Clustering is only supported for the force directed layouts.");const G=ce(k=>k.graph),q=ce(k=>k.nodes),Y=ce(k=>k.edges),I=ce(k=>[...k.clusters.values()]),{centerNodesById:B,isCentered:F}=IT({animated:p,disabled:g,layoutType:x});R.useImperativeHandle(S,()=>({centerGraph:B,graph:G,renderScene:()=>H.render(V,O)}),[B,G,H,V,O]);const z=R.useMemo(()=>q.map(k=>ae.jsx(Va,{id:k==null?void 0:k.id,labelFontUrl:_,draggable:y,disabled:g,animated:p,contextMenu:h,renderNode:w,onClick:t,onDoubleClick:e,onContextMenu:n,onPointerOver:s,onPointerOut:l,onDragged:c},k==null?void 0:k.id)),[p,h,g,y,_,q,t,n,e,c,l,s,w]),j=R.useMemo(()=>p?Y.map(k=>ae.jsx(za,{id:k.id,disabled:g,animated:p,labelFontUrl:_,labelPlacement:m,arrowPlacement:v,interpolation:b,contextMenu:h,onClick:i,onContextMenu:r,onPointerOver:o,onPointerOut:a},k.id)):ae.jsx(Zl,{edges:Y,disabled:g,animated:p,labelFontUrl:_,labelPlacement:m,arrowPlacement:v,interpolation:b,contextMenu:h,onClick:i,onContextMenu:r,onPointerOver:o,onPointerOut:a}),[p,h,g,v,b,m,Y,_,i,r,a,o]),U=R.useMemo(()=>I.map(k=>ae.jsx(Na,{animated:p,disabled:g,labelFontUrl:_,onClick:u,onPointerOver:f,onPointerOut:d,...k},k.label)),[p,I,g,_,u,d,f]);return F&&ae.jsxs(R.Fragment,{children:[z,j,U]})});qa.defaultProps={edgeInterpolation:"linear"};try{qa.displayName="GraphScene",qa.__docgenInfo={description:"",displayName:"GraphScene",props:{layoutType:{defaultValue:null,description:"Type of layout.",name:"layoutType",required:!1,type:{name:"enum",value:[{value:'"forceDirected2d"'},{value:'"forceDirected3d"'},{value:'"circular2d"'},{value:'"treeTd2d"'},{value:'"treeTd3d"'},{value:'"treeLr2d"'},{value:'"treeLr3d"'},{value:'"radialOut2d"'},{value:'"radialOut3d"'},{value:'"hierarchicalTd"'},{value:'"hierarchicalLr"'},{value:'"nooverlap"'},{value:'"forceatlas2"'},{value:'"custom"'}]}},selections:{defaultValue:null,description:"List of ids that are selected.",name:"selections",required:!1,type:{name:"string[]"}},actives:{defaultValue:null,description:"List of ids that are active.",name:"actives",required:!1,type:{name:"string[]"}},collapsedNodeIds:{defaultValue:null,description:"List of node ids that are collapsed.",name:"collapsedNodeIds",required:!1,type:{name:"string[]"}},animated:{defaultValue:null,description:"Animate or not the graph positions.",name:"animated",required:!1,type:{name:"boolean"}},nodes:{defaultValue:null,description:"Nodes to pass to the graph.",name:"nodes",required:!0,type:{name:"GraphNode[]"}},edges:{defaultValue:null,description:"Edges to pass to the graph.",name:"edges",required:!0,type:{name:"GraphEdge[]"}},contextMenu:{defaultValue:null,description:"Context menu element.",name:"contextMenu",required:!1,type:{name:"(event: ContextMenuEvent) => ReactNode"}},sizingType:{defaultValue:null,description:"Type of sizing for nodes.",name:"sizingType",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"pagerank"'},{value:'"centrality"'},{value:'"attribute"'},{value:'"default"'}]}},labelType:{defaultValue:null,description:"Type of visibility for labels.",name:"labelType",required:!1,type:{name:"enum",value:[{value:'"nodes"'},{value:'"edges"'},{value:'"none"'},{value:'"all"'},{value:'"auto"'}]}},edgeLabelPosition:{defaultValue:null,description:"Place of visibility for edge labels.",name:"edgeLabelPosition",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"above"'},{value:'"inline"'},{value:'"natural"'}]}},edgeArrowPosition:{defaultValue:null,description:"Placement of edge arrows.",name:"edgeArrowPosition",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"mid"'},{value:'"end"'}]}},edgeInterpolation:{defaultValue:{value:"linear"},description:"Shape of edge.",name:"edgeInterpolation",required:!1,type:{name:"enum",value:[{value:'"linear"'},{value:'"curved"'}]}},labelFontUrl:{defaultValue:null,description:`Font of label, same as troika-three-text
The URL of a custom font file to be used. Supported font formats are: * .ttf * .otf * .woff (.woff2 is not supported)
Default: The Roboto font loaded from Google Fonts CDN`,name:"labelFontUrl",required:!1,type:{name:"string"}},sizingAttribute:{defaultValue:null,description:"Attribute based sizing property.",name:"sizingAttribute",required:!1,type:{name:"string"}},defaultNodeSize:{defaultValue:null,description:"The default size to size nodes to. Default is 7.",name:"defaultNodeSize",required:!1,type:{name:"number"}},minNodeSize:{defaultValue:null,description:"When using sizing attributes, the min size a node can be.",name:"minNodeSize",required:!1,type:{name:"number"}},maxNodeSize:{defaultValue:null,description:"When using sizing attributes, the max size a node can be.",name:"maxNodeSize",required:!1,type:{name:"number"}},clusterAttribute:{defaultValue:null,description:"Attribute used for clustering.",name:"clusterAttribute",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Disable interactions or not.",name:"disabled",required:!1,type:{name:"boolean"}},draggable:{defaultValue:null,description:"Allow dragging of nodes.",name:"draggable",required:!1,type:{name:"boolean"}},renderNode:{defaultValue:null,description:"Render a custom node",name:"renderNode",required:!1,type:{name:"NodeRenderer"}},layoutOverrides:{defaultValue:null,description:"Advanced overrides for the layout.",name:"layoutOverrides",required:!1,type:{name:"LayoutOverrides"}},onNodeClick:{defaultValue:null,description:"When a node was clicked.",name:"onNodeClick",required:!1,type:{name:"(node: InternalGraphNode, props?: CollapseProps) => void"}},onNodeDoubleClick:{defaultValue:null,description:"When a node was double clicked.",name:"onNodeDoubleClick",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onNodeContextMenu:{defaultValue:null,description:"When a node context menu happened.",name:"onNodeContextMenu",required:!1,type:{name:"(node: InternalGraphNode, props?: NodeContextMenuProps) => void"}},onNodePointerOver:{defaultValue:null,description:"When node got a pointer over.",name:"onNodePointerOver",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onNodePointerOut:{defaultValue:null,description:"When node lost pointer over.",name:"onNodePointerOut",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onNodeDragged:{defaultValue:null,description:"Triggered after a node was dragged.",name:"onNodeDragged",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onEdgeContextMenu:{defaultValue:null,description:"When a edge context menu happened.",name:"onEdgeContextMenu",required:!1,type:{name:"(edge?: InternalGraphEdge) => void"}},onEdgeClick:{defaultValue:null,description:"When an edge was clicked.",name:"onEdgeClick",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onEdgePointerOver:{defaultValue:null,description:"When edge got a pointer over.",name:"onEdgePointerOver",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onEdgePointerOut:{defaultValue:null,description:"When edge lost pointer over.",name:"onEdgePointerOut",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onClusterClick:{defaultValue:null,description:"When a cluster was clicked.",name:"onClusterClick",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},onClusterPointerOver:{defaultValue:null,description:"When a cluster recieves a pointer over event.",name:"onClusterPointerOver",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},onClusterPointerOut:{defaultValue:null,description:"When cluster recieves a pointer leave event.",name:"onClusterPointerOut",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<GraphSceneRef>"}}}}}catch{}const GT={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC",fontSize:6}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}};function uS(t,e,n){e=Array.isArray(e)?e:[e];const r=[],i=[];for(const o of e){const a=[...t.inEdgeEntries(o)??[],...t.outEdgeEntries(o)??[]];if(a)for(const s of a){const l=s.attributes.id;if(n==="in"?s.target===o&&!i.includes(l)&&i.push(l):n==="out"?s.source===o&&!i.includes(l)&&i.push(l):i.includes(l)||i.push(l),n==="out"||n==="all"){const u=s.target;r.includes(u)||r.push(u)}(n==="in"||n==="all")&&(r.includes(s.source)||r.push(s.source))}}return{nodes:r,edges:i}}function ta(t,e,n){const{offsetX:r,offsetY:i}=t,{width:o,height:a}=n;e.set(r/o*2-1,-(i/a)*2+1)}function zT(t){const e=document.createElement("div");return e.style.pointerEvents="none",e.style.border=t.lasso.border,e.style.backgroundColor=t.lasso.background,e.style.position="fixed",e}const Ql=({children:t,type:e="none",onLasso:n,onLassoEnd:r,disabled:i})=>{var O;const o=ce(G=>G.theme),a=lt(G=>G.camera),s=lt(G=>G.gl),l=lt(G=>G.setEvents),u=lt(G=>G.size),c=lt(G=>G.get),f=lt(G=>G.scene),d=ac(),h=ce(G=>G.actives),p=ce(G=>G.setActives),g=ce(G=>G.edges),y=ce(G=>G.edgeMeshes),m=R.useRef(!1),v=R.useRef(null),b=R.useRef(null),_=R.useRef(zT(o)),w=R.useRef(null),E=R.useRef(!1),S=R.useRef(c().events.enabled),x=R.useRef((O=d.controls)==null?void 0:O.enabled);R.useEffect(()=>{m.current&&(n==null||n(h)),m.current=!0},[h,n]);const A=R.useCallback(G=>{if(E.current){const[q,Y,I]=w.current;I.x=Math.max(q.x,G.clientX),I.y=Math.max(q.y,G.clientY),Y.x=Math.min(q.x,G.clientX),Y.y=Math.min(q.y,G.clientY),_.current.style.left=`${Y.x}px`,_.current.style.top=`${Y.y}px`,_.current.style.width=`${I.x-Y.x}px`,_.current.style.height=`${I.y-Y.y}px`,ta(G,v.current.endPoint,u),ta(G,b.current.endPoint,u);const B=[],F=b.current.select().sort(j=>j.uuid).map(j=>g[y.indexOf(j)].id);B.push(...F);const z=v.current.select().sort(j=>j.uuid).filter(j=>{var U,k;return j.isMesh&&((U=j.userData)==null?void 0:U.id)&&(((k=j.userData)==null?void 0:k.type)===e||e==="all")}).map(j=>j.userData.id);B.push(...z),requestAnimationFrame(()=>{p(B)}),document.addEventListener("pointermove",A,{passive:!0,capture:!0,once:!0})}},[g,y,p,u,e]),H=R.useCallback(()=>{var G;E.current&&(l({enabled:S.current}),E.current=!1,(G=_.current.parentElement)==null||G.removeChild(_.current),d.controls.enabled=x.current,r==null||r(h),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",H))},[l,d.controls,r,h,A]),V=R.useCallback(G=>{var q,Y;if(G.shiftKey){S.current=c().events.enabled,x.current=(q=d.controls)==null?void 0:q.enabled,v.current=new md(a,f);const I=new jg;y.length&&I.add(...y),b.current=new md(a,I),w.current=[new Oe,new Oe,new Oe];const[B]=w.current;d.controls.enabled=!1,l({enabled:!1}),E.current=!0,(Y=s.domElement.parentElement)==null||Y.appendChild(_.current),_.current.style.left=`${G.clientX}px`,_.current.style.top=`${G.clientY}px`,_.current.style.width="0px",_.current.style.height="0px",B.x=G.clientX,B.y=G.clientY,ta(G,v.current.startPoint,u),ta(G,b.current.startPoint,u),document.addEventListener("pointermove",A,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",H,{passive:!0})}},[a,d.controls,y,c,s.domElement.parentElement,A,H,f,l,u]);return R.useEffect(()=>{if(!(i||e==="none"))return typeof window<"u"&&(document.addEventListener("pointerdown",V,{passive:!0}),document.addEventListener("pointermove",A,{passive:!0}),document.addEventListener("pointerup",H,{passive:!0})),()=>{typeof window<"u"&&(document.removeEventListener("pointerdown",V),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",H))}},[e,i,V,A,H]),ae.jsx("group",{children:t})};try{Ql.displayName="Lasso",Ql.__docgenInfo={description:"",displayName:"Lasso",props:{disabled:{defaultValue:null,description:"Whether the lasso tool is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},type:{defaultValue:{value:"none"},description:"The type of the lasso tool.",name:"type",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"all"'},{value:'"node"'},{value:'"edge"'}]}},onLasso:{defaultValue:null,description:`A function that is called when the lasso tool is used to select nodes.
The function receives an array of the ids of the selected nodes.`,name:"onLasso",required:!1,type:{name:"(selections: string[]) => void"}},onLassoEnd:{defaultValue:null,description:`A function that is called when the lasso tool is released, ending the selection.
The function receives an array of the ids of the selected nodes.`,name:"onLassoEnd",required:!1,type:{name:"(selections: string[]) => void"}}}}}catch{}const jT="_canvas_670zp_1",NT={canvas:jT},qT={alpha:!0,antialias:!0},BT={position:[0,0,1e3],near:5,far:5e4,fov:10},Jl=R.forwardRef(({cameraMode:t,edges:e,children:n,nodes:r,theme:i,onCanvasClick:o,animated:a,disabled:s,lassoType:l,onLasso:u,onLassoEnd:c,glOptions:f,...d},h)=>{var E,S;const p=R.useRef(null),g=R.useRef(null),y=R.useRef(null);R.useImperativeHandle(h,()=>({centerGraph:x=>{var A;return(A=p.current)==null?void 0:A.centerGraph(x)},zoomIn:()=>{var x;return(x=g.current)==null?void 0:x.zoomIn()},zoomOut:()=>{var x;return(x=g.current)==null?void 0:x.zoomOut()},panLeft:()=>{var x;return(x=g.current)==null?void 0:x.panLeft()},panRight:()=>{var x;return(x=g.current)==null?void 0:x.panRight()},panDown:()=>{var x;return(x=g.current)==null?void 0:x.panDown()},panUp:()=>{var x;return(x=g.current)==null?void 0:x.panUp()},resetControls:x=>{var A;return(A=g.current)==null?void 0:A.resetControls(x)},getControls:()=>{var x;return(x=g.current)==null?void 0:x.controls},getGraph:()=>{var x;return(x=p.current)==null?void 0:x.graph},exportCanvas:()=>(p.current.renderScene(),y.current.toDataURL())}));const{selections:m,actives:v,collapsedNodeIds:b}=d,_=e.length+r.length>400?!1:a,w=R.useMemo(()=>({...f,...qT}),[f]);return ae.jsx("div",{className:NT.canvas,children:ae.jsx(ay,{legacy:!0,linear:!0,ref:y,flat:!0,gl:w,camera:BT,onPointerMissed:o,children:ae.jsxs(Ox,{createStore:()=>Dx({selections:m,actives:v,theme:i,collapsedNodeIds:b}),children:[((E=i.canvas)==null?void 0:E.background)&&ae.jsx("color",{attach:"background",args:[i.canvas.background]}),ae.jsx("ambientLight",{intensity:1}),n,((S=i.canvas)==null?void 0:S.fog)&&ae.jsx("fog",{attach:"fog",args:[i.canvas.fog,4e3,9e3]}),ae.jsx(La,{mode:t,ref:g,disabled:s,animated:a,children:ae.jsx(Ql,{disabled:s,type:l,onLasso:u,onLassoEnd:c,children:ae.jsx(R.Suspense,{children:ae.jsx(qa,{ref:p,disabled:s,animated:_,edges:e,nodes:r,...d})})})})]})})})});Jl.defaultProps={cameraMode:"pan",layoutType:"forceDirected2d",sizingType:"default",labelType:"auto",theme:GT,animated:!0,defaultNodeSize:7,minNodeSize:5,maxNodeSize:15,lassoType:"none",glOptions:{}};try{Jl.displayName="GraphCanvas",Jl.__docgenInfo={description:"",displayName:"GraphCanvas",props:{theme:{defaultValue:{value:`{
  canvas: {
    background: '#fff'
  },
  node: {
    fill: '#7CA0AB',
    activeFill: '#1DE9AC',
    opacity: 1,
    selectedOpacity: 1,
    inactiveOpacity: 0.2,
    label: {
      color: '#2A6475',
      stroke: '#fff',
      activeColor: '#1DE9AC'
    },
    subLabel: {
      color: '#ddd',
      stroke: 'transparent',
      activeColor: '#1DE9AC'
    }
  },
  lasso: {
    border: '1px solid #55aaff',
    background: 'rgba(75, 160, 255, 0.1)'
  },
  ring: {
    fill: '#D8E6EA',
    activeFill: '#1DE9AC'
  },
  edge: {
    fill: '#D8E6EA',
    activeFill: '#1DE9AC',
    opacity: 1,
    selectedOpacity: 1,
    inactiveOpacity: 0.1,
    label: {
      stroke: '#fff',
      color: '#2A6475',
      activeColor: '#1DE9AC',
      fontSize: 6
    }
  },
  arrow: {
    fill: '#D8E6EA',
    activeFill: '#1DE9AC'
  },
  cluster: {
    stroke: '#D8E6EA',
    opacity: 1,
    selectedOpacity: 1,
    inactiveOpacity: 0.1,
    label: {
      stroke: '#fff',
      color: '#2A6475'
    }
  }
}`},description:"Theme to use for the graph.",name:"theme",required:!1,type:{name:"Theme"}},cameraMode:{defaultValue:{value:"pan"},description:"Type of camera interaction.",name:"cameraMode",required:!1,type:{name:"enum",value:[{value:'"pan"'},{value:'"rotate"'},{value:'"orbit"'}]}},onCanvasClick:{defaultValue:null,description:"When the canvas was clicked but didn't hit a node/edge.",name:"onCanvasClick",required:!1,type:{name:"(event: MouseEvent) => void"}},lassoType:{defaultValue:{value:"none"},description:"The type of lasso selection.",name:"lassoType",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"all"'},{value:'"node"'},{value:'"edge"'}]}},onLasso:{defaultValue:null,description:"When the canvas had a lasso selection.",name:"onLasso",required:!1,type:{name:"(selections: string[]) => void"}},onLassoEnd:{defaultValue:null,description:"When the canvas had a lasso selection end.",name:"onLassoEnd",required:!1,type:{name:"(selections: string[]) => void"}},children:{defaultValue:null,description:"Children to render in the canvas. Useful for things like lights.",name:"children",required:!1,type:{name:"ReactNode"}},glOptions:{defaultValue:{value:"{}"},description:"Ability to extend Cavas gl options. For example { preserveDrawingBuffer: true }",name:"glOptions",required:!1,type:{name:"Object"}},layoutType:{defaultValue:{value:"forceDirected2d"},description:"Type of layout.",name:"layoutType",required:!1,type:{name:"enum",value:[{value:'"forceDirected2d"'},{value:'"forceDirected3d"'},{value:'"circular2d"'},{value:'"treeTd2d"'},{value:'"treeTd3d"'},{value:'"treeLr2d"'},{value:'"treeLr3d"'},{value:'"radialOut2d"'},{value:'"radialOut3d"'},{value:'"hierarchicalTd"'},{value:'"hierarchicalLr"'},{value:'"nooverlap"'},{value:'"forceatlas2"'},{value:'"custom"'}]}},selections:{defaultValue:null,description:"List of ids that are selected.",name:"selections",required:!1,type:{name:"string[]"}},actives:{defaultValue:null,description:"List of ids that are active.",name:"actives",required:!1,type:{name:"string[]"}},collapsedNodeIds:{defaultValue:null,description:"List of node ids that are collapsed.",name:"collapsedNodeIds",required:!1,type:{name:"string[]"}},animated:{defaultValue:{value:"true"},description:"Animate or not the graph positions.",name:"animated",required:!1,type:{name:"boolean"}},nodes:{defaultValue:null,description:"Nodes to pass to the graph.",name:"nodes",required:!0,type:{name:"GraphNode[]"}},edges:{defaultValue:null,description:"Edges to pass to the graph.",name:"edges",required:!0,type:{name:"GraphEdge[]"}},contextMenu:{defaultValue:null,description:"Context menu element.",name:"contextMenu",required:!1,type:{name:"(event: ContextMenuEvent) => ReactNode"}},sizingType:{defaultValue:{value:"default"},description:"Type of sizing for nodes.",name:"sizingType",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"pagerank"'},{value:'"centrality"'},{value:'"attribute"'},{value:'"default"'}]}},labelType:{defaultValue:{value:"auto"},description:"Type of visibility for labels.",name:"labelType",required:!1,type:{name:"enum",value:[{value:'"nodes"'},{value:'"edges"'},{value:'"none"'},{value:'"all"'},{value:'"auto"'}]}},edgeLabelPosition:{defaultValue:null,description:"Place of visibility for edge labels.",name:"edgeLabelPosition",required:!1,type:{name:"enum",value:[{value:'"below"'},{value:'"above"'},{value:'"inline"'},{value:'"natural"'}]}},edgeArrowPosition:{defaultValue:null,description:"Placement of edge arrows.",name:"edgeArrowPosition",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"mid"'},{value:'"end"'}]}},edgeInterpolation:{defaultValue:null,description:"Shape of edge.",name:"edgeInterpolation",required:!1,type:{name:"enum",value:[{value:'"linear"'},{value:'"curved"'}]}},labelFontUrl:{defaultValue:null,description:`Font of label, same as troika-three-text
The URL of a custom font file to be used. Supported font formats are: * .ttf * .otf * .woff (.woff2 is not supported)
Default: The Roboto font loaded from Google Fonts CDN`,name:"labelFontUrl",required:!1,type:{name:"string"}},sizingAttribute:{defaultValue:null,description:"Attribute based sizing property.",name:"sizingAttribute",required:!1,type:{name:"string"}},defaultNodeSize:{defaultValue:{value:"7"},description:"The default size to size nodes to. Default is 7.",name:"defaultNodeSize",required:!1,type:{name:"number"}},minNodeSize:{defaultValue:{value:"5"},description:"When using sizing attributes, the min size a node can be.",name:"minNodeSize",required:!1,type:{name:"number"}},maxNodeSize:{defaultValue:{value:"15"},description:"When using sizing attributes, the max size a node can be.",name:"maxNodeSize",required:!1,type:{name:"number"}},clusterAttribute:{defaultValue:null,description:"Attribute used for clustering.",name:"clusterAttribute",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Disable interactions or not.",name:"disabled",required:!1,type:{name:"boolean"}},draggable:{defaultValue:null,description:"Allow dragging of nodes.",name:"draggable",required:!1,type:{name:"boolean"}},renderNode:{defaultValue:null,description:"Render a custom node",name:"renderNode",required:!1,type:{name:"NodeRenderer"}},layoutOverrides:{defaultValue:null,description:"Advanced overrides for the layout.",name:"layoutOverrides",required:!1,type:{name:"LayoutOverrides"}},onNodeClick:{defaultValue:null,description:"When a node was clicked.",name:"onNodeClick",required:!1,type:{name:"(node: InternalGraphNode, props?: CollapseProps) => void"}},onNodeDoubleClick:{defaultValue:null,description:"When a node was double clicked.",name:"onNodeDoubleClick",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onNodeContextMenu:{defaultValue:null,description:"When a node context menu happened.",name:"onNodeContextMenu",required:!1,type:{name:"(node: InternalGraphNode, props?: NodeContextMenuProps) => void"}},onNodePointerOver:{defaultValue:null,description:"When node got a pointer over.",name:"onNodePointerOver",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onNodePointerOut:{defaultValue:null,description:"When node lost pointer over.",name:"onNodePointerOut",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onNodeDragged:{defaultValue:null,description:"Triggered after a node was dragged.",name:"onNodeDragged",required:!1,type:{name:"(node: InternalGraphNode) => void"}},onEdgeContextMenu:{defaultValue:null,description:"When a edge context menu happened.",name:"onEdgeContextMenu",required:!1,type:{name:"(edge?: InternalGraphEdge) => void"}},onEdgeClick:{defaultValue:null,description:"When an edge was clicked.",name:"onEdgeClick",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onEdgePointerOver:{defaultValue:null,description:"When edge got a pointer over.",name:"onEdgePointerOver",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onEdgePointerOut:{defaultValue:null,description:"When edge lost pointer over.",name:"onEdgePointerOut",required:!1,type:{name:"(edge: InternalGraphEdge) => void"}},onClusterClick:{defaultValue:null,description:"When a cluster was clicked.",name:"onClusterClick",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},onClusterPointerOver:{defaultValue:null,description:"When a cluster recieves a pointer over event.",name:"onClusterPointerOver",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},onClusterPointerOut:{defaultValue:null,description:"When cluster recieves a pointer leave event.",name:"onClusterPointerOut",required:!1,type:{name:"(cluster: ClusterEventArgs) => void"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<GraphCanvasRef>"}}}}}catch{}var Xm={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Xm);var $T=Xm.exports;const Km=Qt($T),WT="_container_155l7_1",HT="_disabled_155l7_7",YT="_contentContainer_155l7_10",XT="_contentInner_155l7_35",KT="_content_155l7_10",Li={container:WT,disabled:HT,contentContainer:YT,contentInner:XT,content:KT},eu=({label:t,centralAngle:e,startAngle:n,endAngle:r,polar:i,radius:o,className:a,icon:s,innerRadius:l,skew:u,disabled:c,onClick:f})=>ae.jsx("div",{role:"menuitem",className:Km(Li.container,a,{[Li.disabled]:c}),style:{width:e>90?"100%":"50%",height:e>90?"100%":"50%",bottom:e>90?"50%":"initial",right:e>90?"50%":"initial",transform:`rotate(${n+r}deg) skew(${u}deg)`},onClick:d=>{c||f(d)},children:ae.jsx("div",{className:Li.contentContainer,style:{transform:`skew(${-u}deg) rotate(${(i?90:e)/2-90}deg)`},children:ae.jsx("div",{className:Li.contentInner,style:{top:`calc((((${e>90?"50% + ":""}${o}px) - ${l}px) / 2) - 4em)`},children:ae.jsxs("div",{className:Li.content,style:{transform:`rotate(${-r}deg)`},title:t,children:[s,t]})})})});try{eu.displayName="RadialSlice",eu.__docgenInfo={description:"",displayName:"RadialSlice",props:{startAngle:{defaultValue:null,description:"The starting angle of the radial slice, in degrees.",name:"startAngle",required:!0,type:{name:"number"}},endAngle:{defaultValue:null,description:"The ending angle of the radial slice, in degrees.",name:"endAngle",required:!0,type:{name:"number"}},skew:{defaultValue:null,description:"The skew of the radial slice.",name:"skew",required:!0,type:{name:"number"}},polar:{defaultValue:null,description:"Whether the radial slice is polar (true) or not (false).",name:"polar",required:!0,type:{name:"boolean"}},centralAngle:{defaultValue:null,description:"The central angle of the radial slice, in degrees.",name:"centralAngle",required:!0,type:{name:"number"}},radius:{defaultValue:null,description:"The radius of the radial slice.",name:"radius",required:!0,type:{name:"number"}},innerRadius:{defaultValue:null,description:"The inner radius of the radial slice.",name:"innerRadius",required:!0,type:{name:"number"}},label:{defaultValue:null,description:"Label to display on the menu item.",name:"label",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"CSS Classname to apply to the slice.",name:"className",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"Optional icon to display on the menu item.",name:"icon",required:!1,type:{name:"ReactNode"}},disabled:{defaultValue:null,description:"Optional callback to detemine if the menu item is active.",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"Optional callback to handle when the menu item is clicked.",name:"onClick",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}}}}}catch{}function ZT(t,e){const n=360/t.length||360,r=n%180===0,i=90-n,o=r?45:e+i+n/2;return{centralAngle:n,polar:r,startAngle:o,deltaAngle:i}}const QT="_container_x9hyx_1",JT={container:QT},tu=({items:t,radius:e,className:n,innerRadius:r,startOffsetAngle:i,onClose:o})=>{const{centralAngle:a,polar:s,startAngle:l,deltaAngle:u}=R.useMemo(()=>ZT(t,i),[t,i]),c=R.useRef(null);return R.useLayoutEffect(()=>{const f=c.current;return()=>clearTimeout(f)},[]),t.length===0?null:ae.jsx("div",{role:"menu",className:Km(JT.container,n),onPointerEnter:()=>clearTimeout(c.current),onPointerLeave:f=>{clearTimeout(c.current),c.current=setTimeout(()=>o==null?void 0:o(f),500)},children:t.map((f,d)=>ae.jsx(eu,{...f,radius:e,innerRadius:r,startAngle:l,endAngle:a*d,skew:s?0:u,polar:s,centralAngle:a,onClick:h=>{f==null||f.onClick(h),o==null||o(h)}},d))})};tu.defaultProps={radius:175,innerRadius:25,startOffsetAngle:0};try{tu.displayName="RadialMenu",tu.__docgenInfo={description:"",displayName:"RadialMenu",props:{items:{defaultValue:null,description:"An array of menu items to be displayed in the radial menu.",name:"items",required:!0,type:{name:"MenuItem[]"}},radius:{defaultValue:{value:"175"},description:"The radius of the radial menu.",name:"radius",required:!1,type:{name:"number"}},innerRadius:{defaultValue:{value:"25"},description:"The inner radius of the radial menu.",name:"innerRadius",required:!1,type:{name:"number"}},startOffsetAngle:{defaultValue:{value:"0"},description:"The starting offset angle for the first menu item.",name:"startOffsetAngle",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"The CSS class name for the radial menu.",name:"className",required:!1,type:{name:"string"}},onClose:{defaultValue:null,description:`A function that is called when the radial menu is closed.
The function receives the mouse event that triggered the closure.`,name:"onClose",required:!1,type:{name:"(event: MouseEvent<HTMLDivElement, MouseEvent>) => void"}}}}}catch{}export{Jl as G,tu as R,Xl as S,Kl as a,Ua as b,aS as c,Cx as d,Mx as e,wh as f,uS as g,GT as l,Hm as u};
